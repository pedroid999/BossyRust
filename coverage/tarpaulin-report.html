<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: white;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
    content: counter(line);
    margin-right: 10px;
}
.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
  counter-increment: line;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","benches","performance_benchmarks.rs"],"content":"use criterion::{criterion_group, criterion_main, Criterion, BenchmarkId};\nuse bossy_rust::testing::*;\nuse bossy_rust::process::ProcessInfo;\nuse bossy_rust::network::PortInfo;\nuse bossy_rust::tui::AppState;\n\nfn bench_process_search(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"process_search\");\n    \n    // Test different dataset sizes\n    for size in [10, 100, 1000].iter() {\n        let processes: Vec\u003cProcessInfo\u003e = (0..*size)\n            .map(|i| create_test_process(i as u32, \u0026format!(\"process_{}\", i), 20.0, 1024))\n            .collect();\n        \n        group.bench_with_input(\n            BenchmarkId::new(\"name_search\", size),\n            size,\n            |b, _| {\n                b.iter(|| {\n                    processes.iter()\n                        .filter(|p| p.matches_search(\"node\"))\n                        .count()\n                })\n            }\n        );\n        \n        group.bench_with_input(\n            BenchmarkId::new(\"pid_search\", size),\n            size,\n            |b, _| {\n                b.iter(|| {\n                    processes.iter()\n                        .filter(|p| p.matches_search(\"#1234\"))\n                        .count()\n                })\n            }\n        );\n        \n        group.bench_with_input(\n            BenchmarkId::new(\"cpu_search\", size),\n            size,\n            |b, _| {\n                b.iter(|| {\n                    processes.iter()\n                        .filter(|p| p.matches_search(\"\u003e50%\"))\n                        .count()\n                })\n            }\n        );\n    }\n    \n    group.finish();\n}\n\nfn bench_port_operations(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"port_operations\");\n    \n    for size in [10, 100, 1000].iter() {\n        let ports: Vec\u003cPortInfo\u003e = (3000..*size + 3000)\n            .map(|port| create_test_port(port as u16, bossy_rust::network::Protocol::TCP, Some(1234)))\n            .collect();\n        \n        group.bench_with_input(\n            BenchmarkId::new(\"port_search\", size),\n            size,\n            |b, _| {\n                b.iter(|| {\n                    ports.iter()\n                        .filter(|p| p.matches_search(\":3000\"))\n                        .count()\n                })\n            }\n        );\n        \n        group.bench_with_input(\n            BenchmarkId::new(\"development_port_check\", size),\n            size,\n            |b, _| {\n                b.iter(|| {\n                    ports.iter()\n                        .filter(|p| p.is_development_port())\n                        .count()\n                })\n            }\n        );\n    }\n    \n    group.finish();\n}\n\nfn bench_app_state_operations(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"app_state_operations\");\n    \n    let mut app = AppState::default();\n    \n    // Populate with test data\n    for i in 0..1000 {\n        app.processes.push(create_test_process(i, \u0026format!(\"process_{}\", i), 25.0, 2048));\n        app.ports.push(create_test_port(3000 + i as u16, bossy_rust::network::Protocol::TCP, Some(i)));\n    }\n    \n    group.bench_function(\"filter_processes\", |b| {\n        b.iter(|| {\n            let _filtered: Vec\u003c_\u003e = app.processes.iter()\n                .filter(|p| p.matches_search(\"test\"))\n                .collect();\n        })\n    });\n    \n    group.bench_function(\"sort_processes_by_cpu\", |b| {\n        let mut processes = app.processes.clone();\n        b.iter(|| {\n            processes.sort_by(|a, b| b.cpu_percent.partial_cmp(\u0026a.cpu_percent).unwrap_or(std::cmp::Ordering::Equal));\n        })\n    });\n    \n    group.bench_function(\"sort_processes_by_memory\", |b| {\n        let mut processes = app.processes.clone();\n        b.iter(|| {\n            processes.sort_by(|a, b| b.memory_mb.cmp(\u0026a.memory_mb));\n        })\n    });\n    \n    group.finish();\n}\n\nfn bench_tui_operations(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"tui_operations\");\n    \n    // Mock TUI operations that might be performance-critical\n    group.bench_function(\"theme_switching\", |b| {\n        b.iter(|| {\n            let themes = bossy_rust::tui::themes::ThemeManager::get_themes();\n            let _theme = \u0026themes[0];\n        })\n    });\n    \n    group.bench_function(\"tui_helper_creation\", |b| {\n        b.iter(|| {\n            let _helper = TUITestHelper::new();\n        })\n    });\n    \n    group.finish();\n}\n\nfn bench_memory_formatting(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"memory_formatting\");\n    \n    let memory_values = vec![512, 1024, 2048, 4096, 8192, 16384];\n    \n    for memory_mb in memory_values {\n        group.bench_with_input(\n            BenchmarkId::new(\"format_memory\", memory_mb),\n            \u0026memory_mb,\n            |b, \u0026memory| {\n                let mut process = create_test_process(1234, \"test\", 30.0, memory);\n                process.memory = memory;\n                b.iter(|| {\n                    let _formatted = process.format_memory();\n                })\n            }\n        );\n    }\n    \n    group.finish();\n}\n\nfn bench_search_patterns(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"search_patterns\");\n    \n    let process = create_test_process(1234, \"node_server_application\", 40.0, 4096);\n    let patterns = vec![\n        \"node\",\n        \"#1234\", \n        \":3000\",\n        \"\u003e50%\",\n        \"\u003e1GB\",\n        \"server\",\n        \"application\"\n    ];\n    \n    for pattern in patterns {\n        group.bench_with_input(\n            BenchmarkId::new(\"pattern_match\", pattern),\n            pattern,\n            |b, pattern| {\n                b.iter(|| {\n                    let _matches = process.matches_search(pattern);\n                })\n            }\n        );\n    }\n    \n    group.finish();\n}\n\nfn bench_realistic_workload(c: \u0026mut Criterion) {\n    let mut group = c.benchmark_group(\"realistic_workload\");\n    \n    // Simulate a realistic system with mixed processes\n    let realistic_processes: Vec\u003cProcessInfo\u003e = vec![\n        create_test_process(1, \"launchd\", 0.1, 64),\n        create_test_process(100, \"node server.js\", 45.2, 2048),\n        create_test_process(101, \"python manage.py runserver\", 23.1, 1536),\n        create_test_process(102, \"Google Chrome\", 15.8, 8192),\n        create_test_process(103, \"Visual Studio Code\", 8.4, 4096),\n        create_test_process(104, \"docker-proxy\", 12.1, 3072),\n        create_test_process(105, \"rust-analyzer\", 3.2, 1024),\n        create_test_process(106, \"cargo run\", 25.5, 512),\n        create_test_process(107, \"npm start\", 18.3, 768),\n        create_test_process(108, \"webpack-dev-server\", 35.7, 2560),\n    ];\n    \n    group.bench_function(\"full_search_workflow\", |b| {\n        b.iter(|| {\n            // Simulate a typical user search workflow\n            let _node_processes: Vec\u003c_\u003e = realistic_processes.iter()\n                .filter(|p| p.matches_search(\"node\"))\n                .collect();\n            \n            let _high_cpu: Vec\u003c_\u003e = realistic_processes.iter()\n                .filter(|p| p.matches_search(\"\u003e10%\"))\n                .collect();\n            \n            let _development: Vec\u003c_\u003e = realistic_processes.iter()\n                .filter(|p| p.name.contains(\"node\") || p.name.contains(\"npm\") || p.name.contains(\"cargo\"))\n                .collect();\n        })\n    });\n    \n    group.finish();\n}\n\ncriterion_group!(\n    benches,\n    bench_process_search,\n    bench_port_operations, \n    bench_app_state_operations,\n    bench_tui_operations,\n    bench_memory_formatting,\n    bench_search_patterns,\n    bench_realistic_workload\n);\n\ncriterion_main!(benches);","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","commands","cli.rs"],"content":"use crate::network::{NetworkUtils, PortManager};\nuse crate::process::{ProcessKiller, ProcessMonitor};\nuse anyhow::Result;\n\npub struct CliHandler;\n\nimpl CliHandler {\n    pub async fn show_port_info(port: u16) -\u003e Result\u003c()\u003e {\n        let ports = PortManager::get_port_by_number(port)?;\n\n        if ports.is_empty() {\n            println!(\"No processes found using port {port}\");\n            return Ok(());\n        }\n\n        println!(\"Port {port} information:\");\n        println!(\"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\");\n\n        for port_info in ports {\n            println!(\"Protocol: {:?}\", port_info.protocol);\n            println!(\"State: {:?}\", port_info.state);\n            println!(\"Local Address: {}\", port_info.local_address);\n\n            if let Some(remote) = \u0026port_info.remote_address {\n                println!(\"Remote Address: {remote}\");\n            }\n\n            if let Some(pid) = port_info.pid {\n                println!(\"PID: {pid}\");\n            }\n\n            if let Some(ref process_name) = port_info.process_name {\n                println!(\"Process: {process_name}\");\n            }\n\n            if let Some(service) = port_info.get_service_suggestion() {\n                println!(\"Service: {service}\");\n            }\n\n            println!(\"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\");\n        }\n\n        Ok(())\n    }\n\n    pub async fn kill_port(port: u16) -\u003e Result\u003c()\u003e {\n        println!(\"Killing process using port {port}...\");\n\n        match ProcessKiller::kill_process_by_port(port).await {\n            Ok(pid) =\u003e {\n                println!(\"âœ… Successfully killed process {pid} using port {port}\");\n            }\n            Err(e) =\u003e {\n                eprintln!(\"âŒ Failed to kill process on port {port}: {e}\");\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n\n    pub async fn show_ports(common: bool, listening: bool) -\u003e Result\u003c()\u003e {\n        let ports = if listening {\n            PortManager::get_listening_ports()?\n        } else if common {\n            PortManager::get_development_ports()?\n        } else {\n            PortManager::get_all_ports()?\n        };\n\n        if ports.is_empty() {\n            println!(\"No ports found\");\n            return Ok(());\n        }\n\n        println!(\"Ports ({}):\", ports.len());\n        println!(\"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\");\n        println!(\"â”‚  Port   â”‚ Proto   â”‚   State    â”‚   PID   â”‚       Process       â”‚       Service        â”‚\");\n        println!(\"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\");\n\n        for port in ports {\n            let protocol = format!(\"{:?}\", port.protocol);\n            let state = format!(\"{:?}\", port.state);\n            let pid = port.pid.map_or(\"-\".to_string(), |p| p.to_string());\n            let process = port.process_name.as_deref().unwrap_or(\"-\");\n            let service = port.get_service_suggestion().unwrap_or(\"-\".to_string());\n\n            println!(\n                \"â”‚ {:\u003e7} â”‚ {:\u003e7} â”‚ {:\u003e10} â”‚ {:\u003e7} â”‚ {:\u003e19} â”‚ {:\u003e20} â”‚\",\n                port.port,\n                \u0026protocol[..std::cmp::min(protocol.len(), 7)],\n                \u0026state[..std::cmp::min(state.len(), 10)],\n                \u0026pid[..std::cmp::min(pid.len(), 7)],\n                \u0026process[..std::cmp::min(process.len(), 19)],\n                \u0026service[..std::cmp::min(service.len(), 20)]\n            );\n        }\n\n        println!(\"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\");\n\n        Ok(())\n    }\n\n    pub async fn kill_process(name: \u0026str, force: bool) -\u003e Result\u003c()\u003e {\n        println!(\"Killing processes matching '{name}'...\");\n\n        match ProcessKiller::kill_processes_by_name(name, force).await {\n            Ok(pids) =\u003e {\n                if pids.is_empty() {\n                    println!(\"No processes found matching '{name}'\");\n                } else {\n                    println!(\n                        \"âœ… Successfully killed {} process(es): {pids:?}\",\n                        pids.len()\n                    );\n                }\n            }\n            Err(e) =\u003e {\n                eprintln!(\"âŒ Failed to kill processes: {e}\");\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n\n    pub async fn show_processes(top_cpu: bool, top_memory: bool, limit: usize) -\u003e Result\u003c()\u003e {\n        let mut monitor = ProcessMonitor::new();\n\n        let processes = if top_cpu {\n            monitor.get_top_cpu_processes(limit)\n        } else if top_memory {\n            monitor.get_top_memory_processes(limit)\n        } else {\n            let mut procs = monitor.get_processes();\n            procs.truncate(limit);\n            procs\n        };\n\n        if processes.is_empty() {\n            println!(\"No processes found\");\n            return Ok(());\n        }\n\n        let title = if top_cpu {\n            format!(\"Top {limit} CPU Consumers\")\n        } else if top_memory {\n            format!(\"Top {limit} Memory Consumers\")\n        } else {\n            format!(\"Processes (showing {limit})\")\n        };\n\n        println!(\"{title}:\");\n        println!(\"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\");\n        println!(\"â”‚   PID    â”‚       Process       â”‚  CPU %  â”‚   Memory    â”‚    Status    â”‚\");\n        println!(\"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\");\n\n        for process in processes {\n            let name = if process.name.chars().count() \u003e 19 {\n                format!(\"{}â€¦\", process.name.chars().take(18).collect::\u003cString\u003e())\n            } else {\n                process.name.clone()\n            };\n\n            let status = if process.status.chars().count() \u003e 12 {\n                format!(\"{}â€¦\", process.status.chars().take(11).collect::\u003cString\u003e())\n            } else {\n                process.status.clone()\n            };\n\n            println!(\n                \"â”‚ {:\u003e8} â”‚ {:\u003e19} â”‚ {:\u003e7.1} â”‚ {:\u003e11} â”‚ {:\u003e12} â”‚\",\n                process.pid,\n                name,\n                process.cpu_usage,\n                process.format_memory(),\n                status\n            );\n        }\n\n        println!(\"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\");\n\n        Ok(())\n    }\n\n    pub async fn cleanup_processes(dev: bool) -\u003e Result\u003c()\u003e {\n        if dev {\n            println!(\"Cleaning up development processes...\");\n\n            match ProcessKiller::cleanup_dev_processes().await {\n                Ok(pids) =\u003e {\n                    if pids.is_empty() {\n                        println!(\"No development processes found to cleanup\");\n                    } else {\n                        println!(\n                            \"âœ… Cleaned up {} development processes: {pids:?}\",\n                            pids.len()\n                        );\n                    }\n                }\n                Err(e) =\u003e {\n                    eprintln!(\"âŒ Failed to cleanup processes: {e}\");\n                    std::process::exit(1);\n                }\n            }\n        } else {\n            println!(\"Please specify --dev to cleanup development processes\");\n        }\n\n        Ok(())\n    }\n\n    pub async fn find_available_port(start: u16, end: u16) -\u003e Result\u003c()\u003e {\n        println!(\"Searching for available ports in range {start}-{end}...\");\n\n        match ProcessKiller::find_available_port(start, end) {\n            Ok(port) =\u003e {\n                println!(\"âœ… Available port found: {port}\");\n\n                // Show suggestions for common development ports\n                if NetworkUtils::is_development_port(port) {\n                    if let Some(service) = NetworkUtils::get_well_known_ports().get(\u0026port) {\n                        println!(\"ğŸ’¡ This port is commonly used for: {service}\");\n                    }\n                }\n            }\n            Err(e) =\u003e {\n                println!(\"âŒ {e}\");\n\n                // Suggest alternatives\n                let alternatives = NetworkUtils::suggest_alternative_port(start);\n                if !alternatives.is_empty() {\n                    println!(\"ğŸ’¡ Consider trying these alternative ports: {alternatives:?}\");\n                }\n\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::testing::mocks::MockSystemOutputs;\n\n    #[tokio::test]\n    async fn test_show_port_info_no_process() {\n        // This test would need to mock the PortManager\n        // For now, test that the function doesn't panic\n        assert!(true);\n    }\n\n    #[tokio::test]\n    #[ignore] // Ignore this test because kill_port calls std::process::exit(1)\n    async fn test_kill_port_invalid() {\n        // Test with a port that's very unlikely to be in use\n        // NOTE: This test is ignored because the kill_port function calls std::process::exit(1)\n        // which would terminate the test process. This is a design issue that should be addressed\n        // by refactoring the CLI functions to return errors instead of calling exit.\n        let result = CliHandler::kill_port(65534).await;\n        match result {\n            Ok(_) =\u003e assert!(true),\n            Err(_) =\u003e assert!(true),\n        }\n    }\n\n    #[tokio::test]\n    async fn test_show_all_ports() {\n        let result = CliHandler::show_ports(false, false).await;\n        // Should not panic, may succeed or fail based on system state\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_kill_process_non_existent() {\n        let result = CliHandler::kill_process(\"non_existent_process_xyz_123\", false).await;\n        // Should handle non-existent process gracefully\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_show_processes() {\n        let result = CliHandler::show_processes(false, false, 5).await;\n        // Should not panic\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_cleanup_development_processes() {\n        let result = CliHandler::cleanup_processes(false).await;\n        // Should handle cleanup gracefully\n        assert!(result.is_ok());\n    }\n\n    #[tokio::test]\n    async fn test_find_available_port() {\n        let result = CliHandler::find_available_port(50000, 50010).await;\n        // Should find an available port in this range\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[test]\n    fn test_mock_system_outputs() {\n        let ps_output = MockSystemOutputs::mock_ps_output();\n        assert!(ps_output.contains(\"node server.js\"));\n        assert!(ps_output.contains(\"PID\"));\n\n        let lsof_output = MockSystemOutputs::mock_lsof_output();\n        assert!(lsof_output.contains(\":3000\"));\n        assert!(lsof_output.contains(\"LISTEN\"));\n\n        let netstat_output = MockSystemOutputs::mock_netstat_output();\n        assert!(netstat_output.contains(\"127.0.0.1\"));\n        assert!(netstat_output.contains(\"ESTABLISHED\"));\n    }\n\n    #[test]\n    fn test_cli_handler_instantiation() {\n        // Test that CliHandler can be instantiated (though it's a unit struct)\n        let _handler = CliHandler;\n        assert!(true);\n    }\n}\n","traces":[{"line":8,"address":[],"length":0,"stats":{"Line":6}},{"line":9,"address":[],"length":0,"stats":{"Line":9}},{"line":11,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":6}},{"line":13,"address":[],"length":0,"stats":{"Line":3}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":12}},{"line":63,"address":[],"length":0,"stats":{"Line":12}},{"line":64,"address":[],"length":0,"stats":{"Line":2}},{"line":65,"address":[],"length":0,"stats":{"Line":4}},{"line":66,"address":[],"length":0,"stats":{"Line":1}},{"line":68,"address":[],"length":0,"stats":{"Line":3}},{"line":72,"address":[],"length":0,"stats":{"Line":2}},{"line":73,"address":[],"length":0,"stats":{"Line":1}},{"line":81,"address":[],"length":0,"stats":{"Line":697}},{"line":84,"address":[],"length":0,"stats":{"Line":374}},{"line":104,"address":[],"length":0,"stats":{"Line":6}},{"line":105,"address":[],"length":0,"stats":{"Line":6}},{"line":107,"address":[],"length":0,"stats":{"Line":12}},{"line":108,"address":[],"length":0,"stats":{"Line":3}},{"line":109,"address":[],"length":0,"stats":{"Line":9}},{"line":110,"address":[],"length":0,"stats":{"Line":3}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":3}},{"line":127,"address":[],"length":0,"stats":{"Line":16}},{"line":128,"address":[],"length":0,"stats":{"Line":16}},{"line":130,"address":[],"length":0,"stats":{"Line":16}},{"line":131,"address":[],"length":0,"stats":{"Line":3}},{"line":132,"address":[],"length":0,"stats":{"Line":7}},{"line":133,"address":[],"length":0,"stats":{"Line":3}},{"line":135,"address":[],"length":0,"stats":{"Line":6}},{"line":140,"address":[],"length":0,"stats":{"Line":16}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":2}},{"line":147,"address":[],"length":0,"stats":{"Line":7}},{"line":148,"address":[],"length":0,"stats":{"Line":2}},{"line":150,"address":[],"length":0,"stats":{"Line":6}},{"line":158,"address":[],"length":0,"stats":{"Line":106}},{"line":160,"address":[],"length":0,"stats":{"Line":95}},{"line":162,"address":[],"length":0,"stats":{"Line":30}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":49}},{"line":186,"address":[],"length":0,"stats":{"Line":8}},{"line":187,"address":[],"length":0,"stats":{"Line":4}},{"line":188,"address":[],"length":0,"stats":{"Line":2}},{"line":190,"address":[],"length":0,"stats":{"Line":2}},{"line":191,"address":[],"length":0,"stats":{"Line":1}},{"line":192,"address":[],"length":0,"stats":{"Line":3}},{"line":193,"address":[],"length":0,"stats":{"Line":1}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":3}},{"line":210,"address":[],"length":0,"stats":{"Line":4}},{"line":213,"address":[],"length":0,"stats":{"Line":10}},{"line":214,"address":[],"length":0,"stats":{"Line":10}},{"line":216,"address":[],"length":0,"stats":{"Line":10}},{"line":217,"address":[],"length":0,"stats":{"Line":5}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}}],"covered":50,"coverable":92},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","commands","mod.rs"],"content":"pub mod cli;\n\npub use cli::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","config","mod.rs"],"content":"pub mod settings;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","config","settings.rs"],"content":"use anyhow::Result;\nuse serde::{Deserialize, Serialize};\nuse std::fs;\nuse std::path::PathBuf;\n\n#[derive(Serialize, Deserialize, Debug, Clone)]\npub struct UserSettings {\n    pub theme_name: String,\n}\n\nimpl Default for UserSettings {\n    fn default() -\u003e Self {\n        Self {\n            theme_name: \"Kanagawa\".to_string(),\n        }\n    }\n}\n\nfn get_config_path() -\u003e Result\u003cPathBuf\u003e {\n    let config_dir =\n        dirs::config_dir().ok_or_else(|| anyhow::anyhow!(\"Could not find config directory\"))?;\n    let app_config_dir = config_dir.join(\"bossy-rust\");\n    fs::create_dir_all(\u0026app_config_dir)?;\n    Ok(app_config_dir.join(\"settings.toml\"))\n}\n\npub fn save_settings(settings: \u0026UserSettings) -\u003e Result\u003c()\u003e {\n    let path = get_config_path()?;\n    let toml_string = toml::to_string(settings)?;\n    fs::write(path, toml_string)?;\n    Ok(())\n}\n\npub fn load_settings() -\u003e Result\u003cUserSettings\u003e {\n    let path = get_config_path()?;\n    if !path.exists() {\n        return Ok(UserSettings::default());\n    }\n    let toml_string = fs::read_to_string(path)?;\n    let settings: UserSettings = toml::from_str(\u0026toml_string)?;\n    Ok(settings)\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":26}},{"line":14,"address":[],"length":0,"stats":{"Line":26}},{"line":19,"address":[],"length":0,"stats":{"Line":38}},{"line":20,"address":[],"length":0,"stats":{"Line":38}},{"line":21,"address":[],"length":0,"stats":{"Line":76}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":38}},{"line":27,"address":[],"length":0,"stats":{"Line":1}},{"line":28,"address":[],"length":0,"stats":{"Line":2}},{"line":29,"address":[],"length":0,"stats":{"Line":1}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":34,"address":[],"length":0,"stats":{"Line":37}},{"line":35,"address":[],"length":0,"stats":{"Line":74}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":111}},{"line":40,"address":[],"length":0,"stats":{"Line":37}}],"covered":14,"coverable":17},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","lib.rs"],"content":"pub mod commands;\npub mod config;\npub mod network;\npub mod process;\npub mod tui;\n\npub mod testing;\n\n// Re-export key types from modules for easier testing access\npub use tui::*;\npub use process::*;\npub use network::*;","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","main.rs"],"content":"mod commands;\nmod config;\nmod network;\nmod process;\nmod tui;\n\n#[cfg(test)]\nmod testing;\n\nuse anyhow::Result;\nuse clap::{Parser, Subcommand};\nuse crossterm::{\n    execute,\n    terminal::{disable_raw_mode, enable_raw_mode, EnterAlternateScreen, LeaveAlternateScreen},\n};\nuse ratatui::{backend::CrosstermBackend, Terminal};\nuse std::{io, time::Duration};\nuse tokio::time::sleep;\nuse tui::{AppEvent, AppState, EventHandler};\n\n#[derive(Parser)]\n#[command(name = \"bossy-rust\")]\n#[command(about = \"A lightweight Terminal User Interface (TUI) process manager for macOS\")]\n#[command(version = \"0.1.0\")]\n#[command(author = \"Pedro Nieto\")]\nstruct Cli {\n    #[command(subcommand)]\n    command: Option\u003cCommands\u003e,\n}\n\n#[derive(Subcommand)]\nenum Commands {\n    /// Show what's using a specific port\n    Port { port: u16 },\n    /// Kill process using a specific port\n    KillPort { port: u16 },\n    /// Show all ports with optional filtering\n    Ports {\n        /// Show only common development ports\n        #[arg(long)]\n        common: bool,\n        /// Show only listening ports\n        #[arg(long)]\n        listening: bool,\n    },\n    /// Kill processes by name\n    KillProcess {\n        name: String,\n        /// Force kill (SIGKILL instead of SIGTERM)\n        #[arg(short, long)]\n        force: bool,\n    },\n    /// Show processes with optional filtering\n    Ps {\n        /// Show top CPU consumers\n        #[arg(long)]\n        top_cpu: bool,\n        /// Show top memory consumers\n        #[arg(long)]\n        top_memory: bool,\n        /// Limit number of results\n        #[arg(short, long, default_value = \"10\")]\n        limit: usize,\n    },\n    /// Cleanup common development processes\n    Cleanup {\n        /// Target development processes\n        #[arg(long)]\n        dev: bool,\n    },\n    /// Find available port in range\n    FindPort {\n        /// Start port (default: 3000)\n        #[arg(default_value = \"3000\")]\n        start: u16,\n        /// End port (default: start + 100)\n        end: Option\u003cu16\u003e,\n    },\n}\n\n#[tokio::main]\nasync fn main() -\u003e Result\u003c()\u003e {\n    let cli = Cli::parse();\n\n    match cli.command {\n        Some(command) =\u003e {\n            // Handle CLI commands\n            handle_cli_command(command).await?;\n        }\n        None =\u003e {\n            // Launch interactive TUI\n            run_tui().await?;\n        }\n    }\n\n    Ok(())\n}\n\nasync fn handle_cli_command(command: Commands) -\u003e Result\u003c()\u003e {\n    use commands::CliHandler;\n\n    match command {\n        Commands::Port { port } =\u003e {\n            CliHandler::show_port_info(port).await?;\n        }\n        Commands::KillPort { port } =\u003e {\n            CliHandler::kill_port(port).await?;\n        }\n        Commands::Ports { common, listening } =\u003e {\n            CliHandler::show_ports(common, listening).await?;\n        }\n        Commands::KillProcess { name, force } =\u003e {\n            CliHandler::kill_process(\u0026name, force).await?;\n        }\n        Commands::Ps {\n            top_cpu,\n            top_memory,\n            limit,\n        } =\u003e {\n            CliHandler::show_processes(top_cpu, top_memory, limit).await?;\n        }\n        Commands::Cleanup { dev } =\u003e {\n            CliHandler::cleanup_processes(dev).await?;\n        }\n        Commands::FindPort { start, end } =\u003e {\n            let end = end.unwrap_or(start + 100);\n            CliHandler::find_available_port(start, end).await?;\n        }\n    }\n\n    Ok(())\n}\n\nasync fn run_tui() -\u003e Result\u003c()\u003e {\n    // Setup terminal\n    enable_raw_mode()?;\n    let mut stdout = io::stdout();\n    execute!(stdout, EnterAlternateScreen)?;\n    let backend = CrosstermBackend::new(stdout);\n    let mut terminal = Terminal::new(backend)?;\n\n    // Create app state\n    let mut app = AppState::new()?;\n    let event_handler = EventHandler::default();\n\n    // Main event loop\n    loop {\n        // Render UI\n        terminal.draw(|f| {\n            tui::dashboard::render_dashboard(f, \u0026mut app);\n        })?;\n\n        // Handle events\n        match event_handler.next().await? {\n            AppEvent::Key(key_event) =\u003e {\n                app.handle_key_event(key_event).await?;\n            }\n            AppEvent::Resize(width, height) =\u003e {\n                terminal.resize(ratatui::layout::Rect::new(0, 0, width, height))?;\n            }\n            AppEvent::Refresh =\u003e {\n                if app.should_refresh() {\n                    app.refresh_data()?;\n                }\n            }\n        }\n\n        // Check if we should quit\n        if app.should_quit {\n            break;\n        }\n\n        // Small delay to prevent excessive CPU usage\n        sleep(Duration::from_millis(16)).await; // ~60fps\n    }\n\n    // Cleanup terminal\n    disable_raw_mode()?;\n    execute!(terminal.backend_mut(), LeaveAlternateScreen)?;\n    terminal.show_cursor()?;\n\n    Ok(())\n}\n","traces":[{"line":82,"address":[],"length":0,"stats":{"Line":70}},{"line":83,"address":[],"length":0,"stats":{"Line":70}},{"line":85,"address":[],"length":0,"stats":{"Line":70}},{"line":86,"address":[],"length":0,"stats":{"Line":54}},{"line":88,"address":[],"length":0,"stats":{"Line":73}},{"line":90,"address":[],"length":0,"stats":{"Line":35}},{"line":92,"address":[],"length":0,"stats":{"Line":51}},{"line":96,"address":[],"length":0,"stats":{"Line":54}},{"line":99,"address":[],"length":0,"stats":{"Line":38}},{"line":102,"address":[],"length":0,"stats":{"Line":19}},{"line":103,"address":[],"length":0,"stats":{"Line":3}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":8}},{"line":110,"address":[],"length":0,"stats":{"Line":12}},{"line":112,"address":[],"length":0,"stats":{"Line":2}},{"line":113,"address":[],"length":0,"stats":{"Line":3}},{"line":116,"address":[],"length":0,"stats":{"Line":6}},{"line":117,"address":[],"length":0,"stats":{"Line":6}},{"line":118,"address":[],"length":0,"stats":{"Line":6}},{"line":120,"address":[],"length":0,"stats":{"Line":24}},{"line":122,"address":[],"length":0,"stats":{"Line":2}},{"line":123,"address":[],"length":0,"stats":{"Line":4}},{"line":125,"address":[],"length":0,"stats":{"Line":6}},{"line":126,"address":[],"length":0,"stats":{"Line":12}},{"line":127,"address":[],"length":0,"stats":{"Line":9}},{"line":131,"address":[],"length":0,"stats":{"Line":19}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}}],"covered":25,"coverable":52},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","connections.rs"],"content":"use crate::network::Protocol;\nuse std::net::SocketAddr;\n\n#[derive(Debug, Clone)]\npub struct ConnectionInfo {\n    pub protocol: Protocol,\n    pub local_address: SocketAddr,\n    pub remote_address: SocketAddr,\n    pub pid: Option\u003cu32\u003e,\n    pub process_name: Option\u003cString\u003e,\n}\n\nimpl ConnectionInfo {\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        if self.local_address.to_string().contains(\u0026query)\n            || self.remote_address.to_string().contains(\u0026query)\n        {\n            return true;\n        }\n\n        if let Some(process_name) = \u0026self.process_name {\n            if process_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        if let Some(pid) = self.pid {\n            if pid.to_string().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        false\n    }\n}\n","traces":[{"line":14,"address":[],"length":0,"stats":{"Line":12}},{"line":15,"address":[],"length":0,"stats":{"Line":36}},{"line":17,"address":[],"length":0,"stats":{"Line":24}},{"line":18,"address":[],"length":0,"stats":{"Line":12}},{"line":20,"address":[],"length":0,"stats":{"Line":2}},{"line":23,"address":[],"length":0,"stats":{"Line":10}},{"line":25,"address":[],"length":0,"stats":{"Line":2}},{"line":29,"address":[],"length":0,"stats":{"Line":16}},{"line":31,"address":[],"length":0,"stats":{"Line":2}},{"line":35,"address":[],"length":0,"stats":{"Line":6}}],"covered":10,"coverable":10},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","mod.rs"],"content":"pub mod connections;\npub mod ports;\npub mod utils;\n\npub use connections::*;\npub use ports::*;\npub use utils::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","ports.rs"],"content":"use crate::network::connections::ConnectionInfo;\nuse anyhow::{anyhow, Result};\nuse regex::Regex;\nuse std::collections::HashMap;\nuse std::net::{IpAddr, SocketAddr};\nuse std::process::Command;\n\n#[derive(Debug, Clone)]\npub struct PortInfo {\n    pub port: u16,\n    pub protocol: Protocol,\n    pub pid: Option\u003cu32\u003e,\n    pub process_name: Option\u003cString\u003e,\n    pub local_address: SocketAddr,\n    pub remote_address: Option\u003cSocketAddr\u003e,\n    pub state: ConnectionState,\n    pub service_name: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum Protocol {\n    Tcp,\n    Udp,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum ConnectionState {\n    Listen,\n    Established,\n    TimeWait,\n    CloseWait,\n    FinWait1,\n    FinWait2,\n    SynSent,\n    SynReceived,\n    Closed,\n    Unknown,\n}\n\nimpl From\u003c\u0026str\u003e for ConnectionState {\n    fn from(state: \u0026str) -\u003e Self {\n        match state.to_uppercase().as_str() {\n            \"LISTEN\" =\u003e ConnectionState::Listen,\n            \"ESTABLISHED\" =\u003e ConnectionState::Established,\n            \"TIME_WAIT\" =\u003e ConnectionState::TimeWait,\n            \"CLOSE_WAIT\" =\u003e ConnectionState::CloseWait,\n            \"FIN_WAIT1\" =\u003e ConnectionState::FinWait1,\n            \"FIN_WAIT2\" =\u003e ConnectionState::FinWait2,\n            \"SYN_SENT\" =\u003e ConnectionState::SynSent,\n            \"SYN_RCVD\" =\u003e ConnectionState::SynReceived,\n            \"CLOSED\" =\u003e ConnectionState::Closed,\n            _ =\u003e ConnectionState::Unknown,\n        }\n    }\n}\n\nimpl PortInfo {\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        // Handle port search patterns\n        if let Some(port_query) = query.strip_prefix(':') {\n            // Range search: :5432-5434\n            if port_query.contains('-') {\n                if let Some((start, end)) = port_query.split_once('-') {\n                    if let (Ok(start_port), Ok(end_port)) =\n                        (start.parse::\u003cu16\u003e(), end.parse::\u003cu16\u003e())\n                    {\n                        return self.port \u003e= start_port \u0026\u0026 self.port \u003c= end_port;\n                    }\n                }\n            } else {\n                // Exact port search: :3000\n                if let Ok(search_port) = port_query.parse::\u003cu16\u003e() {\n                    return self.port == search_port;\n                }\n            }\n        }\n\n        // Process name search\n        if let Some(ref process_name) = self.process_name {\n            if process_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        // Service name search\n        if let Some(ref service_name) = self.service_name {\n            if service_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        // Port number search\n        self.port.to_string().contains(\u0026query)\n    }\n\n    pub fn is_development_port(\u0026self) -\u003e bool {\n        matches!(self.port,\n            3000 | 3001 | 3002 | // React, Next.js\n            5000 | 5001 | 5002 | // Flask, various dev servers\n            8000 | 8080 | 8888 | // Django, generic HTTP\n            4200 | // Angular\n            5432 | // PostgreSQL\n            3306 | // MySQL\n            6379 | // Redis\n            27017 | // MongoDB\n            9200 | 9300 | // Elasticsearch\n            5672 | // RabbitMQ\n            1433 | // SQL Server\n            8081..=8090 | // Common dev ports\n            9000..=9010   // Common dev ports\n        )\n    }\n\n    pub fn get_service_suggestion(\u0026self) -\u003e Option\u003cString\u003e {\n        match self.port {\n            80 =\u003e Some(\"HTTP\".to_string()),\n            443 =\u003e Some(\"HTTPS\".to_string()),\n            22 =\u003e Some(\"SSH\".to_string()),\n            21 =\u003e Some(\"FTP\".to_string()),\n            25 =\u003e Some(\"SMTP\".to_string()),\n            53 =\u003e Some(\"DNS\".to_string()),\n            3000 =\u003e Some(\"React/Next.js Dev Server\".to_string()),\n            3001 =\u003e Some(\"Create React App\".to_string()),\n            4200 =\u003e Some(\"Angular Dev Server\".to_string()),\n            5000 =\u003e Some(\"Flask Dev Server\".to_string()),\n            8000 =\u003e Some(\"Django Dev Server\".to_string()),\n            8080 =\u003e Some(\"HTTP Alternate/Tomcat\".to_string()),\n            5432 =\u003e Some(\"PostgreSQL\".to_string()),\n            3306 =\u003e Some(\"MySQL\".to_string()),\n            6379 =\u003e Some(\"Redis\".to_string()),\n            27017 =\u003e Some(\"MongoDB\".to_string()),\n            9200 =\u003e Some(\"Elasticsearch\".to_string()),\n            5672 =\u003e Some(\"RabbitMQ\".to_string()),\n            _ =\u003e None,\n        }\n    }\n}\n\npub struct PortManager;\n\nimpl PortManager {\n    pub fn get_all_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let mut ports = Vec::new();\n\n        // Get TCP connections\n        ports.extend(Self::get_tcp_connections()?);\n\n        // Get UDP connections\n        ports.extend(Self::get_udp_connections()?);\n\n        Ok(ports)\n    }\n\n    pub fn get_listening_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.state == ConnectionState::Listen)\n            .collect())\n    }\n\n    pub fn get_port_by_number(port_number: u16) -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.port == port_number)\n            .collect())\n    }\n\n    pub fn get_development_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.is_development_port())\n            .collect())\n    }\n\n    pub fn get_active_connections() -\u003e Result\u003cVec\u003cConnectionInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| {\n                port.state == ConnectionState::Established \u0026\u0026 port.remote_address.is_some()\n            })\n            .map(|port| ConnectionInfo {\n                protocol: port.protocol,\n                local_address: port.local_address,\n                remote_address: port.remote_address.unwrap(), // Safe due to filter\n                pid: port.pid,\n                process_name: port.process_name,\n            })\n            .collect())\n    }\n\n    fn get_tcp_connections() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let output = Command::new(\"netstat\")\n            .args([\"-an\", \"-p\", \"tcp\"])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"Failed to run netstat for TCP connections\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        Self::parse_netstat_output(\u0026stdout, Protocol::Tcp)\n    }\n\n    fn get_udp_connections() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let output = Command::new(\"netstat\")\n            .args([\"-an\", \"-p\", \"udp\"])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"Failed to run netstat for UDP connections\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        Self::parse_netstat_output(\u0026stdout, Protocol::Udp)\n    }\n\n    fn parse_netstat_output(output: \u0026str, protocol: Protocol) -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let mut ports = Vec::new();\n        let pid_map = Self::get_pid_port_mapping()?;\n\n        for line in output.lines() {\n            if let Some(port_info) = Self::parse_netstat_line(line, \u0026protocol, \u0026pid_map) {\n                ports.push(port_info);\n            }\n        }\n\n        Ok(ports)\n    }\n\n    fn parse_netstat_line(\n        line: \u0026str,\n        protocol: \u0026Protocol,\n        pid_map: \u0026HashMap\u003cu16, (u32, String)\u003e,\n    ) -\u003e Option\u003cPortInfo\u003e {\n        let parts: Vec\u003c\u0026str\u003e = line.split_whitespace().collect();\n\n        if parts.len() \u003c 4 {\n            return None;\n        }\n\n        // Skip header lines\n        if parts[0] == \"Active\" || parts[0] == \"Proto\" {\n            return None;\n        }\n\n        let local_addr_str = parts.get(3)?;\n        let state_str = if protocol == \u0026Protocol::Tcp {\n            parts.get(5).unwrap_or(\u0026\"UNKNOWN\")\n        } else {\n            \"LISTEN\" // UDP doesn't have states in the same way\n        };\n\n        let local_addr = Self::parse_socket_addr(local_addr_str)?;\n        let port = local_addr.port();\n\n        let (pid, process_name) = pid_map\n            .get(\u0026port)\n            .map(|(pid, name)| (Some(*pid), Some(name.clone())))\n            .unwrap_or((None, None));\n\n        let remote_addr = if parts.len() \u003e 4 \u0026\u0026 parts[4] != \"*.*\" {\n            Self::parse_socket_addr(parts[4])\n        } else {\n            None\n        };\n\n        Some(PortInfo {\n            port,\n            protocol: protocol.clone(),\n            pid,\n            process_name,\n            local_address: local_addr,\n            remote_address: remote_addr,\n            state: ConnectionState::from(state_str),\n            service_name: None, // We'll populate this separately if needed\n        })\n    }\n\n    fn parse_socket_addr(addr_str: \u0026str) -\u003e Option\u003cSocketAddr\u003e {\n        // Handle different formats: *.port, ip.port, [ipv6]:port\n        if addr_str.starts_with('*') {\n            // *:port or *.port format\n            let port_str = addr_str.split(['.', ':']).next_back()?;\n            let port: u16 = port_str.parse().ok()?;\n            return Some(SocketAddr::new(IpAddr::from([0, 0, 0, 0]), port));\n        }\n\n        // Try parsing as regular socket address\n        if let Ok(addr) = addr_str.parse::\u003cSocketAddr\u003e() {\n            return Some(addr);\n        }\n\n        // Handle IPv4 dot notation: 127.0.0.1.8080\n        if let Some(last_dot) = addr_str.rfind('.') {\n            let ip_part = \u0026addr_str[..last_dot];\n            let port_part = \u0026addr_str[last_dot + 1..];\n\n            if let (Ok(ip), Ok(port)) = (ip_part.parse::\u003cIpAddr\u003e(), port_part.parse::\u003cu16\u003e()) {\n                return Some(SocketAddr::new(ip, port));\n            }\n        }\n\n        None\n    }\n\n    fn get_pid_port_mapping() -\u003e Result\u003cHashMap\u003cu16, (u32, String)\u003e\u003e {\n        let output = Command::new(\"lsof\").args([\"-i\", \"-P\", \"-n\"]).output()?;\n\n        if !output.status.success() {\n            return Ok(HashMap::new()); // Return empty map if lsof fails\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let mut mapping = HashMap::new();\n\n        let re = Regex::new(r\"(\\S+)\\s+(\\d+)\\s+\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+.*?:(\\d+)\")?;\n\n        for line in stdout.lines() {\n            if let Some(captures) = re.captures(line) {\n                if let (Some(process_name), Some(pid_str), Some(port_str)) =\n                    (captures.get(1), captures.get(2), captures.get(3))\n                {\n                    if let (Ok(pid), Ok(port)) = (\n                        pid_str.as_str().parse::\u003cu32\u003e(),\n                        port_str.as_str().parse::\u003cu16\u003e(),\n                    ) {\n                        mapping.insert(port, (pid, process_name.as_str().to_string()));\n                    }\n                }\n            }\n        }\n\n        Ok(mapping)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::network::NetworkUtils;\n    use std::net::{IpAddr, Ipv4Addr};\n\n    fn create_test_port_info() -\u003e PortInfo {\n        PortInfo {\n            port: 3000,\n            protocol: Protocol::Tcp,\n            pid: Some(1234),\n            process_name: Some(\"node\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(127, 0, 0, 1)), 3000),\n            remote_address: None,\n            state: ConnectionState::Listen,\n            service_name: None,\n        }\n    }\n\n    #[test]\n    fn test_port_info_creation() {\n        let port_info = create_test_port_info();\n        assert_eq!(port_info.port, 3000);\n        assert_eq!(port_info.protocol, Protocol::Tcp);\n        assert_eq!(port_info.state, ConnectionState::Listen);\n        assert_eq!(port_info.pid, Some(1234));\n        assert_eq!(port_info.process_name, Some(\"node\".to_string()));\n    }\n\n    #[test]\n    fn test_port_search_patterns() {\n        let port_info = create_test_port_info();\n\n        // Test port number search\n        assert!(port_info.matches_search(\":3000\"));\n        assert!(!port_info.matches_search(\":8080\"));\n\n        // Test process name search\n        assert!(port_info.matches_search(\"node\"));\n        assert!(port_info.matches_search(\"NODE\")); // case insensitive\n        assert!(!port_info.matches_search(\"python\"));\n\n        // Test general port search\n        assert!(port_info.matches_search(\"3000\"));\n    }\n\n    #[test]\n    fn test_port_range_search() {\n        let port_info = create_test_port_info();\n\n        // Test port range search\n        assert!(port_info.matches_search(\":2999-3001\"));\n        assert!(port_info.matches_search(\":3000-3000\"));\n        assert!(!port_info.matches_search(\":3001-3002\"));\n    }\n\n    #[test]\n    fn test_development_port_detection() {\n        let mut port_info = create_test_port_info();\n\n        // Test common development ports\n        port_info.port = 3000;\n        assert!(port_info.is_development_port());\n\n        port_info.port = 4200;\n        assert!(port_info.is_development_port());\n\n        port_info.port = 5432;\n        assert!(port_info.is_development_port());\n\n        // Test non-development port\n        port_info.port = 443;\n        assert!(!port_info.is_development_port());\n    }\n\n    #[test]\n    fn test_service_suggestions() {\n        let mut port_info = create_test_port_info();\n\n        // Test well-known port suggestions\n        port_info.port = 80;\n        assert_eq!(port_info.get_service_suggestion(), Some(\"HTTP\".to_string()));\n\n        port_info.port = 443;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"HTTPS\".to_string())\n        );\n\n        port_info.port = 3000;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"React/Next.js Dev Server\".to_string())\n        );\n\n        port_info.port = 5432;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"PostgreSQL\".to_string())\n        );\n\n        // Test unknown port\n        port_info.port = 12345;\n        assert_eq!(port_info.get_service_suggestion(), None);\n    }\n\n    #[test]\n    fn test_protocol_matching() {\n        let mut port_info = create_test_port_info();\n\n        port_info.protocol = Protocol::Tcp;\n        assert_eq!(port_info.protocol, Protocol::Tcp);\n\n        port_info.protocol = Protocol::Udp;\n        assert_eq!(port_info.protocol, Protocol::Udp);\n\n        assert_ne!(Protocol::Tcp, Protocol::Udp);\n    }\n\n    #[test]\n    fn test_connection_state_parsing() {\n        assert_eq!(ConnectionState::from(\"LISTEN\"), ConnectionState::Listen);\n        assert_eq!(\n            ConnectionState::from(\"ESTABLISHED\"),\n            ConnectionState::Established\n        );\n        assert_eq!(\n            ConnectionState::from(\"TIME_WAIT\"),\n            ConnectionState::TimeWait\n        );\n        assert_eq!(\n            ConnectionState::from(\"UNKNOWN_STATE\"),\n            ConnectionState::Unknown\n        );\n    }\n\n    #[test]\n    fn test_socket_addr_parsing() {\n        // Test IPv4 address parsing\n        let addr = PortManager::parse_socket_addr(\"127.0.0.1.3000\");\n        assert!(addr.is_some());\n        let addr = addr.unwrap();\n        assert_eq!(addr.port(), 3000);\n\n        // Test wildcard address parsing\n        let addr = PortManager::parse_socket_addr(\"*.3000\");\n        assert!(addr.is_some());\n        let addr = addr.unwrap();\n        assert_eq!(addr.port(), 3000);\n        assert!(addr.ip().is_unspecified());\n\n        // Test invalid address\n        let addr = PortManager::parse_socket_addr(\"invalid\");\n        assert!(addr.is_none());\n    }\n\n    #[test]\n    fn test_common_ports_mapping() {\n        let common_ports = NetworkUtils::get_well_known_ports();\n\n        assert_eq!(common_ports.get(\u002680), Some(\u0026\"HTTP\"));\n        assert_eq!(common_ports.get(\u0026443), Some(\u0026\"HTTPS\"));\n        assert_eq!(common_ports.get(\u00263000), Some(\u0026\"React/Next.js Dev\"));\n        assert_eq!(common_ports.get(\u00265432), Some(\u0026\"PostgreSQL\"));\n        assert_eq!(common_ports.get(\u002665534), None);\n    }\n\n    #[test]\n    fn test_invalid_search_patterns() {\n        let port_info = create_test_port_info();\n\n        // Invalid port range format\n        assert!(!port_info.matches_search(\":abc-def\"));\n        assert!(!port_info.matches_search(\":3000-\"));\n        assert!(!port_info.matches_search(\":-3000\"));\n\n        // Empty searches should not match port patterns\n        assert!(!port_info.matches_search(\":\"));\n        // Empty search should match (falls through to name search which contains \"\")\n        // assert!(!port_info.matches_search(\"\"));  // This actually matches everything\n    }\n\n    #[test]\n    fn test_port_manager_error_handling() {\n        // These tests would ideally mock the system commands,\n        // but for now we'll just test that the functions don't panic\n\n        // Test with invalid port numbers in edge cases\n        let result = PortManager::get_port_by_number(0);\n        assert!(result.is_ok());\n\n        let result = PortManager::get_port_by_number(65535);\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_port_filtering() {\n        // Create test data\n        let listening_port = PortInfo {\n            port: 8080,\n            protocol: Protocol::Tcp,\n            pid: Some(5678),\n            process_name: Some(\"python\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(0, 0, 0, 0)), 8080),\n            remote_address: None,\n            state: ConnectionState::Listen,\n            service_name: None,\n        };\n\n        let established_port = PortInfo {\n            port: 443,\n            protocol: Protocol::Tcp,\n            pid: Some(9012),\n            process_name: Some(\"chrome\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(192, 168, 1, 100)), 443),\n            remote_address: Some(SocketAddr::new(\n                IpAddr::V4(Ipv4Addr::new(172, 217, 14, 206)),\n                443,\n            )),\n            state: ConnectionState::Established,\n            service_name: None,\n        };\n\n        // Test state filtering\n        assert_eq!(listening_port.state, ConnectionState::Listen);\n        assert_eq!(established_port.state, ConnectionState::Established);\n\n        // Test development port classification\n        assert!(listening_port.is_development_port()); // 8080 is development\n        assert!(!established_port.is_development_port()); // 443 is not development\n    }\n\n    #[test]\n    fn test_get_active_connections() {\n        // This test is conceptual because we can't easily mock `get_all_ports`.\n        // We trust that if `get_all_ports` works, this filtering function will also work.\n        // A more advanced test setup would involve mocking the command execution.\n        let connections = PortManager::get_active_connections();\n        assert!(connections.is_ok());\n    }\n}\n","traces":[{"line":41,"address":[],"length":0,"stats":{"Line":8034}},{"line":42,"address":[],"length":0,"stats":{"Line":8034}},{"line":43,"address":[],"length":0,"stats":{"Line":11680}},{"line":44,"address":[],"length":0,"stats":{"Line":6483}},{"line":45,"address":[],"length":0,"stats":{"Line":3492}},{"line":46,"address":[],"length":0,"stats":{"Line":1276}},{"line":47,"address":[],"length":0,"stats":{"Line":912}},{"line":48,"address":[],"length":0,"stats":{"Line":912}},{"line":49,"address":[],"length":0,"stats":{"Line":912}},{"line":50,"address":[],"length":0,"stats":{"Line":912}},{"line":51,"address":[],"length":0,"stats":{"Line":1822}},{"line":52,"address":[],"length":0,"stats":{"Line":2}},{"line":58,"address":[],"length":0,"stats":{"Line":26}},{"line":59,"address":[],"length":0,"stats":{"Line":78}},{"line":62,"address":[],"length":0,"stats":{"Line":44}},{"line":65,"address":[],"length":0,"stats":{"Line":24}},{"line":66,"address":[],"length":0,"stats":{"Line":6}},{"line":69,"address":[],"length":0,"stats":{"Line":4}},{"line":74,"address":[],"length":0,"stats":{"Line":10}},{"line":81,"address":[],"length":0,"stats":{"Line":32}},{"line":83,"address":[],"length":0,"stats":{"Line":4}},{"line":88,"address":[],"length":0,"stats":{"Line":12}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":12}},{"line":98,"address":[],"length":0,"stats":{"Line":10613}},{"line":99,"address":[],"length":0,"stats":{"Line":21209}},{"line":116,"address":[],"length":0,"stats":{"Line":363}},{"line":117,"address":[],"length":0,"stats":{"Line":363}},{"line":118,"address":[],"length":0,"stats":{"Line":2}},{"line":119,"address":[],"length":0,"stats":{"Line":2}},{"line":120,"address":[],"length":0,"stats":{"Line":1}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":1}},{"line":124,"address":[],"length":0,"stats":{"Line":3}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":1}},{"line":130,"address":[],"length":0,"stats":{"Line":3}},{"line":131,"address":[],"length":0,"stats":{"Line":1}},{"line":132,"address":[],"length":0,"stats":{"Line":1}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":348}},{"line":144,"address":[],"length":0,"stats":{"Line":91}},{"line":145,"address":[],"length":0,"stats":{"Line":182}},{"line":148,"address":[],"length":0,"stats":{"Line":273}},{"line":151,"address":[],"length":0,"stats":{"Line":91}},{"line":156,"address":[],"length":0,"stats":{"Line":2}},{"line":157,"address":[],"length":0,"stats":{"Line":2}},{"line":158,"address":[],"length":0,"stats":{"Line":2}},{"line":159,"address":[],"length":0,"stats":{"Line":360}},{"line":163,"address":[],"length":0,"stats":{"Line":7}},{"line":164,"address":[],"length":0,"stats":{"Line":7}},{"line":165,"address":[],"length":0,"stats":{"Line":7}},{"line":166,"address":[],"length":0,"stats":{"Line":1244}},{"line":170,"address":[],"length":0,"stats":{"Line":1}},{"line":171,"address":[],"length":0,"stats":{"Line":1}},{"line":172,"address":[],"length":0,"stats":{"Line":1}},{"line":173,"address":[],"length":0,"stats":{"Line":180}},{"line":177,"address":[],"length":0,"stats":{"Line":40}},{"line":178,"address":[],"length":0,"stats":{"Line":40}},{"line":179,"address":[],"length":0,"stats":{"Line":40}},{"line":180,"address":[],"length":0,"stats":{"Line":3520}},{"line":181,"address":[],"length":0,"stats":{"Line":5360}},{"line":184,"address":[],"length":0,"stats":{"Line":920}},{"line":185,"address":[],"length":0,"stats":{"Line":920}},{"line":186,"address":[],"length":0,"stats":{"Line":1840}},{"line":187,"address":[],"length":0,"stats":{"Line":920}},{"line":188,"address":[],"length":0,"stats":{"Line":920}},{"line":193,"address":[],"length":0,"stats":{"Line":91}},{"line":194,"address":[],"length":0,"stats":{"Line":273}},{"line":195,"address":[],"length":0,"stats":{"Line":182}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":273}},{"line":203,"address":[],"length":0,"stats":{"Line":273}},{"line":206,"address":[],"length":0,"stats":{"Line":91}},{"line":207,"address":[],"length":0,"stats":{"Line":273}},{"line":208,"address":[],"length":0,"stats":{"Line":182}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":273}},{"line":216,"address":[],"length":0,"stats":{"Line":273}},{"line":219,"address":[],"length":0,"stats":{"Line":182}},{"line":220,"address":[],"length":0,"stats":{"Line":364}},{"line":221,"address":[],"length":0,"stats":{"Line":364}},{"line":223,"address":[],"length":0,"stats":{"Line":15145}},{"line":224,"address":[],"length":0,"stats":{"Line":8026}},{"line":232,"address":[],"length":0,"stats":{"Line":15145}},{"line":237,"address":[],"length":0,"stats":{"Line":75725}},{"line":239,"address":[],"length":0,"stats":{"Line":15145}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":14963}},{"line":245,"address":[],"length":0,"stats":{"Line":364}},{"line":248,"address":[],"length":0,"stats":{"Line":14781}},{"line":250,"address":[],"length":0,"stats":{"Line":21182}},{"line":252,"address":[],"length":0,"stats":{"Line":4190}},{"line":255,"address":[],"length":0,"stats":{"Line":14781}},{"line":260,"address":[],"length":0,"stats":{"Line":7826}},{"line":263,"address":[],"length":0,"stats":{"Line":8026}},{"line":264,"address":[],"length":0,"stats":{"Line":8946}},{"line":266,"address":[],"length":0,"stats":{"Line":3553}},{"line":281,"address":[],"length":0,"stats":{"Line":19260}},{"line":283,"address":[],"length":0,"stats":{"Line":38520}},{"line":285,"address":[],"length":0,"stats":{"Line":16404}},{"line":286,"address":[],"length":0,"stats":{"Line":4101}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":30316}},{"line":300,"address":[],"length":0,"stats":{"Line":10222}},{"line":305,"address":[],"length":0,"stats":{"Line":4937}},{"line":308,"address":[],"length":0,"stats":{"Line":182}},{"line":309,"address":[],"length":0,"stats":{"Line":910}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":546}},{"line":316,"address":[],"length":0,"stats":{"Line":364}},{"line":318,"address":[],"length":0,"stats":{"Line":546}},{"line":320,"address":[],"length":0,"stats":{"Line":14576}},{"line":321,"address":[],"length":0,"stats":{"Line":13666}},{"line":322,"address":[],"length":0,"stats":{"Line":13666}},{"line":325,"address":[],"length":0,"stats":{"Line":13666}}],"covered":107,"coverable":122},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","utils.rs"],"content":"use std::collections::HashMap;\n\npub struct NetworkUtils;\n\nimpl NetworkUtils {\n    pub fn get_well_known_ports() -\u003e HashMap\u003cu16, \u0026'static str\u003e {\n        let mut ports = HashMap::new();\n\n        // System ports (0-1023)\n        ports.insert(21, \"FTP\");\n        ports.insert(22, \"SSH\");\n        ports.insert(23, \"Telnet\");\n        ports.insert(25, \"SMTP\");\n        ports.insert(53, \"DNS\");\n        ports.insert(67, \"DHCP Server\");\n        ports.insert(68, \"DHCP Client\");\n        ports.insert(80, \"HTTP\");\n        ports.insert(110, \"POP3\");\n        ports.insert(143, \"IMAP\");\n        ports.insert(443, \"HTTPS\");\n        ports.insert(993, \"IMAPS\");\n        ports.insert(995, \"POP3S\");\n\n        // Database ports\n        ports.insert(1433, \"SQL Server\");\n        ports.insert(1521, \"Oracle\");\n        ports.insert(3306, \"MySQL\");\n        ports.insert(5432, \"PostgreSQL\");\n        ports.insert(6379, \"Redis\");\n        ports.insert(27017, \"MongoDB\");\n\n        // Web development ports\n        ports.insert(3000, \"React/Next.js Dev\");\n        ports.insert(3001, \"Create React App\");\n        ports.insert(4200, \"Angular Dev\");\n        ports.insert(5000, \"Flask Dev\");\n        ports.insert(8000, \"Django Dev\");\n        ports.insert(8080, \"HTTP Alt/Tomcat\");\n        ports.insert(8443, \"HTTPS Alt\");\n\n        // Message queues\n        ports.insert(5672, \"RabbitMQ\");\n        ports.insert(1883, \"MQTT\");\n        ports.insert(9092, \"Kafka\");\n\n        // Search engines\n        ports.insert(9200, \"Elasticsearch\");\n        ports.insert(8983, \"Solr\");\n\n        // Monitoring \u0026 metrics\n        ports.insert(3001, \"Grafana\");\n        ports.insert(9090, \"Prometheus\");\n        ports.insert(8086, \"InfluxDB\");\n\n        ports\n    }\n\n    pub fn get_development_ports() -\u003e Vec\u003cu16\u003e {\n        vec![\n            3000, 3001, 3002, 3003, 3004, 3005, // React, Next.js variants\n            4200, 4201, 4202, // Angular variants\n            5000, 5001, 5002, // Flask, various dev servers\n            8000, 8001, 8002, // Django variants\n            8080, 8081, 8082, 8083, 8084, 8085, // Generic HTTP variants\n            9000, 9001, 9002, // Various dev tools\n        ]\n    }\n\n    pub fn is_development_port(port: u16) -\u003e bool {\n        Self::get_development_ports().contains(\u0026port)\n    }\n\n    pub fn suggest_alternative_port(port: u16) -\u003e Vec\u003cu16\u003e {\n        match port {\n            3000 =\u003e vec![3001, 3002, 3003, 8000],\n            8000 =\u003e vec![8001, 8080, 3000],\n            8080 =\u003e vec![8081, 8000, 3000],\n            5000 =\u003e vec![5001, 5002, 8000],\n            4200 =\u003e vec![4201, 4202, 3000],\n            _ =\u003e {\n                // Generate alternatives around the requested port\n                let mut alternatives = Vec::new();\n                for i in 1..=5 {\n                    if let Some(new_port) = port.checked_add(i) {\n                        alternatives.push(new_port);\n                    }\n                }\n                alternatives\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_well_known_ports() {\n        let ports = NetworkUtils::get_well_known_ports();\n\n        // Test system ports\n        assert_eq!(ports.get(\u002621), Some(\u0026\"FTP\"));\n        assert_eq!(ports.get(\u002622), Some(\u0026\"SSH\"));\n        assert_eq!(ports.get(\u002680), Some(\u0026\"HTTP\"));\n        assert_eq!(ports.get(\u0026443), Some(\u0026\"HTTPS\"));\n\n        // Test database ports\n        assert_eq!(ports.get(\u00263306), Some(\u0026\"MySQL\"));\n        assert_eq!(ports.get(\u00265432), Some(\u0026\"PostgreSQL\"));\n        assert_eq!(ports.get(\u00266379), Some(\u0026\"Redis\"));\n        assert_eq!(ports.get(\u002627017), Some(\u0026\"MongoDB\"));\n\n        // Test development ports\n        assert_eq!(ports.get(\u00263000), Some(\u0026\"React/Next.js Dev\"));\n        assert_eq!(ports.get(\u00264200), Some(\u0026\"Angular Dev\"));\n        assert_eq!(ports.get(\u00265000), Some(\u0026\"Flask Dev\"));\n\n        // Test non-existent port\n        assert_eq!(ports.get(\u002665534), None);\n    }\n\n    #[test]\n    fn test_development_ports() {\n        let dev_ports = NetworkUtils::get_development_ports();\n\n        // Should contain common dev ports\n        assert!(dev_ports.contains(\u00263000));\n        assert!(dev_ports.contains(\u00263001));\n        assert!(dev_ports.contains(\u00264200));\n        assert!(dev_ports.contains(\u00265000));\n        assert!(dev_ports.contains(\u00268000));\n        assert!(dev_ports.contains(\u00268080));\n\n        // Should not be empty\n        assert!(!dev_ports.is_empty());\n    }\n\n    #[test]\n    fn test_is_development_port() {\n        // Test common development ports\n        assert!(NetworkUtils::is_development_port(3000));\n        assert!(NetworkUtils::is_development_port(3001));\n        assert!(NetworkUtils::is_development_port(4200));\n        assert!(NetworkUtils::is_development_port(5000));\n        assert!(NetworkUtils::is_development_port(8000));\n        assert!(NetworkUtils::is_development_port(8080));\n\n        // Test non-development ports\n        assert!(!NetworkUtils::is_development_port(80));\n        assert!(!NetworkUtils::is_development_port(443));\n        assert!(!NetworkUtils::is_development_port(22));\n        assert!(!NetworkUtils::is_development_port(25));\n    }\n\n    #[test]\n    fn test_suggest_alternative_port() {\n        // Test common development ports\n        let alternatives = NetworkUtils::suggest_alternative_port(3000);\n        assert!(alternatives.contains(\u00263001));\n        assert!(alternatives.contains(\u00263002));\n        assert!(alternatives.contains(\u00268000));\n\n        let alternatives = NetworkUtils::suggest_alternative_port(8000);\n        assert!(alternatives.contains(\u00268001));\n        assert!(alternatives.contains(\u00268080));\n        assert!(alternatives.contains(\u00263000));\n\n        let alternatives = NetworkUtils::suggest_alternative_port(5000);\n        assert!(alternatives.contains(\u00265001));\n        assert!(alternatives.contains(\u00265002));\n        assert!(alternatives.contains(\u00268000));\n\n        // Test uncommon port\n        let alternatives = NetworkUtils::suggest_alternative_port(12345);\n        assert!(alternatives.len() \u003e 0);\n        assert!(alternatives.len() \u003c= 5);\n\n        // All suggestions should be in valid range\n        for port in \u0026alternatives {\n            assert!(*port \u003e 12345);\n            // All u16 values are \u003c= 65535 by definition\n        }\n    }\n\n    #[test]\n    fn test_alternative_port_suggestions_edge_cases() {\n        // Test edge cases for port suggestions\n        let alternatives = NetworkUtils::suggest_alternative_port(65530);\n\n        // Should still provide valid alternatives\n        for _port in \u0026alternatives {\n            // All u16 values are \u003c= 65535 by definition\n        }\n\n        // Should not suggest ports beyond the valid range\n        // All u16 values are \u003c= 65535 by definition\n    }\n}\n","traces":[{"line":6,"address":[],"length":0,"stats":{"Line":4}},{"line":7,"address":[],"length":0,"stats":{"Line":8}},{"line":10,"address":[],"length":0,"stats":{"Line":8}},{"line":11,"address":[],"length":0,"stats":{"Line":12}},{"line":12,"address":[],"length":0,"stats":{"Line":12}},{"line":13,"address":[],"length":0,"stats":{"Line":12}},{"line":14,"address":[],"length":0,"stats":{"Line":12}},{"line":15,"address":[],"length":0,"stats":{"Line":12}},{"line":16,"address":[],"length":0,"stats":{"Line":12}},{"line":17,"address":[],"length":0,"stats":{"Line":12}},{"line":18,"address":[],"length":0,"stats":{"Line":12}},{"line":19,"address":[],"length":0,"stats":{"Line":12}},{"line":20,"address":[],"length":0,"stats":{"Line":12}},{"line":21,"address":[],"length":0,"stats":{"Line":12}},{"line":22,"address":[],"length":0,"stats":{"Line":12}},{"line":25,"address":[],"length":0,"stats":{"Line":12}},{"line":26,"address":[],"length":0,"stats":{"Line":12}},{"line":27,"address":[],"length":0,"stats":{"Line":12}},{"line":28,"address":[],"length":0,"stats":{"Line":12}},{"line":29,"address":[],"length":0,"stats":{"Line":12}},{"line":30,"address":[],"length":0,"stats":{"Line":12}},{"line":33,"address":[],"length":0,"stats":{"Line":12}},{"line":34,"address":[],"length":0,"stats":{"Line":12}},{"line":35,"address":[],"length":0,"stats":{"Line":12}},{"line":36,"address":[],"length":0,"stats":{"Line":12}},{"line":37,"address":[],"length":0,"stats":{"Line":12}},{"line":38,"address":[],"length":0,"stats":{"Line":12}},{"line":39,"address":[],"length":0,"stats":{"Line":12}},{"line":42,"address":[],"length":0,"stats":{"Line":12}},{"line":43,"address":[],"length":0,"stats":{"Line":12}},{"line":44,"address":[],"length":0,"stats":{"Line":12}},{"line":47,"address":[],"length":0,"stats":{"Line":12}},{"line":48,"address":[],"length":0,"stats":{"Line":12}},{"line":51,"address":[],"length":0,"stats":{"Line":12}},{"line":52,"address":[],"length":0,"stats":{"Line":12}},{"line":53,"address":[],"length":0,"stats":{"Line":12}},{"line":55,"address":[],"length":0,"stats":{"Line":4}},{"line":58,"address":[],"length":0,"stats":{"Line":27}},{"line":59,"address":[],"length":0,"stats":{"Line":27}},{"line":69,"address":[],"length":0,"stats":{"Line":25}},{"line":70,"address":[],"length":0,"stats":{"Line":50}},{"line":73,"address":[],"length":0,"stats":{"Line":10}},{"line":74,"address":[],"length":0,"stats":{"Line":10}},{"line":75,"address":[],"length":0,"stats":{"Line":2}},{"line":76,"address":[],"length":0,"stats":{"Line":2}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":2}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":8}},{"line":83,"address":[],"length":0,"stats":{"Line":44}},{"line":84,"address":[],"length":0,"stats":{"Line":20}},{"line":88,"address":[],"length":0,"stats":{"Line":4}}],"covered":50,"coverable":52},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","info.rs"],"content":"use sysinfo::{Pid, Process, System};\n\n#[derive(Debug, Clone)]\npub struct ProcessInfo {\n    pub pid: u32,\n    pub name: String,\n    pub cpu_usage: f32,\n    pub memory: u64,\n    #[allow(dead_code)]\n    pub parent_pid: Option\u003cu32\u003e,\n    pub status: String,\n    #[allow(dead_code)]\n    pub start_time: u64,\n    #[allow(dead_code)]\n    pub user_id: Option\u003cu32\u003e,\n    #[allow(dead_code)]\n    pub executable_path: Option\u003cString\u003e,\n    #[allow(dead_code)]\n    pub command_line: Vec\u003cString\u003e,\n}\n\nimpl ProcessInfo {\n    pub fn from_sysinfo(pid: Pid, process: \u0026Process) -\u003e Self {\n        Self {\n            pid: pid.as_u32(),\n            name: process.name().to_string(),\n            cpu_usage: process.cpu_usage(),\n            memory: process.memory(),\n            parent_pid: process.parent().map(|p| p.as_u32()),\n            status: format!(\"{:?}\", process.status()),\n            start_time: process.start_time(),\n            user_id: process\n                .user_id()\n                .and_then(|u| u.to_string().parse::\u003cu32\u003e().ok()),\n            executable_path: process.exe().and_then(|p| p.to_str().map(String::from)),\n            command_line: process.cmd().to_vec(),\n        }\n    }\n\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        // Handle special search patterns\n        if let Some(pid_query) = query.strip_prefix('#') {\n            // PID search: #1234\n            if let Ok(search_pid) = pid_query.parse::\u003cu32\u003e() {\n                return self.pid == search_pid;\n            }\n        } else if let Some(resource_query) = query.strip_prefix('\u003e') {\n            // Resource usage search: \u003e50% for CPU, \u003e1GB for memory\n            if let Some(cpu_query) = resource_query.strip_suffix('%') {\n                if let Ok(cpu_threshold) = cpu_query.parse::\u003cf32\u003e() {\n                    return self.cpu_usage \u003e cpu_threshold;\n                }\n            } else if let Some(mem_query) = resource_query\n                .strip_suffix(\"gb\")\n                .or_else(|| resource_query.strip_suffix(\"GB\"))\n            {\n                if let Ok(mem_threshold) = mem_query.parse::\u003cf32\u003e() {\n                    let mem_gb = self.memory as f32 / 1024.0 / 1024.0 / 1024.0;\n                    return mem_gb \u003e mem_threshold;\n                }\n            } else if let Some(mem_query) = resource_query\n                .strip_suffix(\"mb\")\n                .or_else(|| resource_query.strip_suffix(\"MB\"))\n            {\n                if let Ok(mem_threshold) = mem_query.parse::\u003cf32\u003e() {\n                    let mem_mb = self.memory as f32 / 1024.0 / 1024.0;\n                    return mem_mb \u003e mem_threshold;\n                }\n            }\n        }\n\n        // Default name-based search\n        self.name.to_lowercase().contains(\u0026query)\n    }\n\n    pub fn format_memory(\u0026self) -\u003e String {\n        let kb = self.memory / 1024;\n        let mb = kb / 1024;\n        let gb = mb / 1024;\n\n        if gb \u003e 0 {\n            format!(\"{:.1}GB\", gb as f64 / 1.0)\n        } else if mb \u003e 0 {\n            format!(\"{mb}MB\")\n        } else {\n            format!(\"{kb}KB\")\n        }\n    }\n}\n\npub struct ProcessManager {\n    system: System,\n}\n\nimpl ProcessManager {\n    pub fn new() -\u003e Self {\n        let mut system = System::new_all();\n        system.refresh_all();\n        Self { system }\n    }\n\n    pub fn refresh(\u0026mut self) {\n        self.system.refresh_all();\n    }\n\n    pub fn get_processes(\u0026self) -\u003e Vec\u003cProcessInfo\u003e {\n        self.system\n            .processes()\n            .iter()\n            .map(|(\u0026pid, process)| ProcessInfo::from_sysinfo(pid, process))\n            .collect()\n    }\n\n    pub fn get_system_cpu_usage(\u0026self) -\u003e f32 {\n        self.system.global_cpu_info().cpu_usage()\n    }\n}\n\nimpl Default for ProcessManager {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    fn create_test_process() -\u003e ProcessInfo {\n        ProcessInfo {\n            pid: 1234,\n            name: \"test_process\".to_string(),\n            cpu_usage: 25.5,\n            memory: 1024 * 1024 * 512, // 512 MB\n            parent_pid: Some(1),\n            status: \"Running\".to_string(),\n            start_time: 1234567890,\n            user_id: Some(1000),\n            executable_path: Some(\"/usr/bin/test_process\".to_string()),\n            command_line: vec![\n                \"test_process\".to_string(),\n                \"--arg1\".to_string(),\n                \"value\".to_string(),\n            ],\n        }\n    }\n\n    #[test]\n    fn test_process_info_creation() {\n        let process = create_test_process();\n        assert_eq!(process.pid, 1234);\n        assert_eq!(process.name, \"test_process\");\n        assert_eq!(process.cpu_usage, 25.5);\n        assert_eq!(process.memory, 1024 * 1024 * 512);\n    }\n\n    #[test]\n    fn test_memory_formatting() {\n        let mut process = create_test_process();\n\n        // Test MB formatting\n        process.memory = 1024 * 1024 * 100; // 100 MB\n        assert_eq!(process.format_memory(), \"100MB\");\n\n        // Test GB formatting\n        process.memory = 1024 * 1024 * 1024 * 2; // 2 GB\n        assert_eq!(process.format_memory(), \"2.0GB\");\n\n        // Test KB formatting\n        process.memory = 1024 * 500; // 500 KB\n        assert_eq!(process.format_memory(), \"500KB\");\n    }\n\n    #[test]\n    fn test_search_by_name() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"test\"));\n        assert!(process.matches_search(\"TEST\")); // case insensitive\n        assert!(process.matches_search(\"process\"));\n        assert!(!process.matches_search(\"notfound\"));\n    }\n\n    #[test]\n    fn test_search_by_pid() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"#1234\"));\n        assert!(!process.matches_search(\"#5678\"));\n    }\n\n    #[test]\n    fn test_search_by_cpu_usage() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"\u003e20%\"));\n        assert!(process.matches_search(\"\u003e25%\"));\n        assert!(!process.matches_search(\"\u003e30%\"));\n    }\n\n    #[test]\n    fn test_search_by_memory_usage() {\n        let process = create_test_process();\n\n        // Test MB search\n        assert!(process.matches_search(\"\u003e400MB\"));\n        assert!(!process.matches_search(\"\u003e600MB\"));\n\n        // Test GB search\n        assert!(!process.matches_search(\"\u003e1GB\")); // 512MB \u003c 1GB\n    }\n\n    #[test]\n    fn test_invalid_search_patterns() {\n        let process = create_test_process();\n\n        // Invalid PID format\n        assert!(!process.matches_search(\"#abc\"));\n\n        // Invalid CPU format\n        assert!(!process.matches_search(\"\u003eabc%\"));\n\n        // Invalid memory format\n        assert!(!process.matches_search(\"\u003eabcMB\"));\n    }\n\n    #[test]\n    fn test_process_manager_creation() {\n        let manager = ProcessManager::new();\n        let processes = manager.get_processes();\n\n        // Should have at least some processes running\n        assert!(!processes.is_empty());\n\n        // All processes should have valid PIDs\n        for process in \u0026processes {\n            assert!(process.pid \u003e 0);\n        }\n    }\n\n    #[test]\n    fn test_process_filtering() {\n        let manager = ProcessManager::new();\n        let all_processes = manager.get_processes();\n\n        // Test that we get some processes\n        assert!(!all_processes.is_empty());\n\n        // Test that basic process info is populated\n        for process in all_processes.iter().take(5) {\n            assert!(process.pid \u003e 0);\n            assert!(!process.name.is_empty());\n        }\n    }\n\n    #[test]\n    fn test_process_tree_structure() {\n        let manager = ProcessManager::new();\n        let processes = manager.get_processes();\n\n        // Test that processes have valid parent relationships\n        for process in processes.iter().take(10) {\n            // PIDs should be positive\n            assert!(process.pid \u003e 0);\n\n            // Parent PIDs, if present, should also be positive\n            if let Some(_parent_pid) = process.parent_pid {\n                // Parent PIDs should be valid\n            }\n        }\n    }\n\n    #[test]\n    fn test_search_functionality() {\n        let manager = ProcessManager::new();\n\n        // Test basic search functionality\n        let all_processes = manager.get_processes();\n\n        // Test that we get some processes and they have searchable info\n        assert!(!all_processes.is_empty());\n\n        // Test search pattern matching with first process\n        if let Some(first_process) = all_processes.first() {\n            // Should match itself by name\n            assert!(first_process.matches_search(\u0026first_process.name.to_lowercase()));\n        }\n    }\n\n    #[test]\n    fn test_process_sorting() {\n        let manager = ProcessManager::new();\n        let mut processes = manager.get_processes();\n\n        // Test CPU sorting manually\n        processes.sort_by(|a, b| b.cpu_usage.partial_cmp(\u0026a.cpu_usage).unwrap());\n        processes.truncate(10);\n\n        for i in 1..processes.len() {\n            assert!(processes[i - 1].cpu_usage \u003e= processes[i].cpu_usage);\n        }\n\n        // Test memory sorting manually\n        let mut processes = manager.get_processes();\n        processes.sort_by(|a, b| b.memory.cmp(\u0026a.memory));\n        processes.truncate(10);\n\n        for i in 1..processes.len() {\n            assert!(processes[i - 1].memory \u003e= processes[i].memory);\n        }\n    }\n}\n","traces":[{"line":23,"address":[],"length":0,"stats":{"Line":43966}},{"line":25,"address":[],"length":0,"stats":{"Line":87932}},{"line":26,"address":[],"length":0,"stats":{"Line":87932}},{"line":27,"address":[],"length":0,"stats":{"Line":87932}},{"line":28,"address":[],"length":0,"stats":{"Line":87932}},{"line":29,"address":[],"length":0,"stats":{"Line":186658}},{"line":30,"address":[],"length":0,"stats":{"Line":175864}},{"line":31,"address":[],"length":0,"stats":{"Line":87932}},{"line":32,"address":[],"length":0,"stats":{"Line":43966}},{"line":35,"address":[],"length":0,"stats":{"Line":263796}},{"line":36,"address":[],"length":0,"stats":{"Line":87932}},{"line":40,"address":[],"length":0,"stats":{"Line":112}},{"line":41,"address":[],"length":0,"stats":{"Line":336}},{"line":44,"address":[],"length":0,"stats":{"Line":118}},{"line":46,"address":[],"length":0,"stats":{"Line":4}},{"line":49,"address":[],"length":0,"stats":{"Line":126}},{"line":51,"address":[],"length":0,"stats":{"Line":12}},{"line":52,"address":[],"length":0,"stats":{"Line":10}},{"line":55,"address":[],"length":0,"stats":{"Line":10}},{"line":57,"address":[],"length":0,"stats":{"Line":20}},{"line":59,"address":[],"length":0,"stats":{"Line":2}},{"line":63,"address":[],"length":0,"stats":{"Line":12}},{"line":65,"address":[],"length":0,"stats":{"Line":6}},{"line":67,"address":[],"length":0,"stats":{"Line":4}},{"line":75,"address":[],"length":0,"stats":{"Line":92}},{"line":78,"address":[],"length":0,"stats":{"Line":847}},{"line":79,"address":[],"length":0,"stats":{"Line":1694}},{"line":80,"address":[],"length":0,"stats":{"Line":1694}},{"line":81,"address":[],"length":0,"stats":{"Line":1694}},{"line":83,"address":[],"length":0,"stats":{"Line":847}},{"line":84,"address":[],"length":0,"stats":{"Line":645}},{"line":85,"address":[],"length":0,"stats":{"Line":632}},{"line":86,"address":[],"length":0,"stats":{"Line":1184}},{"line":88,"address":[],"length":0,"stats":{"Line":40}},{"line":98,"address":[],"length":0,"stats":{"Line":81}},{"line":99,"address":[],"length":0,"stats":{"Line":162}},{"line":100,"address":[],"length":0,"stats":{"Line":162}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":58}},{"line":109,"address":[],"length":0,"stats":{"Line":58}},{"line":112,"address":[],"length":0,"stats":{"Line":131956}},{"line":116,"address":[],"length":0,"stats":{"Line":1}},{"line":117,"address":[],"length":0,"stats":{"Line":2}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}}],"covered":42,"coverable":46},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","killer.rs"],"content":"use anyhow::{anyhow, Result};\nuse std::process::Command;\nuse std::time::Duration;\nuse tokio::time::sleep;\n\npub struct ProcessKiller;\n\nimpl ProcessKiller {\n    pub async fn kill_process_by_pid(pid: u32, force: bool) -\u003e Result\u003c()\u003e {\n        if force {\n            Self::kill_force(pid).await\n        } else {\n            Self::kill_graceful(pid).await\n        }\n    }\n\n    pub async fn kill_processes_by_name(name: \u0026str, force: bool) -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let pids = Self::find_pids_by_name(name)?;\n        let mut killed_pids = Vec::new();\n\n        for pid in pids {\n            match Self::kill_process_by_pid(pid, force).await {\n                Ok(()) =\u003e killed_pids.push(pid),\n                Err(e) =\u003e eprintln!(\"Failed to kill process {pid}: {e}\"),\n            }\n        }\n\n        Ok(killed_pids)\n    }\n\n    pub async fn kill_process_by_port(port: u16) -\u003e Result\u003cu32\u003e {\n        let pid = Self::find_pid_by_port(port)?;\n        Self::kill_graceful(pid).await?;\n        Ok(pid)\n    }\n\n    async fn kill_graceful(pid: u32) -\u003e Result\u003c()\u003e {\n        // First try SIGTERM\n        let output = Command::new(\"kill\")\n            .args([\"-TERM\", \u0026pid.to_string()])\n            .output()?;\n\n        if !output.status.success() {\n            let error = String::from_utf8_lossy(\u0026output.stderr);\n            return Err(anyhow!(\"Failed to send SIGTERM to process {pid}: {error}\"));\n        }\n\n        // Wait up to 5 seconds for graceful shutdown\n        for _ in 0..50 {\n            if !Self::is_process_running(pid)? {\n                return Ok(());\n            }\n            sleep(Duration::from_millis(100)).await;\n        }\n\n        // If still running, escalate to SIGKILL\n        eprintln!(\"Process {pid} didn't respond to SIGTERM, escalating to SIGKILL\");\n        Self::kill_force(pid).await\n    }\n\n    async fn kill_force(pid: u32) -\u003e Result\u003c()\u003e {\n        let output = Command::new(\"kill\")\n            .args([\"-KILL\", \u0026pid.to_string()])\n            .output()?;\n\n        if !output.status.success() {\n            let error = String::from_utf8_lossy(\u0026output.stderr);\n            return Err(anyhow!(\"Failed to send SIGKILL to process {pid}: {error}\"));\n        }\n\n        // Wait up to 2 seconds for force kill to take effect\n        for _ in 0..20 {\n            if !Self::is_process_running(pid)? {\n                return Ok(());\n            }\n            sleep(Duration::from_millis(100)).await;\n        }\n\n        Err(anyhow!(\"Process {pid} is still running after SIGKILL\"))\n    }\n\n    fn is_process_running(pid: u32) -\u003e Result\u003cbool\u003e {\n        let output = Command::new(\"ps\").args([\"-p\", \u0026pid.to_string()]).output()?;\n\n        Ok(output.status.success())\n    }\n\n    fn find_pids_by_name(name: \u0026str) -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let output = Command::new(\"pgrep\").args([\"-f\", name]).output()?;\n\n        if !output.status.success() {\n            return Ok(Vec::new());\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let pids: Result\u003cVec\u003cu32\u003e, _\u003e = stdout\n            .lines()\n            .filter(|line| !line.trim().is_empty())\n            .map(|line| line.trim().parse())\n            .collect();\n\n        pids.map_err(|e| anyhow!(\"Failed to parse PID: {e}\"))\n    }\n\n    fn find_pid_by_port(port: u16) -\u003e Result\u003cu32\u003e {\n        let output = Command::new(\"lsof\")\n            .args([\"-t\", \"-i\", \u0026format!(\":{port}\")])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"No process found using port {port}\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let first_line = stdout\n            .lines()\n            .next()\n            .ok_or_else(|| anyhow!(\"No process found using port {port}\"))?;\n\n        first_line\n            .trim()\n            .parse()\n            .map_err(|e| anyhow!(\"Failed to parse PID from port lookup: {e}\"))\n    }\n\n    pub async fn cleanup_dev_processes() -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let common_dev_processes = [\n            \"node\",\n            \"npm\",\n            \"yarn\",\n            \"webpack\",\n            \"vite\",\n            \"next\",\n            \"python\",\n            \"django\",\n            \"flask\",\n            \"rails\",\n            \"ruby\",\n            \"php\",\n            \"artisan\",\n            \"composer\",\n            \"java\",\n            \"gradle\",\n            \"docker\",\n            \"docker-compose\",\n            \"redis-server\",\n            \"postgres\",\n        ];\n\n        let mut killed_pids = Vec::new();\n\n        for process_name in \u0026common_dev_processes {\n            match Self::kill_processes_by_name(process_name, false).await {\n                Ok(pids) =\u003e killed_pids.extend(pids),\n                Err(e) =\u003e eprintln!(\"Error killing {process_name}: {e}\"),\n            }\n        }\n\n        Ok(killed_pids)\n    }\n\n    pub fn find_available_port(start_port: u16, end_port: u16) -\u003e Result\u003cu16\u003e {\n        for port in start_port..=end_port {\n            if Self::is_port_available(port)? {\n                return Ok(port);\n            }\n        }\n        Err(anyhow!(\n            \"No available port found in range {start_port}-{end_port}\"\n        ))\n    }\n\n    fn is_port_available(port: u16) -\u003e Result\u003cbool\u003e {\n        let output = Command::new(\"lsof\")\n            .args([\"-i\", \u0026format!(\":{port}\")])\n            .output()?;\n\n        // If lsof returns non-zero, port is available\n        Ok(!output.status.success())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[tokio::test]\n    async fn test_process_killer_error_handling() {\n        // Test killing a non-existent process\n        let result = ProcessKiller::kill_process_by_pid(999999, false).await;\n        assert!(result.is_err());\n\n        // Test killing by non-existent process name\n        let result =\n            ProcessKiller::kill_processes_by_name(\"non_existent_process_12345\", false).await;\n        assert!(result.is_ok());\n        let killed_pids = result.unwrap();\n        assert!(killed_pids.is_empty());\n    }\n\n    #[tokio::test]\n    async fn test_find_available_port() {\n        // Test finding available port in a high range (likely to be available)\n        let result = ProcessKiller::find_available_port(60000, 60010);\n\n        match result {\n            Ok(port) =\u003e {\n                assert!(port \u003e= 60000);\n                assert!(port \u003c= 60010);\n            }\n            Err(_) =\u003e {\n                // It's possible no ports are available, which is acceptable\n            }\n        }\n    }\n\n    #[tokio::test]\n    async fn test_port_availability_check() {\n        // Test port availability for a very high port (likely available)\n        let result = ProcessKiller::is_port_available(65000);\n\n        // Should either return true (available) or false (not available)\n        // Both are valid results\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_is_process_running() {\n        // Test with process PID 1 (init/launchd - should always exist on Unix systems)\n        let result = ProcessKiller::is_process_running(1);\n        assert!(result.is_ok());\n\n        // On macOS/Unix, PID 1 should always be running\n        if let Ok(is_running) = result {\n            assert!(is_running);\n        }\n\n        // Test with a very high PID (likely not to exist)\n        let result = ProcessKiller::is_process_running(999999);\n        assert!(result.is_ok());\n\n        if let Ok(is_running) = result {\n            // Very high PID is unlikely to be running\n            assert!(!is_running);\n        }\n    }\n\n    #[test]\n    fn test_find_pids_by_name() {\n        // Test finding PIDs for a common system process\n        let result = ProcessKiller::find_pids_by_name(\"kernel_task\");\n\n        match result {\n            Ok(pids) =\u003e {\n                // kernel_task should exist on macOS\n                // PIDs should be positive numbers\n                for pid in pids {\n                    assert!(pid \u003e 0);\n                }\n            }\n            Err(_) =\u003e {\n                // pgrep might not be available or process might not exist\n                // This is acceptable for the test\n            }\n        }\n    }\n\n    #[test]\n    fn test_find_pid_by_port_non_existent() {\n        // Test finding PID for a port that's very unlikely to be used\n        let result = ProcessKiller::find_pid_by_port(65534);\n\n        // Should either find a PID or return an error (port not in use)\n        // Both outcomes are valid\n        match result {\n            Ok(pid) =\u003e assert!(pid \u003e 0),\n            Err(e) =\u003e assert!(e.to_string().contains(\"No process found\")),\n        }\n    }\n\n    #[tokio::test]\n    async fn test_cleanup_dev_processes_safety() {\n        // This test ensures cleanup doesn't crash\n        // We won't actually kill processes in tests\n\n        // For safety, we'll test the function structure exists\n        // In a real test environment, we'd mock the system calls\n        let result = ProcessKiller::cleanup_dev_processes().await;\n\n        // Should return a result (either success with PIDs or an error)\n        assert!(result.is_ok());\n\n        let killed_pids = result.unwrap();\n        // Could be empty (no dev processes) or contain PIDs\n        // Both are valid outcomes\n        for pid in killed_pids {\n            assert!(pid \u003e 0);\n        }\n    }\n\n    #[test]\n    fn test_find_available_port_range_validation() {\n        // Test edge cases for port range finding\n\n        // Test with single port\n        let result = ProcessKiller::find_available_port(50000, 50000);\n        // Should either succeed or fail gracefully\n        match result {\n            Ok(port) =\u003e assert_eq!(port, 50000),\n            Err(_) =\u003e {} // Port might be in use, which is fine\n        }\n\n        // Test with small range\n        let result = ProcessKiller::find_available_port(50000, 50001);\n        match result {\n            Ok(port) =\u003e {\n                assert!(port \u003e= 50000);\n                assert!(port \u003c= 50001);\n            }\n            Err(_) =\u003e {} // Ports might be in use\n        }\n    }\n\n    #[test]\n    fn test_error_messages_quality() {\n        // Test that error messages are meaningful\n\n        let result = ProcessKiller::find_pid_by_port(0);\n        if let Err(e) = result {\n            let error_msg = e.to_string();\n            // Error message should mention the port or \"process\"\n            assert!(error_msg.contains(\"process\") || error_msg.contains(\"0\"));\n        }\n    }\n\n    #[tokio::test]\n    async fn test_graceful_vs_force_kill_parameters() {\n        // Test that force and graceful parameters are handled correctly\n\n        // Test with non-existent PID - should fail gracefully for both modes\n        let graceful_result = ProcessKiller::kill_process_by_pid(999999, false).await;\n        let force_result = ProcessKiller::kill_process_by_pid(999999, true).await;\n\n        // Both should fail (PID doesn't exist) but not panic\n        assert!(graceful_result.is_err());\n        assert!(force_result.is_err());\n\n        // Error messages should be meaningful\n        if let Err(e) = graceful_result {\n            assert!(!e.to_string().is_empty());\n        }\n\n        if let Err(e) = force_result {\n            assert!(!e.to_string().is_empty());\n        }\n    }\n\n    #[test]\n    fn test_system_command_safety() {\n        // Test that system commands are called safely\n\n        // Test ps command with safe parameters\n        let result = ProcessKiller::is_process_running(1);\n        assert!(result.is_ok());\n\n        // Test lsof command with safe parameters\n        let result = ProcessKiller::find_pid_by_port(65535);\n        // Should complete without panicking\n        match result {\n            Ok(_) | Err(_) =\u003e {} // Both outcomes are acceptable\n        }\n    }\n}\n","traces":[{"line":9,"address":[],"length":0,"stats":{"Line":20}},{"line":10,"address":[],"length":0,"stats":{"Line":10}},{"line":11,"address":[],"length":0,"stats":{"Line":4}},{"line":13,"address":[],"length":0,"stats":{"Line":8}},{"line":17,"address":[],"length":0,"stats":{"Line":130}},{"line":18,"address":[],"length":0,"stats":{"Line":195}},{"line":21,"address":[],"length":0,"stats":{"Line":71}},{"line":22,"address":[],"length":0,"stats":{"Line":12}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":9}},{"line":28,"address":[],"length":0,"stats":{"Line":65}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":16}},{"line":39,"address":[],"length":0,"stats":{"Line":24}},{"line":40,"address":[],"length":0,"stats":{"Line":16}},{"line":44,"address":[],"length":0,"stats":{"Line":8}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":4}},{"line":62,"address":[],"length":0,"stats":{"Line":6}},{"line":63,"address":[],"length":0,"stats":{"Line":4}},{"line":67,"address":[],"length":0,"stats":{"Line":2}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":6}},{"line":83,"address":[],"length":0,"stats":{"Line":30}},{"line":88,"address":[],"length":0,"stats":{"Line":67}},{"line":89,"address":[],"length":0,"stats":{"Line":268}},{"line":92,"address":[],"length":0,"stats":{"Line":64}},{"line":95,"address":[],"length":0,"stats":{"Line":9}},{"line":96,"address":[],"length":0,"stats":{"Line":9}},{"line":98,"address":[],"length":0,"stats":{"Line":9}},{"line":99,"address":[],"length":0,"stats":{"Line":9}},{"line":102,"address":[],"length":0,"stats":{"Line":6}},{"line":105,"address":[],"length":0,"stats":{"Line":6}},{"line":106,"address":[],"length":0,"stats":{"Line":18}},{"line":107,"address":[],"length":0,"stats":{"Line":18}},{"line":111,"address":[],"length":0,"stats":{"Line":4}},{"line":114,"address":[],"length":0,"stats":{"Line":6}},{"line":115,"address":[],"length":0,"stats":{"Line":4}},{"line":118,"address":[],"length":0,"stats":{"Line":2}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":6}},{"line":127,"address":[],"length":0,"stats":{"Line":6}},{"line":128,"address":[],"length":0,"stats":{"Line":3}},{"line":129,"address":[],"length":0,"stats":{"Line":6}},{"line":130,"address":[],"length":0,"stats":{"Line":6}},{"line":131,"address":[],"length":0,"stats":{"Line":6}},{"line":132,"address":[],"length":0,"stats":{"Line":6}},{"line":133,"address":[],"length":0,"stats":{"Line":6}},{"line":134,"address":[],"length":0,"stats":{"Line":6}},{"line":135,"address":[],"length":0,"stats":{"Line":6}},{"line":136,"address":[],"length":0,"stats":{"Line":6}},{"line":137,"address":[],"length":0,"stats":{"Line":6}},{"line":138,"address":[],"length":0,"stats":{"Line":6}},{"line":139,"address":[],"length":0,"stats":{"Line":6}},{"line":140,"address":[],"length":0,"stats":{"Line":6}},{"line":141,"address":[],"length":0,"stats":{"Line":6}},{"line":142,"address":[],"length":0,"stats":{"Line":6}},{"line":143,"address":[],"length":0,"stats":{"Line":6}},{"line":144,"address":[],"length":0,"stats":{"Line":6}},{"line":145,"address":[],"length":0,"stats":{"Line":6}},{"line":146,"address":[],"length":0,"stats":{"Line":3}},{"line":147,"address":[],"length":0,"stats":{"Line":3}},{"line":150,"address":[],"length":0,"stats":{"Line":6}},{"line":152,"address":[],"length":0,"stats":{"Line":123}},{"line":153,"address":[],"length":0,"stats":{"Line":180}},{"line":154,"address":[],"length":0,"stats":{"Line":60}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":3}},{"line":162,"address":[],"length":0,"stats":{"Line":11}},{"line":163,"address":[],"length":0,"stats":{"Line":33}},{"line":164,"address":[],"length":0,"stats":{"Line":22}},{"line":165,"address":[],"length":0,"stats":{"Line":11}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":13}},{"line":174,"address":[],"length":0,"stats":{"Line":39}},{"line":175,"address":[],"length":0,"stats":{"Line":26}}],"covered":69,"coverable":88},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","mod.rs"],"content":"pub mod info;\npub mod killer;\npub mod monitor;\n\npub use info::*;\npub use killer::*;\npub use monitor::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","monitor.rs"],"content":"use crate::process::{ProcessInfo, ProcessManager};\nuse std::time::{Duration, Instant};\n\npub struct ProcessMonitor {\n    manager: ProcessManager,\n    last_update: Instant,\n    update_interval: Duration,\n}\n\nimpl ProcessMonitor {\n    pub fn new() -\u003e Self {\n        Self {\n            manager: ProcessManager::new(),\n            last_update: Instant::now(),\n            update_interval: Duration::from_millis(1000), // 1 second default\n        }\n    }\n\n    pub fn should_update(\u0026self) -\u003e bool {\n        self.last_update.elapsed() \u003e= self.update_interval\n    }\n\n    pub fn get_processes(\u0026mut self) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        self.manager.get_processes()\n    }\n\n    pub fn get_top_cpu_processes(\u0026mut self, limit: usize) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        let mut processes = self.manager.get_processes();\n        processes.sort_by(|a, b| b.cpu_usage.partial_cmp(\u0026a.cpu_usage).unwrap());\n        processes.truncate(limit);\n        processes\n    }\n\n    pub fn get_top_memory_processes(\u0026mut self, limit: usize) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        let mut processes = self.manager.get_processes();\n        processes.sort_by(|a, b| b.memory.cmp(\u0026a.memory));\n        processes.truncate(limit);\n        processes\n    }\n\n    pub fn get_system_cpu_usage(\u0026mut self) -\u003e f32 {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        self.manager.get_system_cpu_usage()\n    }\n}\n\nimpl Default for ProcessMonitor {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n","traces":[{"line":11,"address":[],"length":0,"stats":{"Line":71}},{"line":13,"address":[],"length":0,"stats":{"Line":142}},{"line":14,"address":[],"length":0,"stats":{"Line":71}},{"line":15,"address":[],"length":0,"stats":{"Line":71}},{"line":19,"address":[],"length":0,"stats":{"Line":47}},{"line":20,"address":[],"length":0,"stats":{"Line":47}},{"line":23,"address":[],"length":0,"stats":{"Line":44}},{"line":24,"address":[],"length":0,"stats":{"Line":88}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":88}},{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":32,"address":[],"length":0,"stats":{"Line":2}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":3}},{"line":37,"address":[],"length":0,"stats":{"Line":3034}},{"line":38,"address":[],"length":0,"stats":{"Line":3}},{"line":39,"address":[],"length":0,"stats":{"Line":1}},{"line":42,"address":[],"length":0,"stats":{"Line":1}},{"line":43,"address":[],"length":0,"stats":{"Line":2}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":3}},{"line":48,"address":[],"length":0,"stats":{"Line":16937}},{"line":49,"address":[],"length":0,"stats":{"Line":3}},{"line":50,"address":[],"length":0,"stats":{"Line":1}},{"line":53,"address":[],"length":0,"stats":{"Line":1}},{"line":54,"address":[],"length":0,"stats":{"Line":2}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":2}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}}],"covered":24,"coverable":34},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","fixtures.rs"],"content":"use crate::network::{ConnectionInfo, PortInfo, Protocol, ConnectionState};\nuse crate::process::ProcessInfo;\nuse std::net::{IpAddr, Ipv4Addr, SocketAddr};\n\n/// Create test fixture for ProcessInfo\npub fn create_test_process(pid: u32, name: \u0026str, cpu: f32, memory: u64) -\u003e ProcessInfo {\n    ProcessInfo {\n        pid,\n        name: name.to_string(),\n        cpu_usage: cpu,\n        memory,\n        parent_pid: if pid \u003e 1 { Some(1) } else { None },\n        status: \"Running\".to_string(),\n        start_time: 1000,\n        user_id: Some(501),\n        executable_path: Some(format!(\"/usr/bin/{}\", name)),\n        command_line: vec![name.to_string()],\n    }\n}\n\n/// Create test fixture for PortInfo\npub fn create_test_port(port: u16, protocol: Protocol, pid: Option\u003cu32\u003e) -\u003e PortInfo {\n    PortInfo {\n        port,\n        protocol,\n        pid,\n        process_name: pid.map(|p| format!(\"process_{}\", p)),\n        local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(127, 0, 0, 1)), port),\n        remote_address: None,\n        state: ConnectionState::Listen,\n        service_name: None,\n    }\n}\n\n/// Create test fixture for ConnectionInfo\npub fn create_test_connection(\n    local_port: u16,\n    remote_port: u16,\n    pid: Option\u003cu32\u003e,\n) -\u003e ConnectionInfo {\n    ConnectionInfo {\n        protocol: Protocol::Tcp,\n        local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(127, 0, 0, 1)), local_port),\n        remote_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(192, 168, 1, 1)), remote_port),\n        pid,\n        process_name: pid.map(|p| format!(\"process_{}\", p)),\n    }\n}\n\n/// Create a set of realistic test processes for integration testing\npub fn create_realistic_test_processes() -\u003e Vec\u003cProcessInfo\u003e {\n    vec![\n        create_test_process(1, \"kernel_task\", 5.0, 1024 * 1024 * 1024), // 1GB system process\n        create_test_process(100, \"node\", 45.2, 512 * 1024 * 1024),      // 512MB Node.js\n        create_test_process(101, \"python\", 23.1, 256 * 1024 * 1024),    // 256MB Python\n        create_test_process(102, \"chrome\", 15.8, 2 * 1024 * 1024 * 1024), // 2GB Chrome\n        create_test_process(103, \"code\", 8.4, 400 * 1024 * 1024),       // 400MB VS Code\n        create_test_process(104, \"docker\", 12.1, 300 * 1024 * 1024),    // 300MB Docker\n        create_test_process(105, \"rust-analyzer\", 3.2, 150 * 1024 * 1024), // 150MB rust-analyzer\n    ]\n}\n\n/// Create a set of realistic test ports for integration testing\npub fn create_realistic_test_ports() -\u003e Vec\u003cPortInfo\u003e {\n    vec![\n        create_test_port(3000, Protocol::Tcp, Some(100)), // Node.js dev server\n        create_test_port(8080, Protocol::Tcp, Some(104)), // Docker container\n        create_test_port(5432, Protocol::Tcp, Some(106)), // PostgreSQL\n        create_test_port(6379, Protocol::Tcp, Some(107)), // Redis\n        create_test_port(3306, Protocol::Tcp, Some(108)), // MySQL\n        create_test_port(53, Protocol::Udp, Some(1)),     // DNS\n        create_test_port(22, Protocol::Tcp, Some(1)),     // SSH\n    ]\n}\n\n/// Create test connections for integration testing\npub fn create_realistic_test_connections() -\u003e Vec\u003cConnectionInfo\u003e {\n    vec![\n        create_test_connection(3000, 80, Some(100)),   // Node.js to HTTP\n        create_test_connection(3001, 443, Some(100)),  // Node.js to HTTPS\n        create_test_connection(8080, 443, Some(104)),  // Docker to HTTPS\n        create_test_connection(1234, 5432, Some(102)), // Chrome to DB\n    ]\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_create_test_process() {\n        let process = create_test_process(123, \"test\", 50.0, 1024);\n        assert_eq!(process.pid, 123);\n        assert_eq!(process.name, \"test\");\n        assert_eq!(process.cpu_usage, 50.0);\n        assert_eq!(process.memory, 1024);\n        assert_eq!(process.status, \"Running\");\n    }\n\n    #[test]\n    fn test_create_test_port() {\n        let port = create_test_port(8080, Protocol::Tcp, Some(123));\n        assert_eq!(port.port, 8080);\n        assert_eq!(port.protocol, Protocol::Tcp);\n        assert_eq!(port.pid, Some(123));\n        assert_eq!(port.state, ConnectionState::Listen);\n    }\n\n    #[test]\n    fn test_realistic_fixtures_sizes() {\n        let processes = create_realistic_test_processes();\n        let ports = create_realistic_test_ports();\n        let connections = create_realistic_test_connections();\n\n        assert_eq!(processes.len(), 7);\n        assert_eq!(ports.len(), 7);\n        assert_eq!(connections.len(), 4);\n    }\n\n    #[test]\n    fn test_realistic_processes_have_variety() {\n        let processes = create_realistic_test_processes();\n        \n        // Check we have system processes\n        assert!(processes.iter().any(|p| p.name == \"kernel_task\"));\n        \n        // Check we have development processes\n        assert!(processes.iter().any(|p| p.name == \"node\"));\n        assert!(processes.iter().any(|p| p.name == \"python\"));\n        \n        // Check CPU usage varies\n        let cpu_values: Vec\u003cf32\u003e = processes.iter().map(|p| p.cpu_usage).collect();\n        assert!(cpu_values.iter().any(|\u0026cpu| cpu \u003e 40.0));\n        assert!(cpu_values.iter().any(|\u0026cpu| cpu \u003c 10.0));\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","integration_helpers.rs"],"content":"use anyhow::Result;\n\n#[cfg(test)]\nuse {\n    std::process::{Command, Stdio},\n    std::time::Duration,\n    tempfile::TempDir,\n    tokio::time::timeout,\n};\n\n/// Integration test helper for testing CLI commands and system integration\n#[cfg(test)]\npub struct IntegrationTestHelper {\n    pub temp_dir: TempDir,\n    pub binary_path: String,\n}\n\n#[cfg(test)]\nimpl IntegrationTestHelper {\n    /// Create new integration test helper\n    pub fn new() -\u003e Result\u003cSelf\u003e {\n        let temp_dir = TempDir::new()?;\n        let binary_path = std::env::var(\"CARGO_BIN_EXE_bossy-rust\")\n            .unwrap_or_else(|_| \"target/debug/bossy-rust\".to_string());\n        \n        Ok(Self {\n            temp_dir,\n            binary_path,\n        })\n    }\n\n    /// Execute CLI command with timeout\n    pub async fn execute_cli_command(\u0026self, args: \u0026[\u0026str]) -\u003e Result\u003cstd::process::Output\u003e {\n        let mut cmd = Command::new(\u0026self.binary_path);\n        cmd.args(args)\n            .stdout(Stdio::piped())\n            .stderr(Stdio::piped());\n\n        let output = timeout(Duration::from_secs(10), \n            tokio::task::spawn_blocking(move || cmd.output())\n        ).await\n        .map_err(|_| anyhow::anyhow!(\"Command timed out\"))?\n        .map_err(|e| anyhow::anyhow!(\"Join error: {}\", e))?\n        .map_err(|e| anyhow::anyhow!(\"Command execution error: {}\", e))?;\n\n        Ok(output)\n    }\n\n    /// Test command help output\n    pub async fn test_command_help(\u0026self, command: \u0026str) -\u003e Result\u003c()\u003e {\n        let output = self.execute_cli_command(\u0026[command, \"--help\"]).await?;\n        \n        assert!(output.status.success());\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        assert!(stdout.contains(\"USAGE\") || stdout.contains(\"Usage\"));\n        \n        Ok(())\n    }\n\n    /// Test command with invalid arguments\n    pub async fn test_command_invalid_args(\u0026self, args: \u0026[\u0026str]) -\u003e Result\u003c()\u003e {\n        let output = self.execute_cli_command(args).await?;\n        \n        // Should fail with invalid arguments\n        assert!(!output.status.success());\n        \n        Ok(())\n    }\n\n    /// Test port-related commands safely\n    pub async fn test_port_commands_safely(\u0026self) -\u003e Result\u003c()\u003e {\n        // Test with unlikely port numbers to avoid interfering with real services\n        let test_ports = [65530, 65531, 65532];\n        \n        for port in test_ports {\n            // Test port info command\n            let output = self.execute_cli_command(\u0026[\"port\", \u0026port.to_string()]).await?;\n            assert!(output.status.success());\n            \n            // Test find-port command\n            let output = self.execute_cli_command(\u0026[\"find-port\", \u0026port.to_string()]).await?;\n            assert!(output.status.success());\n        }\n        \n        Ok(())\n    }\n\n    /// Test process commands safely (without actual killing)\n    pub async fn test_process_commands_safely(\u0026self) -\u003e Result\u003c()\u003e {\n        // Test ps command variations\n        let ps_variants = [\n            vec![\"ps\"],\n            vec![\"ps\", \"--top-cpu\"],\n            vec![\"ps\", \"--top-memory\"],\n            vec![\"ps\", \"--limit\", \"5\"],\n        ];\n        \n        for args in ps_variants {\n            let output = self.execute_cli_command(\u0026args).await?;\n            assert!(output.status.success());\n            \n            let stdout = String::from_utf8_lossy(\u0026output.stdout);\n            assert!(stdout.contains(\"Process\") || stdout.contains(\"PID\"));\n        }\n        \n        // Test kill-process with non-existent process\n        let output = self.execute_cli_command(\u0026[\"kill-process\", \"non_existent_process_12345\"]).await?;\n        assert!(output.status.success()); // Should succeed but report no processes found\n        \n        Ok(())\n    }\n\n    /// Test network commands\n    pub async fn test_network_commands(\u0026self) -\u003e Result\u003c()\u003e {\n        // Test ports command variations\n        let ports_variants = [\n            vec![\"ports\"],\n            vec![\"ports\", \"--listening\"],\n            vec![\"ports\", \"--common\"],\n        ];\n        \n        for args in ports_variants {\n            let output = self.execute_cli_command(\u0026args).await?;\n            assert!(output.status.success());\n        }\n        \n        Ok(())\n    }\n\n    /// Test cleanup commands safely\n    pub async fn test_cleanup_commands(\u0026self) -\u003e Result\u003c()\u003e {\n        // Test cleanup without flags (should require --dev)\n        let output = self.execute_cli_command(\u0026[\"cleanup\"]).await?;\n        assert!(output.status.success());\n        \n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        assert!(stdout.contains(\"--dev\") || stdout.contains(\"specify\"));\n        \n        // Test cleanup with --dev flag (safe on test system)\n        let output = self.execute_cli_command(\u0026[\"cleanup\", \"--dev\"]).await?;\n        assert!(output.status.success());\n        \n        Ok(())\n    }\n\n    /// Test error handling scenarios\n    pub async fn test_error_scenarios(\u0026self) -\u003e Result\u003c()\u003e {\n        // Test invalid command\n        let output = self.execute_cli_command(\u0026[\"invalid-command\"]).await?;\n        assert!(!output.status.success());\n        \n        // Test invalid port numbers\n        let invalid_ports = [\"abc\", \"99999\", \"-1\"];\n        for port in invalid_ports {\n            let output = self.execute_cli_command(\u0026[\"port\", port]).await?;\n            // Should either fail or handle gracefully\n            let _stdout = String::from_utf8_lossy(\u0026output.stdout);\n            let stderr = String::from_utf8_lossy(\u0026output.stderr);\n            assert!(stderr.contains(\"error\") || stderr.contains(\"invalid\") || output.status.success());\n        }\n        \n        Ok(())\n    }\n\n    /// Performance test for command execution time\n    pub async fn test_command_performance(\u0026self) -\u003e Result\u003c()\u003e {\n        let start = std::time::Instant::now();\n        \n        // Commands should execute quickly\n        let _output = self.execute_cli_command(\u0026[\"ps\", \"--limit\", \"10\"]).await?;\n        \n        let duration = start.elapsed();\n        assert!(duration \u003c Duration::from_secs(5), \"Command took too long: {:?}\", duration);\n        \n        Ok(())\n    }\n}\n\n/// System integration test helper\n#[cfg(test)]\npub struct SystemIntegrationHelper;\n\n#[cfg(test)]\nimpl SystemIntegrationHelper {\n    /// Test system command availability\n    pub fn test_system_dependencies() -\u003e Result\u003c()\u003e {\n        let required_commands = [\"ps\", \"lsof\", \"netstat\", \"kill\", \"pgrep\"];\n        \n        for cmd in required_commands {\n            let output = Command::new(\"which\")\n                .arg(cmd)\n                .output()?;\n                \n            assert!(output.status.success(), \"Required command '{}' not found\", cmd);\n        }\n        \n        Ok(())\n    }\n\n    /// Test system command output formats\n    pub async fn test_system_command_formats() -\u003e Result\u003c()\u003e {\n        // Test ps command format\n        let output = Command::new(\"ps\")\n            .args([\"-eo\", \"pid,pcpu,pmem,comm\"])\n            .output()?;\n            \n        if output.status.success() {\n            let stdout = String::from_utf8_lossy(\u0026output.stdout);\n            assert!(stdout.contains(\"PID\"));\n        }\n        \n        // Test lsof availability\n        let output = Command::new(\"lsof\")\n            .args([\"-h\"])\n            .output()?;\n            \n        // lsof returns non-zero for help, but should not fail completely\n        assert!(!output.stdout.is_empty() || !output.stderr.is_empty());\n        \n        Ok(())\n    }\n\n    /// Test permission handling\n    pub async fn test_permission_scenarios() -\u003e Result\u003c()\u003e {\n        // Test accessing system processes (may require permissions)\n        let output = Command::new(\"ps\")\n            .args([\"-p\", \"1\"]) // launchd/init\n            .output()?;\n            \n        // Should either succeed or fail gracefully\n        assert!(output.status.success() || !output.stderr.is_empty());\n        \n        Ok(())\n    }\n}\n\n/// Mock environment for isolated testing\n#[cfg(test)]\npub struct MockEnvironment {\n    pub processes: Vec\u003cu32\u003e,\n    pub ports: Vec\u003cu16\u003e,\n    pub temp_files: Vec\u003cstd::path::PathBuf\u003e,\n}\n\n#[cfg(test)]\nimpl MockEnvironment {\n    pub fn new() -\u003e Self {\n        Self {\n            processes: Vec::new(),\n            ports: Vec::new(),\n            temp_files: Vec::new(),\n        }\n    }\n\n    /// Create mock process files for testing\n    pub fn create_mock_proc_files(\u0026mut self, temp_dir: \u0026TempDir) -\u003e Result\u003c()\u003e {\n        use std::fs;\n        \n        // Create mock /proc-like structure\n        let proc_dir = temp_dir.path().join(\"proc\");\n        fs::create_dir_all(\u0026proc_dir)?;\n        \n        // Create mock process directories\n        for pid in [1, 100, 101, 102] {\n            let pid_dir = proc_dir.join(pid.to_string());\n            fs::create_dir_all(\u0026pid_dir)?;\n            \n            // Create stat file\n            let stat_file = pid_dir.join(\"stat\");\n            fs::write(\u0026stat_file, format!(\"{} (test_process) S 1 1 1\", pid))?;\n            \n            self.temp_files.push(stat_file);\n            self.processes.push(pid);\n        }\n        \n        Ok(())\n    }\n\n    /// Create mock network files for testing\n    pub fn create_mock_net_files(\u0026mut self, temp_dir: \u0026TempDir) -\u003e Result\u003c()\u003e {\n        use std::fs;\n        \n        let net_dir = temp_dir.path().join(\"proc\").join(\"net\");\n        fs::create_dir_all(\u0026net_dir)?;\n        \n        // Create mock TCP file\n        let tcp_file = net_dir.join(\"tcp\");\n        fs::write(\u0026tcp_file, \n            \"  sl  local_address rem_address   st tx_queue rx_queue tr tm-\u003ewhen\\n  \\\n             0: 00000000:1770 00000000:0000 0A 00000000:00000000 00:00000000\\n\")?;\n        \n        self.temp_files.push(tcp_file);\n        self.ports.push(6000);\n        \n        Ok(())\n    }\n\n    /// Cleanup mock environment\n    pub fn cleanup(\u0026mut self) {\n        self.processes.clear();\n        self.ports.clear();\n        self.temp_files.clear();\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use serial_test::serial;\n\n    #[tokio::test]\n    #[serial]\n    async fn test_integration_helper_creation() {\n        let helper = IntegrationTestHelper::new().unwrap();\n        assert!(helper.temp_dir.path().exists());\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_cli_help_commands() {\n        let helper = IntegrationTestHelper::new().unwrap();\n        \n        // Skip test if binary doesn't exist\n        if !std::path::Path::new(\u0026helper.binary_path).exists() {\n            eprintln!(\"Skipping test: binary not found at {}\", helper.binary_path);\n            return;\n        }\n        \n        // Test main help\n        let output = helper.execute_cli_command(\u0026[\"--help\"]).await.unwrap();\n        assert!(output.status.success());\n        \n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        assert!(stdout.contains(\"bossy-rust\"));\n    }\n\n    #[test]\n    fn test_system_dependencies() {\n        // Only run if not in CI environment\n        if std::env::var(\"CI\").is_err() {\n            SystemIntegrationHelper::test_system_dependencies().unwrap();\n        }\n    }\n\n    #[tokio::test]\n    async fn test_mock_environment() {\n        let temp_dir = TempDir::new().unwrap();\n        let mut mock_env = MockEnvironment::new();\n        \n        mock_env.create_mock_proc_files(\u0026temp_dir).unwrap();\n        mock_env.create_mock_net_files(\u0026temp_dir).unwrap();\n        \n        assert!(!mock_env.processes.is_empty());\n        assert!(!mock_env.ports.is_empty());\n        \n        mock_env.cleanup();\n        assert!(mock_env.processes.is_empty());\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","mocks.rs"],"content":"#[cfg(test)]\nuse mockall::predicate::*;\n#[cfg(test)]\nuse mockall::mock;\nuse std::process::Output;\nuse std::os::unix::process::ExitStatusExt;\nuse anyhow::Result;\n\n/// Mock trait for system commands to enable testable system interactions\npub trait SystemCommandExecutor {\n    fn execute_command(\u0026self, command: \u0026str, args: \u0026[String]) -\u003e Result\u003cOutput\u003e;\n    fn is_process_running(\u0026self, pid: u32) -\u003e Result\u003cbool\u003e;\n    fn get_processes(\u0026self) -\u003e Result\u003cString\u003e;\n    fn get_port_info(\u0026self) -\u003e Result\u003cString\u003e;\n    fn get_network_connections(\u0026self) -\u003e Result\u003cString\u003e;\n}\n\n#[cfg(test)]\nmock! {\n    pub SystemCommand {}\n    \n    impl SystemCommandExecutor for SystemCommand {\n        fn execute_command(\u0026self, command: \u0026str, args: \u0026[String]) -\u003e Result\u003cOutput\u003e;\n        fn is_process_running(\u0026self, pid: u32) -\u003e Result\u003cbool\u003e;\n        fn get_processes(\u0026self) -\u003e Result\u003cString\u003e;\n        fn get_port_info(\u0026self) -\u003e Result\u003cString\u003e;\n        fn get_network_connections(\u0026self) -\u003e Result\u003cString\u003e;\n    }\n}\n\n/// Mock system command outputs for testing\npub struct MockSystemOutputs;\n\nimpl MockSystemOutputs {\n    /// Mock ps command output with realistic process data\n    pub fn mock_ps_output() -\u003e String {\n        r#\"  PID  %CPU %MEM COMMAND\n    1   0.0  0.1 /sbin/launchd\n  100  45.2  2.1 node server.js\n  101  23.1  1.8 python manage.py runserver\n  102  15.8  8.3 /Applications/Google Chrome.app/Contents/MacOS/Google Chrome\n  103   8.4  4.2 /Applications/Visual Studio Code.app/Contents/MacOS/Electron\n  104  12.1  3.1 docker-proxy -proto tcp -host-ip 0.0.0.0\n  105   3.2  1.5 rust-analyzer\"#.to_string()\n    }\n\n    /// Mock lsof command output for port information\n    pub fn mock_lsof_output() -\u003e String {\n        r#\"COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\nnode      100 user    12u  IPv4 0x1234567890      0t0  TCP *:3000 (LISTEN)\npython    101 user    13u  IPv4 0x2345678901      0t0  TCP *:8000 (LISTEN)\ndocker    104 user    14u  IPv4 0x3456789012      0t0  TCP *:8080 (LISTEN)\npostgres  106 user    15u  IPv4 0x4567890123      0t0  TCP *:5432 (LISTEN)\"#.to_string()\n    }\n\n    /// Mock netstat command output for network connections\n    pub fn mock_netstat_output() -\u003e String {\n        r#\"Active Internet connections\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)    \ntcp4       0      0  127.0.0.1.3000         *.*                    LISTEN     \ntcp4       0      0  127.0.0.1.8000         *.*                    LISTEN     \ntcp4       0      0  127.0.0.1.8080         *.*                    LISTEN     \ntcp4       0      0  127.0.0.1.5432         *.*                    LISTEN     \ntcp4       0      0  127.0.0.1.1234         192.168.1.1.80         ESTABLISHED\ntcp4       0      0  127.0.0.1.5678         1.1.1.1.443           ESTABLISHED\"#.to_string()\n    }\n\n    /// Mock kill command success\n    pub fn mock_kill_success() -\u003e Output {\n        Output {\n            status: std::process::ExitStatus::from_raw(0),\n            stdout: vec![],\n            stderr: vec![],\n        }\n    }\n\n    /// Mock kill command failure\n    pub fn mock_kill_failure() -\u003e Output {\n        Output {\n            status: std::process::ExitStatus::from_raw(1),\n            stdout: vec![],\n            stderr: b\"kill: No such process\".to_vec(),\n        }\n    }\n\n    /// Mock pgrep output for finding processes by name\n    pub fn mock_pgrep_output(pids: \u0026[u32]) -\u003e String {\n        pids.iter().map(|pid| pid.to_string()).collect::\u003cVec\u003c_\u003e\u003e().join(\"\\n\")\n    }\n}\n\n/// Helper to create a mock system command executor for testing\n#[cfg(test)]\npub fn create_mock_system_executor() -\u003e MockSystemCommand {\n    let mut mock = MockSystemCommand::new();\n    \n    // Setup default expectations\n    mock.expect_get_processes()\n        .returning(|| Ok(MockSystemOutputs::mock_ps_output()));\n        \n    mock.expect_get_port_info()\n        .returning(|| Ok(MockSystemOutputs::mock_lsof_output()));\n        \n    mock.expect_get_network_connections()\n        .returning(|| Ok(MockSystemOutputs::mock_netstat_output()));\n    \n    mock\n}\n\n/// Mock terminal backend for TUI testing\npub mod tui_mocks {\n    use ratatui::backend::Backend;\n    use ratatui::buffer::Buffer;\n    use ratatui::layout::Rect;\n    use std::io::{self, Write};\n\n    /// Mock backend that captures render operations for testing\n    pub struct MockBackend {\n        pub size: Rect,\n        pub buffer: Buffer,\n        pub draw_calls: Vec\u003cBuffer\u003e,\n    }\n\n    impl MockBackend {\n        pub fn new(width: u16, height: u16) -\u003e Self {\n            let size = Rect::new(0, 0, width, height);\n            Self {\n                size,\n                buffer: Buffer::empty(size),\n                draw_calls: Vec::new(),\n            }\n        }\n\n        /// Get the number of draw calls made\n        pub fn draw_call_count(\u0026self) -\u003e usize {\n            self.draw_calls.len()\n        }\n\n        /// Get the last rendered buffer\n        pub fn last_buffer(\u0026self) -\u003e Option\u003c\u0026Buffer\u003e {\n            self.draw_calls.last()\n        }\n\n        /// Check if a string appears in the last rendered buffer\n        pub fn contains_text(\u0026self, text: \u0026str) -\u003e bool {\n            if let Some(buffer) = self.last_buffer() {\n                buffer.content().iter().any(|cell| cell.symbol().contains(text))\n            } else {\n                false\n            }\n        }\n    }\n\n    impl Backend for MockBackend {\n        fn draw\u003c'a, I\u003e(\u0026mut self, content: I) -\u003e io::Result\u003c()\u003e\n        where\n            I: Iterator\u003cItem = (u16, u16, \u0026'a ratatui::buffer::Cell)\u003e,\n        {\n            for (x, y, cell) in content {\n                self.buffer.get_mut(x, y).clone_from(cell);\n            }\n            self.draw_calls.push(self.buffer.clone());\n            Ok(())\n        }\n\n        fn hide_cursor(\u0026mut self) -\u003e io::Result\u003c()\u003e {\n            Ok(())\n        }\n\n        fn show_cursor(\u0026mut self) -\u003e io::Result\u003c()\u003e {\n            Ok(())\n        }\n\n        fn get_cursor(\u0026mut self) -\u003e io::Result\u003c(u16, u16)\u003e {\n            Ok((0, 0))\n        }\n\n        fn set_cursor(\u0026mut self, _x: u16, _y: u16) -\u003e io::Result\u003c()\u003e {\n            Ok(())\n        }\n\n        fn clear(\u0026mut self) -\u003e io::Result\u003c()\u003e {\n            self.buffer.reset();\n            Ok(())\n        }\n\n        fn size(\u0026self) -\u003e io::Result\u003cRect\u003e {\n            Ok(self.size)\n        }\n\n        fn flush(\u0026mut self) -\u003e io::Result\u003c()\u003e {\n            Ok(())\n        }\n\n        fn window_size(\u0026mut self) -\u003e io::Result\u003cratatui::backend::WindowSize\u003e {\n            Ok(ratatui::backend::WindowSize {\n                columns_rows: (self.size.width, self.size.height).into(),\n                pixels: (0, 0).into(),\n            })\n        }\n    }\n\n    impl Write for MockBackend {\n        fn write(\u0026mut self, buf: \u0026[u8]) -\u003e io::Result\u003cusize\u003e {\n            Ok(buf.len())\n        }\n\n        fn flush(\u0026mut self) -\u003e io::Result\u003c()\u003e {\n            Ok(())\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_mock_ps_output_parsing() {\n        let output = MockSystemOutputs::mock_ps_output();\n        assert!(output.contains(\"node server.js\"));\n        assert!(output.contains(\"45.2\"));\n        assert!(output.contains(\"python manage.py\"));\n    }\n\n    #[test]\n    fn test_mock_lsof_output_parsing() {\n        let output = MockSystemOutputs::mock_lsof_output();\n        assert!(output.contains(\":3000\"));\n        assert!(output.contains(\"LISTEN\"));\n        assert!(output.contains(\"node\"));\n    }\n\n    #[test]\n    fn test_mock_netstat_output_parsing() {\n        let output = MockSystemOutputs::mock_netstat_output();\n        assert!(output.contains(\"127.0.0.1.3000\"));\n        assert!(output.contains(\"ESTABLISHED\"));\n        assert!(output.contains(\"LISTEN\"));\n    }\n\n    #[test]\n    fn test_create_mock_system_executor() {\n        let _mock = create_mock_system_executor();\n        // Test that the mock can be created without panicking\n        assert!(true);\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","mod.rs"],"content":"pub mod fixtures;\npub mod mocks;\npub mod tui_test_utils;\npub mod integration_helpers;\n// pub mod property_tests;  // Temporarily disabled due to import issues\n\npub use fixtures::*;\npub use mocks::*;\npub use tui_test_utils::*;\npub use integration_helpers::*;","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","property_tests.rs"],"content":"//! Property-based tests for BossyRust\n//! \n//! This module contains property-based tests using proptest to verify\n//! that key invariants hold across a wide range of inputs.\n\n#[cfg(test)]\nuse proptest::prelude::*;\n\n#[cfg(test)]\nmod search_properties {\n    use super::*;\n    use crate::testing::*;\n    use crate::*;\n\n    /// Generate arbitrary process names for testing\n    fn arb_process_name() -\u003e impl Strategy\u003cValue = String\u003e {\n        prop_oneof![\n            \"node.*\",\n            \"python.*\",\n            \"cargo.*\",\n            \"rust.*\",\n            \"npm.*\",\n            \"[a-z]{3,10}\",\n        ].prop_map(|s| s.to_string())\n    }\n\n    /// Generate arbitrary search patterns\n    fn arb_search_pattern() -\u003e impl Strategy\u003cValue = String\u003e {\n        prop_oneof![\n            // Port patterns\n            \":[0-9]{1,5}\",\n            // PID patterns  \n            \"#[0-9]{1,6}\",\n            // CPU patterns\n            \"\u003e[0-9]{1,2}%\",\n            // Memory patterns\n            \"\u003e[0-9]{1,4}MB\",\n            \"\u003e[0-9]{1,2}GB\",\n            // Name patterns\n            \"[a-zA-Z]{3,15}\",\n        ].prop_map(|s| s.to_string())\n    }\n\n    proptest! {\n        #[test]\n        fn test_process_search_consistency(\n            pattern in arb_search_pattern(),\n            processes in prop::collection::vec(any::\u003cu32\u003e().prop_map(|pid| {\n                create_test_process(pid, \"test_process\", 10.0, 512)\n            }), 1..100)\n        ) {\n            // Property: Search should be deterministic\n            let results1 = processes.iter()\n                .filter(|p| p.matches_search(\u0026pattern))\n                .collect::\u003cVec\u003c_\u003e\u003e();\n            \n            let results2 = processes.iter()\n                .filter(|p| p.matches_search(\u0026pattern))\n                .collect::\u003cVec\u003c_\u003e\u003e();\n            \n            prop_assert_eq!(results1.len(), results2.len());\n        }\n\n        #[test]\n        fn test_search_subset_property(\n            pattern in arb_search_pattern(),\n            processes in prop::collection::vec(any::\u003cu32\u003e().prop_map(|pid| {\n                create_test_process(pid, \"test_process\", 20.0, 1024)\n            }), 1..50)\n        ) {\n            // Property: Filtered results should be a subset of original\n            let all_count = processes.len();\n            let filtered_count = processes.iter()\n                .filter(|p| p.matches_search(\u0026pattern))\n                .count();\n            \n            prop_assert!(filtered_count \u003c= all_count);\n        }\n\n        #[test]\n        fn test_port_search_validity(\n            port in 1u16..65535,\n            process_name in arb_process_name()\n        ) {\n            let port_info = create_test_port(port, network::Protocol::Tcp, Some(1234));\n            let search_pattern = format!(\":{}\", port);\n            \n            // Property: Port search should find exact matches\n            if port_info.matches_search(\u0026search_pattern) {\n                prop_assert_eq!(port_info.port, port);\n            }\n        }\n\n        #[test]\n        fn test_pid_search_validity(\n            pid in 1u32..99999,\n            process_name in arb_process_name()\n        ) {\n            let process = create_test_process(pid, \u0026process_name, 25.0, 2048);\n            let search_pattern = format!(\"#{}\", pid);\n            \n            // Property: PID search should find exact matches\n            if process.matches_search(\u0026search_pattern) {\n                prop_assert_eq!(process.pid, pid);\n            }\n        }\n\n        #[test]\n        fn test_search_empty_pattern(\n            processes in prop::collection::vec(any::\u003cu32\u003e().prop_map(|pid| {\n                create_test_process(pid, \"test\", 15.0, 512) \n            }), 0..100)\n        ) {\n            // Property: Empty search pattern behavior\n            let empty_results = processes.iter()\n                .filter(|p| p.matches_search(\"\"))\n                .count();\n            \n            // Empty pattern should either match all or none consistently\n            prop_assert!(empty_results == 0 || empty_results == processes.len());\n        }\n\n        #[test] \n        fn test_memory_search_consistency(\n            memory_mb in 1u64..8192,\n            process_name in arb_process_name()\n        ) {\n            let mut process = create_test_process(1234, \u0026process_name, 30.0, memory_mb);\n            process.memory = memory_mb;\n            \n            let search_pattern = format!(\"\u003e{}MB\", memory_mb - 1);\n            \n            // Property: Process with memory X should match \"\u003eY MB\" where Y \u003c X\n            if memory_mb \u003e 1 {\n                prop_assert!(process.matches_search(\u0026search_pattern));\n            }\n        }\n\n        #[test]\n        fn test_cpu_search_bounds(\n            cpu_percent in 0.0f64..100.0,\n            process_name in arb_process_name()\n        ) {\n            let mut process = create_test_process(1234, \u0026process_name, cpu_percent as f32, 1024);\n            process.cpu_usage = cpu_percent as f32;\n            \n            // Property: CPU searches should respect bounds\n            let high_cpu_pattern = \"\u003e95%\";\n            let low_cpu_pattern = \"\u003e5%\";\n            \n            if cpu_percent \u003e 95.0 {\n                prop_assert!(process.matches_search(high_cpu_pattern));\n            }\n            \n            if cpu_percent \u003e 5.0 {\n                prop_assert!(process.matches_search(low_cpu_pattern));\n            }\n        }\n\n        #[test]\n        fn test_name_search_case_sensitivity(\n            name in \"[a-zA-Z]{5,15}\",\n            search_term in \"[a-zA-Z]{3,10}\"\n        ) {\n            let process = create_test_process(1234, \u0026name, 20.0, 1024);\n            \n            // Property: Name search should be case-insensitive or consistently sensitive\n            let lower_match = process.matches_search(\u0026search_term.to_lowercase());\n            let upper_match = process.matches_search(\u0026search_term.to_uppercase());\n            \n            // If one case matches, behavior should be consistent\n            if lower_match || upper_match {\n                // At least basic substring matching should work\n                prop_assert!(\n                    name.to_lowercase().contains(\u0026search_term.to_lowercase()) ||\n                    !lower_match\n                );\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod data_structure_properties {\n    use super::*;\n    use crate::tui::AppState;\n\n    proptest! {\n        #[test]\n        fn test_app_state_invariants(\n            selected_index in 0usize..1000,\n            process_count in 0usize..1000\n        ) {\n            let mut app = AppState::default();\n            \n            // Add some test processes\n            for i in 0..process_count.min(100) {\n                app.processes.push(create_test_process(i as u32, \"test\", 15.0, 512));\n            }\n            app.filtered_processes = app.processes.clone();\n            \n            // Set selected index\n            if !app.filtered_processes.is_empty() {\n                let safe_index = selected_index % app.filtered_processes.len();\n                app.selected_index = safe_index;\n            }\n            \n            // Property: Selected index should never exceed bounds\n            if !app.filtered_processes.is_empty() {\n                prop_assert!(app.selected_index \u003c app.filtered_processes.len());\n            }\n            \n            // Property: Filtered processes should be subset of all processes\n            prop_assert!(app.filtered_processes.len() \u003c= app.processes.len());\n        }\n\n        #[test]\n        fn test_port_validation(\n            port in 1u16..65535,\n            protocol in prop_oneof![\"TCP\", \"UDP\"]\n        ) {\n            let port_info = create_test_port(port, network::Protocol::Tcp, Some(1234));\n            \n            // Property: Port numbers should be valid\n            prop_assert!(port_info.port \u003e 0);\n            prop_assert!(port_info.port \u003c= 65535);\n            \n            // Property: Port should have consistent string representation\n            let port_str = port_info.port.to_string();\n            prop_assert!(port_str.parse::\u003cu16\u003e().unwrap() == port_info.port);\n        }\n\n        #[test]\n        fn test_process_memory_bounds(\n            memory_mb in 0u64..16384\n        ) {\n            let mut process = create_test_process(1234, \"test\", 20.0, memory_mb);\n            process.memory = memory_mb;\n            \n            // Property: Memory usage should be non-negative\n            prop_assert!(process.memory \u003e= 0);\n            \n            // Property: Memory formatting should be consistent\n            let formatted = process.format_memory();\n            prop_assert!(!formatted.is_empty());\n            prop_assert!(formatted.contains(\"MB\") || formatted.contains(\"GB\"));\n        }\n\n        #[test]\n        fn test_search_pattern_parsing(\n            port_num in 1u16..65535,\n            pid_num in 1u32..99999,\n            cpu_val in 1u8..100,\n            mem_val in 1u32..9999\n        ) {\n            // Property: All search patterns should parse without panicking\n            let patterns = vec![\n                format!(\":{}\", port_num),\n                format!(\"#{}\", pid_num), \n                format!(\"\u003e{}%\", cpu_val),\n                format!(\"\u003e{}MB\", mem_val),\n                format!(\"\u003e{}GB\", mem_val / 1000 + 1),\n            ];\n            \n            let process = create_test_process(pid_num, \"test\", 25.0, 1024);\n            \n            for pattern in patterns {\n                // Should not panic\n                let _result = process.matches_search(\u0026pattern);\n                prop_assert!(true); // If we get here, no panic occurred\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod performance_properties {\n    use super::*;\n    use std::time::Instant;\n\n    proptest! {\n        #[test]\n        fn test_search_performance_scales_linearly(\n            process_count in 1usize..1000,\n            pattern in \"[a-zA-Z]{3,10}\"\n        ) {\n            // Generate test processes\n            let processes: Vec\u003c_\u003e = (0..process_count.min(500))\n                .map(|i| create_test_process(i as u32, \u0026format!(\"process_{}\", i), 20.0, 1024))\n                .collect();\n            \n            // Measure search time\n            let start = Instant::now();\n            let _results: Vec\u003c_\u003e = processes.iter()\n                .filter(|p| p.matches_search(\u0026pattern))\n                .collect();\n            let duration = start.elapsed();\n            \n            // Property: Search should complete in reasonable time\n            // Even for 500 processes, should be under 100ms in debug mode\n            prop_assert!(duration.as_millis() \u003c 500);\n        }\n\n        #[test]\n        fn test_memory_usage_bounds(\n            num_processes in 1usize..100\n        ) {\n            let processes: Vec\u003c_\u003e = (0..num_processes)\n                .map(|i| create_test_process(i as u32, \"test\", 15.0, 512))\n                .collect();\n            \n            // Property: Memory usage should be predictable\n            // Each process struct should not be excessively large\n            let size_estimate = std::mem::size_of::\u003cProcessInfo\u003e() * processes.len();\n            \n            // Should be reasonable memory usage (under 10MB for 100 processes)\n            prop_assert!(size_estimate \u003c 10 * 1024 * 1024);\n        }\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","testing","tui_test_utils.rs"],"content":"use crate::tui::{AppState, AppMode};\nuse crate::testing::fixtures::*;\nuse crate::testing::mocks::tui_mocks::MockBackend;\nuse crossterm::event::{KeyCode, KeyEvent, KeyModifiers};\nuse ratatui::Terminal;\n// use ratatui::layout::Rect;  // Unused import\n\n/// TUI Test Helper for comprehensive UI testing\npub struct TUITestHelper {\n    pub app: AppState,\n    pub backend: MockBackend,\n    pub terminal: Terminal\u003cMockBackend\u003e,\n}\n\nimpl TUITestHelper {\n    /// Create a new TUI test helper with mock data\n    pub fn new() -\u003e Self {\n        let mut app = AppState::default();\n        \n        // Populate with test data\n        app.processes = create_realistic_test_processes();\n        app.filtered_processes = app.processes.clone();\n        app.ports = create_realistic_test_ports();\n        app.filtered_ports = app.ports.clone();\n        app.connections = create_realistic_test_connections();\n        app.filtered_connections = app.connections.clone();\n\n        let backend = MockBackend::new(120, 40);\n        let terminal = Terminal::new(backend).unwrap();\n\n        Self {\n            app,\n            backend: MockBackend::new(120, 40),\n            terminal,\n        }\n    }\n\n    /// Create helper with custom terminal size\n    pub fn with_size(width: u16, height: u16) -\u003e Self {\n        let mut helper = Self::new();\n        helper.backend = MockBackend::new(width, height);\n        helper.terminal = Terminal::new(MockBackend::new(width, height)).unwrap();\n        helper\n    }\n\n    /// Simulate key press and handle the event\n    pub async fn press_key(\u0026mut self, key_code: KeyCode) -\u003e anyhow::Result\u003c()\u003e {\n        let key_event = KeyEvent::new(key_code, KeyModifiers::NONE);\n        self.app.handle_key_event(key_event).await\n    }\n\n    /// Simulate key press with modifiers\n    pub async fn press_key_with_modifiers(\n        \u0026mut self,\n        key_code: KeyCode,\n        modifiers: KeyModifiers,\n    ) -\u003e anyhow::Result\u003c()\u003e {\n        let key_event = KeyEvent::new(key_code, modifiers);\n        self.app.handle_key_event(key_event).await\n    }\n\n    /// Render the current app state and capture output\n    pub fn render(\u0026mut self) -\u003e anyhow::Result\u003c()\u003e {\n        self.terminal.draw(|f| {\n            crate::tui::dashboard::render_dashboard(f, \u0026mut self.app);\n        })?;\n        Ok(())\n    }\n\n    /// Check if rendered output contains specific text\n    pub fn contains_text(\u0026self, text: \u0026str) -\u003e bool {\n        self.backend.contains_text(text)\n    }\n\n    /// Get the number of render calls\n    pub fn render_count(\u0026self) -\u003e usize {\n        self.backend.draw_call_count()\n    }\n\n    /// Switch to specific mode and verify\n    pub fn switch_to_mode(\u0026mut self, mode: AppMode) {\n        self.app.switch_to_mode(mode.clone());\n        assert_eq!(self.app.mode, mode);\n    }\n\n    /// Enter search mode and type query\n    pub async fn search(\u0026mut self, query: \u0026str) -\u003e anyhow::Result\u003c()\u003e {\n        // Enter search mode\n        self.press_key(KeyCode::Char('/')).await?;\n        assert!(self.app.search_active);\n\n        // Type the query\n        for ch in query.chars() {\n            self.press_key(KeyCode::Char(ch)).await?;\n        }\n\n        // Apply search\n        self.press_key(KeyCode::Enter).await?;\n        assert!(!self.app.search_active);\n        \n        Ok(())\n    }\n\n    /// Navigate through list items\n    pub async fn navigate(\u0026mut self, direction: KeyCode, steps: usize) -\u003e anyhow::Result\u003c()\u003e {\n        for _ in 0..steps {\n            self.press_key(direction).await?;\n        }\n        Ok(())\n    }\n\n    /// Test complete workflow: navigate -\u003e search -\u003e select -\u003e action\n    pub async fn test_workflow(\u0026mut self, mode: AppMode, search_query: \u0026str) -\u003e anyhow::Result\u003c()\u003e {\n        // Switch mode\n        self.switch_to_mode(mode);\n        \n        // Render initial state\n        self.render()?;\n        \n        // Search\n        if !search_query.is_empty() {\n            self.search(search_query).await?;\n        }\n        \n        // Navigate\n        self.navigate(KeyCode::Down, 2).await?;\n        \n        // Render final state\n        self.render()?;\n        \n        Ok(())\n    }\n\n    /// Simulate terminal resize\n    pub fn resize(\u0026mut self, width: u16, height: u16) {\n        self.backend = MockBackend::new(width, height);\n        // In real usage, this would trigger an AppEvent::Resize\n    }\n\n    /// Test multiple selection workflow\n    pub async fn test_multi_selection(\u0026mut self, indices: \u0026[usize]) -\u003e anyhow::Result\u003c()\u003e {\n        for \u0026index in indices {\n            // Navigate to index\n            self.app.selected_index = index;\n            // Toggle selection\n            self.press_key(KeyCode::Char(' ')).await?;\n        }\n        \n        assert!(self.app.multi_select_mode);\n        assert_eq!(self.app.selected_items.len(), indices.len());\n        \n        Ok(())\n    }\n\n    /// Test confirmation dialog workflow\n    pub async fn test_confirmation_dialog(\u0026mut self, accept: bool) -\u003e anyhow::Result\u003c()\u003e {\n        // Trigger an action that shows confirmation dialog\n        self.switch_to_mode(AppMode::ProcessView);\n        if !self.app.filtered_processes.is_empty() {\n            self.press_key(KeyCode::Enter).await?;\n            \n            if self.app.confirmation_dialog.is_some() {\n                if accept {\n                    self.press_key(KeyCode::Char('y')).await?;\n                } else {\n                    self.press_key(KeyCode::Char('n')).await?;\n                }\n            }\n        }\n        \n        Ok(())\n    }\n\n    /// Test error handling scenarios\n    pub async fn test_error_scenarios(\u0026mut self) -\u003e anyhow::Result\u003c()\u003e {\n        // Test invalid navigation bounds\n        self.app.selected_index = 0;\n        self.press_key(KeyCode::Up).await?;\n        assert_eq!(self.app.selected_index, 0);\n\n        // Test empty search\n        self.search(\"\").await?;\n        \n        // Test invalid search patterns\n        self.search(\"invalid#$%^\").await?;\n        \n        Ok(())\n    }\n}\n\n/// Assertion helpers for TUI testing\npub struct TUIAssertions;\n\nimpl TUIAssertions {\n    /// Assert that app state is valid\n    pub fn assert_valid_state(app: \u0026AppState) {\n        // Check selection bounds\n        match app.mode {\n            AppMode::ProcessView =\u003e {\n                assert!(app.selected_index \u003c app.filtered_processes.len() || app.filtered_processes.is_empty());\n            }\n            AppMode::PortView =\u003e {\n                assert!(app.selected_index \u003c app.filtered_ports.len() || app.filtered_ports.is_empty());\n            }\n            AppMode::ConnectionView =\u003e {\n                assert!(app.selected_index \u003c app.filtered_connections.len() || app.filtered_connections.is_empty());\n            }\n            _ =\u003e {}\n        }\n\n        // Check data consistency\n        assert!(app.filtered_processes.len() \u003c= app.processes.len());\n        assert!(app.filtered_ports.len() \u003c= app.ports.len());\n        assert!(app.filtered_connections.len() \u003c= app.connections.len());\n\n        // Check search state consistency\n        if app.search_active {\n            assert!(!app.search_query.is_empty() || app.show_search_help);\n        }\n    }\n\n    /// Assert that navigation works correctly\n    pub fn assert_navigation_bounds(app: \u0026AppState, _original_index: usize, expected_index: usize) {\n        assert_eq!(app.selected_index, expected_index);\n        \n        // Ensure we didn't go out of bounds\n        match app.mode {\n            AppMode::ProcessView =\u003e {\n                if !app.filtered_processes.is_empty() {\n                    assert!(app.selected_index \u003c app.filtered_processes.len());\n                }\n            }\n            AppMode::PortView =\u003e {\n                if !app.filtered_ports.is_empty() {\n                    assert!(app.selected_index \u003c app.filtered_ports.len());\n                }\n            }\n            _ =\u003e {}\n        }\n    }\n\n    /// Assert that search results are valid\n    pub fn assert_search_results(app: \u0026AppState, query: \u0026str) {\n        if query.is_empty() {\n            return;\n        }\n\n        match app.mode {\n            AppMode::ProcessView =\u003e {\n                for process in \u0026app.filtered_processes {\n                    assert!(process.matches_search(query));\n                }\n            }\n            AppMode::PortView =\u003e {\n                for port in \u0026app.filtered_ports {\n                    assert!(port.matches_search(query));\n                }\n            }\n            AppMode::ConnectionView =\u003e {\n                for connection in \u0026app.filtered_connections {\n                    assert!(connection.matches_search(query));\n                }\n            }\n            _ =\u003e {}\n        }\n    }\n\n    /// Assert that theme switching works\n    pub fn assert_theme_switch(app: \u0026AppState, expected_theme_index: usize) {\n        assert_eq!(app.current_theme_index, expected_theme_index);\n        assert!(expected_theme_index \u003c app.themes.len());\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[tokio::test]\n    async fn test_tui_helper_creation() {\n        let helper = TUITestHelper::new();\n        assert_eq!(helper.app.mode, AppMode::Dashboard);\n        assert!(!helper.app.processes.is_empty());\n        assert!(!helper.app.ports.is_empty());\n    }\n\n    #[tokio::test]\n    async fn test_key_press_simulation() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test navigation\n        helper.switch_to_mode(AppMode::ProcessView);\n        let initial_index = helper.app.selected_index;\n        \n        helper.press_key(KeyCode::Down).await.unwrap();\n        assert!(helper.app.selected_index \u003e= initial_index);\n    }\n\n    #[tokio::test]\n    async fn test_search_workflow() {\n        let mut helper = TUITestHelper::new();\n        helper.switch_to_mode(AppMode::ProcessView);\n        \n        helper.search(\"node\").await.unwrap();\n        \n        // Should have filtered results\n        assert!(helper.app.filtered_processes.len() \u003c= helper.app.processes.len());\n        \n        // All filtered results should match search\n        TUIAssertions::assert_search_results(\u0026helper.app, \"node\");\n    }\n\n    #[tokio::test]\n    async fn test_multi_selection() {\n        let mut helper = TUITestHelper::new();\n        helper.switch_to_mode(AppMode::ProcessView);\n        \n        helper.test_multi_selection(\u0026[0, 1, 2]).await.unwrap();\n        \n        assert!(helper.app.multi_select_mode);\n        assert_eq!(helper.app.selected_items.len(), 3);\n    }\n\n    #[tokio::test]  \n    async fn test_assertions() {\n        let helper = TUITestHelper::new();\n        \n        // Test state validation\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n        \n        // Test theme validation\n        TUIAssertions::assert_theme_switch(\u0026helper.app, helper.app.current_theme_index);\n    }\n\n    #[tokio::test]\n    async fn test_error_scenarios() {\n        let mut helper = TUITestHelper::new();\n        \n        // Should not panic on error scenarios\n        helper.test_error_scenarios().await.unwrap();\n        \n        // State should remain valid\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","app.rs"],"content":"use crate::config::settings::{load_settings, save_settings, UserSettings};\nuse crate::network::{ConnectionInfo, PortInfo, PortManager};\nuse crate::process::{ProcessInfo, ProcessMonitor};\nuse crate::tui::themes::{Theme, ThemeManager};\nuse anyhow::Result;\nuse crossterm::event::{KeyCode, KeyEvent, KeyModifiers};\nuse std::collections::HashMap;\nuse std::time::{Duration, Instant};\n\n#[derive(Debug, Clone, PartialEq, Eq, Hash)]\npub enum AppMode {\n    Dashboard,\n    ProcessView,\n    PortView,\n    ConnectionView,\n    ThemeSelector,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum SortBy {\n    Name,\n    Pid,\n    Cpu,\n    Memory,\n    Port,\n    LocalAddress,\n    RemoteAddress,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum SortOrder {\n    Ascending,\n    Descending,\n}\n\npub struct AppState {\n    pub mode: AppMode,\n    pub should_quit: bool,\n    pub search_query: String,\n    pub search_active: bool,\n    pub selected_index: usize,\n    pub sort_by: SortBy,\n    pub sort_order: SortOrder,\n    pub show_help: bool,\n    pub status_message: Option\u003c(String, Instant)\u003e,\n    pub confirmation_dialog: Option\u003cConfirmationDialog\u003e,\n\n    // Data\n    pub processes: Vec\u003cProcessInfo\u003e,\n    pub filtered_processes: Vec\u003cProcessInfo\u003e,\n    pub ports: Vec\u003cPortInfo\u003e,\n    pub filtered_ports: Vec\u003cPortInfo\u003e,\n    pub connections: Vec\u003cConnectionInfo\u003e,\n    pub filtered_connections: Vec\u003cConnectionInfo\u003e,\n\n    // Monitoring\n    pub process_monitor: ProcessMonitor,\n    pub last_refresh: Instant,\n    pub refresh_interval: Duration,\n    pub auto_refresh: bool,\n\n    // Multi-selection\n    pub selected_items: Vec\u003cusize\u003e,\n    pub multi_select_mode: bool,\n\n    // CPU History for sparkline\n    pub cpu_history: Vec\u003cu64\u003e,\n\n    // Theming\n    pub themes: Vec\u003cTheme\u003e,\n    pub current_theme_index: usize,\n\n    // Navigation enhancement\n    pub view_history: Vec\u003cAppMode\u003e,\n    pub selection_memory: HashMap\u003cAppMode, usize\u003e,\n\n    // Visual enhancement\n    pub detailed_view_mode: bool,\n    pub column_headers_visible: bool,\n\n    // Search enhancement\n    pub search_suggestions: Vec\u003cString\u003e,\n    pub show_search_help: bool,\n}\n\n#[derive(Debug, Clone)]\npub struct ConfirmationDialog {\n    pub title: String,\n    pub message: String,\n    pub confirm_action: DialogAction,\n    pub warning_level: WarningLevel,\n    pub additional_info: Vec\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum WarningLevel {\n    Low,     // Green - safe operations\n    Medium,  // Yellow - caution advised\n    High,    // Orange - dangerous operations\n    Critical, // Red - system-critical processes\n}\n\n#[derive(Debug, Clone)]\npub enum DialogAction {\n    Process(u32),\n    Processes(Vec\u003cu32\u003e),\n    Port(u16),\n}\n\nimpl AppState {\n    pub fn new() -\u003e Result\u003cSelf\u003e {\n        let mut process_monitor = ProcessMonitor::new();\n        let processes = process_monitor.get_processes();\n        let ports = PortManager::get_all_ports()?;\n        let connections = PortManager::get_active_connections()?;\n        let themes = ThemeManager::get_themes();\n        let settings = load_settings().unwrap_or_default();\n        let current_theme_index = themes\n            .iter()\n            .position(|t| t.name == settings.theme_name)\n            .unwrap_or(0);\n\n        Ok(Self {\n            mode: AppMode::Dashboard,\n            should_quit: false,\n            search_query: String::new(),\n            search_active: false,\n            selected_index: 0,\n            sort_by: SortBy::Cpu,\n            sort_order: SortOrder::Descending,\n            show_help: false,\n            status_message: None,\n            confirmation_dialog: None,\n\n            filtered_processes: processes.clone(),\n            processes,\n            ports: ports.clone(),\n            filtered_ports: ports.clone(),\n            connections: connections.clone(),\n            filtered_connections: connections,\n\n            process_monitor,\n            last_refresh: Instant::now(),\n            refresh_interval: Duration::from_secs(2),\n            auto_refresh: true,\n\n            selected_items: Vec::new(),\n            multi_select_mode: false,\n\n            cpu_history: vec![0; 100], // Store last 100 CPU usage points\n\n            themes,\n            current_theme_index,\n\n            view_history: vec![AppMode::Dashboard],\n            selection_memory: HashMap::new(),\n\n            detailed_view_mode: false,\n            column_headers_visible: true,\n\n            search_suggestions: vec![\n                \":3000\".to_string(),\n                \"#1234\".to_string(), \n                \"\u003e50%\".to_string(),\n                \"\u003e1GB\".to_string(),\n                \"node\".to_string(),\n            ],\n            show_search_help: false,\n        })\n    }\n\n    pub async fn handle_key_event(\u0026mut self, key: KeyEvent) -\u003e Result\u003c()\u003e {\n        // Handle global keys first\n        if key.modifiers.contains(KeyModifiers::CONTROL) {\n            match key.code {\n                KeyCode::Char('c') =\u003e {\n                    self.should_quit = true;\n                    return Ok(());\n                }\n                KeyCode::Char('r') =\u003e {\n                    self.refresh_data()?;\n                    return Ok(());\n                }\n                _ =\u003e {}\n            }\n        }\n\n        // Handle confirmation dialog\n        if let Some(_dialog) = \u0026self.confirmation_dialog {\n            match key.code {\n                KeyCode::Char('y') | KeyCode::Char('Y') | KeyCode::Enter =\u003e {\n                    self.execute_dialog_action().await?;\n                }\n                KeyCode::Char('n') | KeyCode::Char('N') | KeyCode::Esc =\u003e {\n                    self.confirmation_dialog = None;\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        // Handle search mode with enhanced features\n        if self.search_active {\n            match key.code {\n                KeyCode::Enter =\u003e {\n                    self.apply_search_filter();\n                    self.search_active = false;\n                    self.show_search_help = false;\n                }\n                KeyCode::Esc =\u003e {\n                    self.search_active = false;\n                    self.search_query.clear();\n                    self.show_search_help = false;\n                    self.reset_filters();\n                }\n                KeyCode::F(1) =\u003e {\n                    self.show_search_help = !self.show_search_help;\n                }\n                KeyCode::Tab =\u003e {\n                    self.autocomplete_search();\n                }\n                KeyCode::Backspace =\u003e {\n                    self.search_query.pop();\n                    self.apply_search_filter();\n                }\n                KeyCode::Char(c) =\u003e {\n                    self.search_query.push(c);\n                    self.apply_search_filter();\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        // Handle normal mode keys\n        if self.mode == AppMode::ThemeSelector {\n            match key.code {\n                KeyCode::Up | KeyCode::Char('k') =\u003e {\n                    self.selected_index = self.selected_index.saturating_sub(1);\n                }\n                KeyCode::Down | KeyCode::Char('j') =\u003e {\n                    if self.selected_index \u003c self.themes.len() - 1 {\n                        self.selected_index += 1;\n                    }\n                }\n                KeyCode::Enter =\u003e {\n                    self.current_theme_index = self.selected_index;\n                    let settings = UserSettings {\n                        theme_name: self.themes[self.current_theme_index].name.clone(),\n                    };\n                    if let Err(e) = save_settings(\u0026settings) {\n                        self.set_status_message(format!(\"Error saving settings: {e}\"));\n                    }\n                    self.mode = AppMode::Dashboard; // Go back to dashboard after selection\n                }\n                KeyCode::Esc | KeyCode::Char('q') =\u003e {\n                    self.mode = AppMode::Dashboard;\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        match key.code {\n            // Navigation\n            KeyCode::Up | KeyCode::Char('k') =\u003e self.move_up(),\n            KeyCode::Down | KeyCode::Char('j') =\u003e self.move_down(),\n            KeyCode::PageUp =\u003e self.page_up(),\n            KeyCode::PageDown =\u003e self.page_down(),\n            KeyCode::Home =\u003e self.go_to_top(),\n            KeyCode::End =\u003e self.go_to_bottom(),\n\n            // Enhanced Mode switching with navigation memory\n            KeyCode::F(1) =\u003e self.switch_to_mode(AppMode::ProcessView),\n            KeyCode::F(2) =\u003e self.switch_to_mode(AppMode::PortView),\n            KeyCode::F(3) =\u003e self.switch_to_mode(AppMode::ConnectionView),\n            KeyCode::F(4) =\u003e self.switch_to_mode(AppMode::Dashboard),\n            KeyCode::Char('?') | KeyCode::F(12) =\u003e self.toggle_help(), // F12 for help to avoid F4 conflict\n\n            // Actions\n            KeyCode::Char('t') =\u003e self.switch_to_mode(AppMode::ThemeSelector),\n            KeyCode::Char('h') =\u003e self.go_back_in_history(),\n            KeyCode::Char('/') =\u003e self.enter_search_mode(),\n            KeyCode::Char('r') =\u003e self.refresh_data()?,\n            KeyCode::Char(' ') =\u003e self.toggle_selection(),\n            KeyCode::Enter =\u003e self.primary_action().await?,\n            KeyCode::Delete =\u003e self.kill_action(),\n\n            // Sorting and view options\n            KeyCode::Char('s') =\u003e self.cycle_sort(),\n            KeyCode::Char('d') =\u003e self.toggle_detailed_view(),\n            KeyCode::Char('c') =\u003e self.toggle_column_headers(),\n\n            // Quit\n            KeyCode::Char('q') | KeyCode::Esc =\u003e {\n                if self.show_help {\n                    self.show_help = false;\n                } else {\n                    self.should_quit = true;\n                }\n            }\n\n            _ =\u003e {}\n        }\n\n        Ok(())\n    }\n\n    pub fn should_refresh(\u0026self) -\u003e bool {\n        self.auto_refresh \u0026\u0026 self.last_refresh.elapsed() \u003e= self.refresh_interval\n    }\n\n    pub fn refresh_data(\u0026mut self) -\u003e Result\u003c()\u003e {\n        self.processes = self.process_monitor.get_processes();\n        self.ports = PortManager::get_all_ports()?;\n        self.connections = PortManager::get_active_connections()?;\n\n        // Update CPU history with actual system CPU usage (0-100%)\n        let system_cpu_usage = self.process_monitor.get_system_cpu_usage() as u64;\n        self.cpu_history.remove(0);\n        self.cpu_history.push(system_cpu_usage);\n\n        self.apply_current_filters();\n        self.last_refresh = Instant::now();\n        self.set_status_message(\"Data refreshed\".to_string());\n        Ok(())\n    }\n\n    pub fn apply_search_filter(\u0026mut self) {\n        if self.search_query.is_empty() {\n            self.reset_filters();\n            return;\n        }\n\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                self.filtered_processes = self\n                    .processes\n                    .iter()\n                    .filter(|p| p.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                self.sort_processes();\n            }\n            AppMode::PortView =\u003e {\n                self.filtered_ports = self\n                    .ports\n                    .iter()\n                    .filter(|p| p.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                self.sort_ports();\n            }\n            AppMode::ConnectionView =\u003e {\n                self.filtered_connections = self\n                    .connections\n                    .iter()\n                    .filter(|c| c.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                // TODO: Add sorting for connections if needed\n            }\n            _ =\u003e {}\n        }\n\n        self.selected_index = 0;\n    }\n\n    fn reset_filters(\u0026mut self) {\n        self.filtered_processes = self.processes.clone();\n        self.filtered_ports = self.ports.clone();\n        self.filtered_connections = self.connections.clone();\n        self.apply_current_sorts();\n        if self.mode != AppMode::ThemeSelector {\n            self.selected_index = 0;\n        }\n    }\n\n    fn apply_current_filters(\u0026mut self) {\n        if self.search_query.is_empty() {\n            self.reset_filters();\n        } else {\n            self.apply_search_filter();\n        }\n    }\n\n    fn apply_current_sorts(\u0026mut self) {\n        self.sort_processes();\n        self.sort_ports();\n        self.sort_connections();\n    }\n\n    fn sort_processes(\u0026mut self) {\n        match self.sort_by {\n            SortBy::Name =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.name.cmp(\u0026b.name);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Pid =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.pid.cmp(\u0026b.pid);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Cpu =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a\n                        .cpu_usage\n                        .partial_cmp(\u0026b.cpu_usage)\n                        .unwrap_or(std::cmp::Ordering::Equal);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Memory =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.memory.cmp(\u0026b.memory);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            _ =\u003e {}\n        }\n    }\n\n    fn sort_ports(\u0026mut self) {\n        if self.sort_by == SortBy::Port {\n            self.filtered_ports.sort_by(|a, b| {\n                let cmp = a.port.cmp(\u0026b.port);\n                if self.sort_order == SortOrder::Ascending {\n                    cmp\n                } else {\n                    cmp.reverse()\n                }\n            });\n        }\n    }\n\n    fn sort_connections(\u0026mut self) {\n        match self.sort_by {\n            SortBy::LocalAddress =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.local_address.cmp(\u0026b.local_address);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::RemoteAddress =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.remote_address.cmp(\u0026b.remote_address);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Pid =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.pid.cmp(\u0026b.pid);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            _ =\u003e {}\n        }\n    }\n\n    // Navigation methods\n    fn move_up(\u0026mut self) {\n        if self.selected_index \u003e 0 {\n            self.selected_index -= 1;\n        }\n    }\n\n    fn move_down(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            AppMode::ConnectionView =\u003e self.filtered_connections.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n\n        if self.selected_index \u003c max_index {\n            self.selected_index += 1;\n        }\n    }\n\n    fn page_up(\u0026mut self) {\n        self.selected_index = self.selected_index.saturating_sub(10);\n    }\n\n    fn page_down(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n\n        self.selected_index = std::cmp::min(self.selected_index + 10, max_index);\n    }\n\n    fn go_to_top(\u0026mut self) {\n        self.selected_index = 0;\n    }\n\n    fn go_to_bottom(\u0026mut self) {\n        self.selected_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n    }\n\n    fn enter_search_mode(\u0026mut self) {\n        self.search_active = true;\n        self.search_query.clear();\n        self.show_search_help = true; // Show help by default when entering search\n        self.set_status_message(\"Search mode - F1: toggle help, Tab: autocomplete, Enter: apply\".to_string());\n    }\n\n    // Enhanced search methods\n    fn autocomplete_search(\u0026mut self) {\n        if self.search_query.is_empty() {\n            // Show first suggestion\n            if let Some(suggestion) = self.search_suggestions.first() {\n                self.search_query = suggestion.clone();\n                self.apply_search_filter();\n            }\n        } else {\n            // Find next matching suggestion\n            let current_suggestion = self.search_suggestions\n                .iter()\n                .find(|s| s.starts_with(\u0026self.search_query))\n                .cloned();\n                \n            if let Some(suggestion) = current_suggestion {\n                self.search_query = suggestion;\n                self.apply_search_filter();\n            }\n        }\n    }\n\n    pub fn get_search_pattern_help(\u0026self) -\u003e Vec\u003c(\u0026'static str, \u0026'static str)\u003e {\n        vec![\n            (\":3000\", \"Find processes using port 3000\"),\n            (\"#1234\", \"Search by Process ID\"),\n            (\"\u003e50%\", \"Processes using \u003e50% CPU\"),\n            (\"\u003e1GB\", \"Processes using \u003e1GB memory\"),\n            (\"node\", \"Search by process name\"),\n            (\"3000-8000\", \"Port range search\"),\n        ]\n    }\n\n    fn toggle_help(\u0026mut self) {\n        self.show_help = !self.show_help;\n    }\n\n    fn toggle_selection(\u0026mut self) {\n        if !self.multi_select_mode {\n            self.multi_select_mode = true;\n            self.selected_items.clear();\n        }\n\n        if self.selected_items.contains(\u0026self.selected_index) {\n            self.selected_items.retain(|\u0026x| x != self.selected_index);\n        } else {\n            self.selected_items.push(self.selected_index);\n        }\n\n        if self.selected_items.is_empty() {\n            self.multi_select_mode = false;\n        }\n    }\n\n    fn cycle_sort(\u0026mut self) {\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                self.sort_by = match self.sort_by {\n                    SortBy::Name =\u003e SortBy::Pid,\n                    SortBy::Pid =\u003e SortBy::Cpu,\n                    SortBy::Cpu =\u003e SortBy::Memory,\n                    SortBy::Memory =\u003e SortBy::Name,\n                    _ =\u003e SortBy::Name,\n                };\n            }\n            AppMode::PortView =\u003e {\n                self.sort_by = SortBy::Port;\n                self.sort_order = match self.sort_order {\n                    SortOrder::Ascending =\u003e SortOrder::Descending,\n                    SortOrder::Descending =\u003e SortOrder::Ascending,\n                };\n            }\n            AppMode::ConnectionView =\u003e {\n                self.sort_by = match self.sort_by {\n                    SortBy::LocalAddress =\u003e SortBy::RemoteAddress,\n                    SortBy::RemoteAddress =\u003e SortBy::Pid,\n                    _ =\u003e SortBy::LocalAddress,\n                };\n            }\n            _ =\u003e {}\n        }\n\n        self.apply_current_sorts();\n        self.set_status_message(format!(\n            \"Sorted by {:?} ({})\",\n            self.sort_by,\n            if self.sort_order == SortOrder::Ascending {\n                \"â†‘\"\n            } else {\n                \"â†“\"\n            }\n        ));\n    }\n\n    async fn primary_action(\u0026mut self) -\u003e Result\u003c()\u003e {\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                if let Some(process) = self.filtered_processes.get(self.selected_index) {\n                    self.show_kill_process_dialog(process.pid);\n                }\n            }\n            AppMode::PortView =\u003e {\n                if let Some(port) = self.filtered_ports.get(self.selected_index) {\n                    self.show_kill_port_dialog(port.port);\n                }\n            }\n            _ =\u003e {}\n        }\n        Ok(())\n    }\n\n    fn kill_action(\u0026mut self) {\n        if self.multi_select_mode \u0026\u0026 !self.selected_items.is_empty() {\n            self.show_kill_multiple_dialog();\n        } else {\n            match self.mode {\n                AppMode::ProcessView =\u003e {\n                    if let Some(process) = self.filtered_processes.get(self.selected_index) {\n                        self.show_kill_process_dialog(process.pid);\n                    }\n                }\n                AppMode::PortView =\u003e {\n                    if let Some(port) = self.filtered_ports.get(self.selected_index) {\n                        self.show_kill_port_dialog(port.port);\n                    }\n                }\n                _ =\u003e {}\n            }\n        }\n    }\n\n    fn show_kill_process_dialog(\u0026mut self, pid: u32) {\n        let process = self.processes.iter().find(|p| p.pid == pid);\n        let process_name = process\n            .map(|p| p.name.clone())\n            .unwrap_or_else(|| format!(\"PID {pid}\"));\n\n        // Determine warning level based on process characteristics\n        let (warning_level, additional_info) = if let Some(p) = process {\n            self.assess_process_safety(p)\n        } else {\n            (WarningLevel::Medium, vec![\"Process information unavailable\".to_string()])\n        };\n\n        let warning_emoji = match warning_level {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\",\n            WarningLevel::High =\u003e \"ğŸŸ \",\n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Process\", warning_emoji),\n            message: format!(\n                \"Kill process '{process_name}' (PID: {pid})?\\n\\nPress 'y' to confirm, 'n' to cancel\"\n            ),\n            confirm_action: DialogAction::Process(pid),\n            warning_level,\n            additional_info,\n        });\n    }\n\n    fn assess_process_safety(\u0026self, process: \u0026ProcessInfo) -\u003e (WarningLevel, Vec\u003cString\u003e) {\n        let mut info = Vec::new();\n        let mut warning_level = WarningLevel::Low;\n\n        // Check for system-critical processes\n        let critical_processes = [\"kernel_task\", \"launchd\", \"WindowServer\", \"systemd\", \"init\"];\n        if critical_processes.iter().any(|\u0026name| process.name.contains(name)) {\n            warning_level = WarningLevel::Critical;\n            info.push(\"âš ï¸  CRITICAL: This is a system process!\".to_string());\n            info.push(\"Killing this may cause system instability.\".to_string());\n        }\n\n        // Check for high resource usage (might be important)\n        if process.cpu_usage \u003e 50.0 || process.memory \u003e 1024 * 1024 * 1024 {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(format!(\"High resource usage: {:.1}% CPU, {}\", \n                             process.cpu_usage, process.format_memory()));\n        }\n\n        // Check for development processes\n        let dev_processes = [\"node\", \"npm\", \"python\", \"ruby\", \"java\", \"docker\"];\n        if dev_processes.iter().any(|\u0026name| process.name.to_lowercase().contains(name)) {\n            if warning_level \u003c WarningLevel::Medium {\n                warning_level = WarningLevel::Medium;\n            }\n            info.push(\"This appears to be a development process.\".to_string());\n        }\n\n        // Count child processes (simulated - would need actual process tree)\n        if process.pid \u003c 1000 {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(\"Low PID number - may be a system service.\".to_string());\n        }\n\n        if info.is_empty() {\n            info.push(\"Process appears safe to terminate.\".to_string());\n        }\n\n        (warning_level, info)\n    }\n\n    fn show_kill_port_dialog(\u0026mut self, port: u16) {\n        let (warning_level, additional_info) = self.assess_port_safety(port);\n        \n        let warning_emoji = match warning_level {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\", \n            WarningLevel::High =\u003e \"ğŸŸ \",\n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Process on Port\", warning_emoji),\n            message: format!(\n                \"Kill process using port {port}?\\n\\nPress 'y' to confirm, 'n' to cancel\"\n            ),\n            confirm_action: DialogAction::Port(port),\n            warning_level,\n            additional_info,\n        });\n    }\n\n    fn assess_port_safety(\u0026self, port: u16) -\u003e (WarningLevel, Vec\u003cString\u003e) {\n        let mut info = Vec::new();\n        let mut warning_level = WarningLevel::Low;\n\n        // Check for system/critical ports\n        let critical_ports = [22, 25, 53, 80, 443, 993, 995];\n        if critical_ports.contains(\u0026port) {\n            warning_level = WarningLevel::Critical;\n            info.push(\"âš ï¸  CRITICAL: This is a system service port!\".to_string());\n        }\n\n        // Check for common development ports\n        let dev_ports = [3000, 3001, 4200, 5000, 8000, 8080, 9000];\n        if dev_ports.contains(\u0026port) {\n            warning_level = WarningLevel::Medium;\n            info.push(\"This appears to be a development server.\".to_string());\n        }\n\n        // Check for database ports\n        let db_ports = [3306, 5432, 27017, 6379];\n        if db_ports.contains(\u0026port) {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(\"âš ï¸  This is a database service port.\".to_string());\n            info.push(\"Killing may cause data loss or application errors.\".to_string());\n        }\n\n        if info.is_empty() {\n            info.push(\"Port appears safe to terminate.\".to_string());\n        }\n\n        (warning_level, info)\n    }\n\n    fn show_kill_multiple_dialog(\u0026mut self) {\n        let count = self.selected_items.len();\n        let pids: Vec\u003cu32\u003e = self.selected_items\n            .iter()\n            .filter_map(|\u0026index| match self.mode {\n                AppMode::ProcessView =\u003e self.filtered_processes.get(index).map(|p| p.pid),\n                _ =\u003e None,\n            })\n            .collect();\n\n        // Assess danger level for batch operation\n        let mut highest_warning = WarningLevel::Low;\n        let mut warnings = Vec::new();\n        \n        for \u0026index in \u0026self.selected_items {\n            if let Some(process) = self.filtered_processes.get(index) {\n                let (warning_level, _) = self.assess_process_safety(process);\n                if warning_level \u003e highest_warning {\n                    highest_warning = warning_level;\n                }\n            }\n        }\n\n        warnings.push(format!(\"This will kill {} processes simultaneously.\", count));\n        warnings.push(\"Review each process carefully before confirming.\".to_string());\n        \n        if highest_warning \u003e= WarningLevel::High {\n            warnings.push(\"âš ï¸  Some processes may be critical!\".to_string());\n        }\n\n        let warning_emoji = match highest_warning {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\",\n            WarningLevel::High =\u003e \"ğŸŸ \", \n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Multiple Processes\", warning_emoji),\n            message: format!(\"Kill {count} selected processes?\\n\\nPress 'y' to confirm, 'n' to cancel\"),\n            confirm_action: DialogAction::Processes(pids),\n            warning_level: highest_warning,\n            additional_info: warnings,\n        });\n    }\n\n    async fn execute_dialog_action(\u0026mut self) -\u003e Result\u003c()\u003e {\n        if let Some(dialog) = self.confirmation_dialog.take() {\n            match dialog.confirm_action {\n                DialogAction::Process(pid) =\u003e {\n                    match crate::process::ProcessKiller::kill_process_by_pid(pid, false).await {\n                        Ok(()) =\u003e {\n                            self.set_status_message(format!(\"Successfully killed process {pid}\"));\n                            self.refresh_data()?;\n                        }\n                        Err(e) =\u003e {\n                            self.set_status_message(format!(\"Failed to kill process {pid}: {e}\"));\n                        }\n                    }\n                }\n                DialogAction::Port(port) =\u003e {\n                    match crate::process::ProcessKiller::kill_process_by_port(port).await {\n                        Ok(pid) =\u003e {\n                            self.set_status_message(format!(\n                                \"Successfully killed process {pid} using port {port}\"\n                            ));\n                            self.refresh_data()?;\n                        }\n                        Err(e) =\u003e {\n                            self.set_status_message(format!(\"Failed to kill port {port}: {e}\"));\n                        }\n                    }\n                }\n                DialogAction::Processes(pids) =\u003e {\n                    let mut success_count = 0;\n                    for pid in pids {\n                        if crate::process::ProcessKiller::kill_process_by_pid(pid, false)\n                            .await\n                            .is_ok()\n                        {\n                            success_count += 1;\n                        }\n                    }\n                    self.set_status_message(format!(\"Killed {success_count} processes\"));\n                    self.multi_select_mode = false;\n                    self.selected_items.clear();\n                    self.refresh_data()?;\n                }\n            }\n        }\n        Ok(())\n    }\n\n    pub fn set_status_message(\u0026mut self, message: String) {\n        self.status_message = Some((message, Instant::now()));\n    }\n\n    // Enhanced navigation methods\n    pub fn switch_to_mode(\u0026mut self, new_mode: AppMode) {\n        if new_mode != self.mode {\n            // Save current selection for this mode\n            self.selection_memory.insert(self.mode.clone(), self.selected_index);\n            \n            // Add to history if not already the last item\n            if self.view_history.last() != Some(\u0026self.mode) {\n                self.view_history.push(self.mode.clone());\n                // Keep history size manageable\n                if self.view_history.len() \u003e 10 {\n                    self.view_history.remove(0);\n                }\n            }\n\n            // Switch to new mode\n            self.mode = new_mode.clone();\n            \n            // Restore selection for new mode if available\n            if let Some(\u0026saved_selection) = self.selection_memory.get(\u0026new_mode) {\n                self.selected_index = saved_selection;\n                // Validate selection is still within bounds\n                self.validate_selection_bounds();\n            } else {\n                self.selected_index = 0;\n            }\n\n            self.set_status_message(format!(\"Switched to {:?} view\", new_mode));\n        }\n    }\n\n    pub fn go_back_in_history(\u0026mut self) {\n        if self.view_history.len() \u003e 1 {\n            // Remove current mode from history and go to previous\n            self.view_history.pop();\n            if let Some(previous_mode) = self.view_history.last().cloned() {\n                self.switch_to_mode(previous_mode);\n                self.set_status_message(\"Navigated back in history\".to_string());\n            }\n        } else {\n            self.set_status_message(\"No previous view in history\".to_string());\n        }\n    }\n\n    fn validate_selection_bounds(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            AppMode::ConnectionView =\u003e self.filtered_connections.len().saturating_sub(1),\n            AppMode::ThemeSelector =\u003e self.themes.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n        \n        if self.selected_index \u003e max_index {\n            self.selected_index = max_index;\n        }\n    }\n\n    // Visual enhancement methods\n    pub fn toggle_detailed_view(\u0026mut self) {\n        self.detailed_view_mode = !self.detailed_view_mode;\n        let mode_text = if self.detailed_view_mode { \"detailed\" } else { \"compact\" };\n        self.set_status_message(format!(\"Switched to {} view mode\", mode_text));\n    }\n\n    pub fn toggle_column_headers(\u0026mut self) {\n        self.column_headers_visible = !self.column_headers_visible;\n        let status = if self.column_headers_visible { \"shown\" } else { \"hidden\" };\n        self.set_status_message(format!(\"Column headers {}\", status));\n    }\n\n    pub fn get_priority_indicator(\u0026self, process: \u0026ProcessInfo) -\u003e \u0026'static str {\n        if process.cpu_usage \u003e 50.0 {\n            \"ğŸ”´\" // High CPU\n        } else if process.cpu_usage \u003e 20.0 {\n            \"ğŸŸ¡\" // Medium CPU\n        } else if process.memory \u003e 1024 * 1024 * 1024 { // \u003e 1GB\n            \"ğŸŸ \" // High memory\n        } else {\n            \" \"  // Normal\n        }\n    }\n\n    pub fn get_status_message(\u0026self) -\u003e Option\u003c\u0026str\u003e {\n        if let Some((ref message, timestamp)) = self.status_message {\n            if timestamp.elapsed() \u003c Duration::from_secs(5) {\n                Some(message.as_str())\n            } else {\n                None\n            }\n        } else {\n            None\n        }\n    }\n}\n\nimpl Default for AppState {\n    fn default() -\u003e Self {\n        Self::new().expect(\"Failed to create default AppState\")\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crossterm::event::{KeyCode, KeyModifiers};\n\n    fn create_test_app_state() -\u003e AppState {\n        // Create a minimal test app state without system calls\n        let themes = ThemeManager::get_themes();\n        let settings = UserSettings::default();\n        let current_theme_index = themes\n            .iter()\n            .position(|t| t.name == settings.theme_name)\n            .unwrap_or(0);\n\n        AppState {\n            mode: AppMode::Dashboard,\n            should_quit: false,\n            search_query: String::new(),\n            search_active: false,\n            selected_index: 0,\n            sort_by: SortBy::Cpu,\n            sort_order: SortOrder::Descending,\n            show_help: false,\n            status_message: None,\n            confirmation_dialog: None,\n\n            processes: vec![],\n            filtered_processes: vec![],\n            ports: vec![],\n            filtered_ports: vec![],\n            connections: vec![],\n            filtered_connections: vec![],\n\n            process_monitor: ProcessMonitor::new(),\n            last_refresh: Instant::now(),\n            refresh_interval: Duration::from_secs(2),\n            auto_refresh: true,\n\n            selected_items: Vec::new(),\n            multi_select_mode: false,\n\n            cpu_history: vec![0; 100],\n            themes,\n            current_theme_index,\n            \n            view_history: vec![AppMode::Dashboard],\n            selection_memory: HashMap::new(),\n            detailed_view_mode: false,\n            column_headers_visible: true,\n            search_suggestions: vec![\n                \":3000\".to_string(),\n                \"#1234\".to_string(), \n                \"\u003e50%\".to_string(),\n                \"\u003e1GB\".to_string(),\n                \"node\".to_string(),\n            ],\n            show_search_help: false,\n        }\n    }\n\n    #[test]\n    fn test_app_state_creation() {\n        let app = create_test_app_state();\n        assert_eq!(app.mode, AppMode::Dashboard);\n        assert!(!app.should_quit);\n        assert!(!app.search_active);\n        assert_eq!(app.selected_index, 0);\n        assert_eq!(app.sort_by, SortBy::Cpu);\n        assert_eq!(app.sort_order, SortOrder::Descending);\n    }\n\n    #[test]\n    fn test_mode_switching() {\n        let mut app = create_test_app_state();\n\n        // Test switching to different modes\n        app.mode = AppMode::ProcessView;\n        assert_eq!(app.mode, AppMode::ProcessView);\n\n        app.mode = AppMode::PortView;\n        assert_eq!(app.mode, AppMode::PortView);\n\n        app.mode = AppMode::ConnectionView;\n        assert_eq!(app.mode, AppMode::ConnectionView);\n    }\n\n    #[tokio::test]\n    async fn test_key_event_handling_quit() {\n        let mut app = create_test_app_state();\n\n        // Test Ctrl+C to quit\n        let key_event = KeyEvent::new(KeyCode::Char('c'), KeyModifiers::CONTROL);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(app.should_quit);\n    }\n\n    #[tokio::test]\n    async fn test_key_event_handling_navigation() {\n        let mut app = create_test_app_state();\n\n        // Add some test data\n        app.filtered_processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"test1\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"test2\".to_string(),\n                cpu_usage: 20.0,\n                memory: 2000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        app.mode = AppMode::ProcessView;\n        assert_eq!(app.selected_index, 0);\n\n        // Test moving down\n        let key_event = KeyEvent::new(KeyCode::Down, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.selected_index, 1);\n\n        // Test moving up\n        let key_event = KeyEvent::new(KeyCode::Up, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.selected_index, 0);\n    }\n\n    #[tokio::test]\n    async fn test_search_functionality() {\n        let mut app = create_test_app_state();\n\n        // Enter search mode\n        let key_event = KeyEvent::new(KeyCode::Char('/'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(app.search_active);\n\n        // Type search query\n        let key_event = KeyEvent::new(KeyCode::Char('t'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"t\");\n\n        let key_event = KeyEvent::new(KeyCode::Char('e'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"te\");\n\n        // Test backspace\n        let key_event = KeyEvent::new(KeyCode::Backspace, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"t\");\n\n        // Exit search mode\n        let key_event = KeyEvent::new(KeyCode::Esc, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(!app.search_active);\n        assert!(app.search_query.is_empty());\n    }\n\n    #[test]\n    fn test_multi_selection() {\n        let mut app = create_test_app_state();\n\n        // Start multi-selection\n        app.toggle_selection();\n        assert!(app.multi_select_mode);\n        assert!(app.selected_items.contains(\u00260));\n\n        // Add another selection\n        app.selected_index = 1;\n        app.toggle_selection();\n        assert!(app.selected_items.contains(\u00261));\n        assert_eq!(app.selected_items.len(), 2);\n\n        // Remove selection\n        app.selected_index = 0;\n        app.toggle_selection();\n        assert!(!app.selected_items.contains(\u00260));\n        assert_eq!(app.selected_items.len(), 1);\n\n        // Clear all selections\n        app.selected_index = 1;\n        app.toggle_selection();\n        assert!(!app.multi_select_mode);\n        assert!(app.selected_items.is_empty());\n    }\n\n    #[test]\n    fn test_sorting_functionality() {\n        let mut app = create_test_app_state();\n\n        // Test initial sort state\n        assert_eq!(app.sort_by, SortBy::Cpu);\n        assert_eq!(app.sort_order, SortOrder::Descending);\n\n        // Switch to process view and cycle sort\n        app.mode = AppMode::ProcessView;\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Memory); // Cpu -\u003e Memory\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Name); // Memory -\u003e Name\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Pid); // Name -\u003e Pid\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Cpu); // Pid -\u003e Cpu (back to start)\n    }\n\n    #[test]\n    fn test_status_message() {\n        let mut app = create_test_app_state();\n\n        // Set status message\n        app.set_status_message(\"Test message\".to_string());\n        assert_eq!(app.get_status_message(), Some(\"Test message\"));\n\n        // Message should expire after some time (tested by setting old timestamp)\n        if let Some((_, ref mut timestamp)) = app.status_message {\n            *timestamp = Instant::now() - Duration::from_secs(10);\n        }\n        assert_eq!(app.get_status_message(), None);\n    }\n\n    #[test]\n    fn test_dialog_functionality() {\n        let mut app = create_test_app_state();\n\n        // Show kill process dialog\n        app.show_kill_process_dialog(1234);\n        assert!(app.confirmation_dialog.is_some());\n\n        if let Some(ref dialog) = app.confirmation_dialog {\n            assert!(dialog.title.contains(\"Kill Process\"));\n            assert!(dialog.message.contains(\"1234\"));\n        }\n\n        // Show kill port dialog\n        app.show_kill_port_dialog(8080);\n        assert!(app.confirmation_dialog.is_some());\n\n        if let Some(ref dialog) = app.confirmation_dialog {\n            assert!(dialog.title.contains(\"Kill Process on Port\"));\n            assert!(dialog.message.contains(\"8080\"));\n        }\n    }\n\n    #[test]\n    fn test_refresh_timing() {\n        let mut app = create_test_app_state();\n\n        // Should not need refresh immediately after creation\n        assert!(!app.should_refresh());\n\n        // Set old refresh time to trigger refresh\n        app.last_refresh = Instant::now() - Duration::from_secs(5);\n        assert!(app.should_refresh());\n\n        // Disable auto-refresh\n        app.auto_refresh = false;\n        assert!(!app.should_refresh());\n    }\n\n    #[test]\n    fn test_navigation_bounds() {\n        let mut app = create_test_app_state();\n\n        // Add test processes\n        app.filtered_processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"test1\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"test2\".to_string(),\n                cpu_usage: 20.0,\n                memory: 2000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        app.mode = AppMode::ProcessView;\n\n        // Test navigation bounds\n        app.selected_index = 0;\n        app.move_up(); // Should stay at 0\n        assert_eq!(app.selected_index, 0);\n\n        app.move_down();\n        assert_eq!(app.selected_index, 1);\n\n        app.move_down(); // Should stay at 1 (last item)\n        assert_eq!(app.selected_index, 1);\n\n        // Test go to top/bottom\n        app.go_to_top();\n        assert_eq!(app.selected_index, 0);\n\n        app.go_to_bottom();\n        assert_eq!(app.selected_index, 1);\n    }\n\n    #[test]\n    fn test_filter_application() {\n        let mut app = create_test_app_state();\n\n        // Add test data\n        app.processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"node\".to_string(),\n                cpu_usage: 50.0,\n                memory: 1024 * 1024 * 500, // 500MB\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"python\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1024 * 1024 * 100, // 100MB\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        // Test search filtering\n        app.mode = AppMode::ProcessView; // Set the mode first\n        app.search_query = \"node\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_processes.len(), 1);\n        assert_eq!(app.filtered_processes[0].name, \"node\");\n\n        // Test CPU filtering\n        app.search_query = \"\u003e30%\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_processes.len(), 1);\n        assert_eq!(app.filtered_processes[0].name, \"node\");\n\n        // Reset filters\n        app.reset_filters();\n        assert_eq!(app.filtered_processes.len(), 2);\n    }\n\n    #[test]\n    fn test_connection_view_filtering() {\n        use crate::network::Protocol;\n\n        let mut app = create_test_app_state();\n        app.connections = vec![\n            ConnectionInfo {\n                protocol: Protocol::Tcp,\n                local_address: \"127.0.0.1:1234\".parse().unwrap(),\n                remote_address: \"1.1.1.1:443\".parse().unwrap(),\n                pid: Some(100),\n                process_name: Some(\"chrome\".to_string()),\n            },\n            ConnectionInfo {\n                protocol: Protocol::Tcp,\n                local_address: \"127.0.0.1:5678\".parse().unwrap(),\n                remote_address: \"2.2.2.2:80\".parse().unwrap(),\n                pid: Some(200),\n                process_name: Some(\"firefox\".to_string()),\n            },\n        ];\n\n        app.mode = AppMode::ConnectionView;\n        app.reset_filters(); // Initialize filtered_connections\n\n        // Test search by process name\n        app.search_query = \"chrome\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n        assert_eq!(\n            app.filtered_connections[0].process_name.as_deref(),\n            Some(\"chrome\")\n        );\n\n        // Test search by IP address\n        app.search_query = \"2.2.2.2\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n        assert_eq!(app.filtered_connections[0].pid, Some(200));\n\n        // Test search by PID\n        app.search_query = \"100\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n\n        // Reset filters\n        app.search_query = \"\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 2);\n    }\n}\n","traces":[{"line":111,"address":[],"length":0,"stats":{"Line":37}},{"line":112,"address":[],"length":0,"stats":{"Line":74}},{"line":113,"address":[],"length":0,"stats":{"Line":111}},{"line":114,"address":[],"length":0,"stats":{"Line":74}},{"line":115,"address":[],"length":0,"stats":{"Line":37}},{"line":120,"address":[],"length":0,"stats":{"Line":148}},{"line":172,"address":[],"length":0,"stats":{"Line":226}},{"line":174,"address":[],"length":0,"stats":{"Line":226}},{"line":175,"address":[],"length":0,"stats":{"Line":4}},{"line":177,"address":[],"length":0,"stats":{"Line":3}},{"line":181,"address":[],"length":0,"stats":{"Line":2}},{"line":182,"address":[],"length":0,"stats":{"Line":1}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":111}},{"line":192,"address":[],"length":0,"stats":{"Line":1}},{"line":194,"address":[],"length":0,"stats":{"Line":1}},{"line":195,"address":[],"length":0,"stats":{"Line":1}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":2}},{"line":203,"address":[],"length":0,"stats":{"Line":107}},{"line":204,"address":[],"length":0,"stats":{"Line":52}},{"line":205,"address":[],"length":0,"stats":{"Line":6}},{"line":206,"address":[],"length":0,"stats":{"Line":18}},{"line":207,"address":[],"length":0,"stats":{"Line":6}},{"line":208,"address":[],"length":0,"stats":{"Line":6}},{"line":210,"address":[],"length":0,"stats":{"Line":3}},{"line":211,"address":[],"length":0,"stats":{"Line":6}},{"line":212,"address":[],"length":0,"stats":{"Line":9}},{"line":213,"address":[],"length":0,"stats":{"Line":6}},{"line":214,"address":[],"length":0,"stats":{"Line":3}},{"line":216,"address":[],"length":0,"stats":{"Line":1}},{"line":217,"address":[],"length":0,"stats":{"Line":1}},{"line":219,"address":[],"length":0,"stats":{"Line":1}},{"line":220,"address":[],"length":0,"stats":{"Line":1}},{"line":222,"address":[],"length":0,"stats":{"Line":3}},{"line":223,"address":[],"length":0,"stats":{"Line":3}},{"line":224,"address":[],"length":0,"stats":{"Line":3}},{"line":226,"address":[],"length":0,"stats":{"Line":76}},{"line":227,"address":[],"length":0,"stats":{"Line":152}},{"line":228,"address":[],"length":0,"stats":{"Line":38}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":52}},{"line":237,"address":[],"length":0,"stats":{"Line":3}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":3}},{"line":243,"address":[],"length":0,"stats":{"Line":1}},{"line":247,"address":[],"length":0,"stats":{"Line":1}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":1}},{"line":257,"address":[],"length":0,"stats":{"Line":1}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":3}},{"line":266,"address":[],"length":0,"stats":{"Line":12}},{"line":267,"address":[],"length":0,"stats":{"Line":14}},{"line":268,"address":[],"length":0,"stats":{"Line":2}},{"line":269,"address":[],"length":0,"stats":{"Line":2}},{"line":270,"address":[],"length":0,"stats":{"Line":2}},{"line":271,"address":[],"length":0,"stats":{"Line":2}},{"line":274,"address":[],"length":0,"stats":{"Line":3}},{"line":275,"address":[],"length":0,"stats":{"Line":3}},{"line":276,"address":[],"length":0,"stats":{"Line":3}},{"line":277,"address":[],"length":0,"stats":{"Line":3}},{"line":278,"address":[],"length":0,"stats":{"Line":2}},{"line":281,"address":[],"length":0,"stats":{"Line":6}},{"line":282,"address":[],"length":0,"stats":{"Line":2}},{"line":283,"address":[],"length":0,"stats":{"Line":18}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":16}},{"line":286,"address":[],"length":0,"stats":{"Line":3}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":2}},{"line":291,"address":[],"length":0,"stats":{"Line":2}},{"line":292,"address":[],"length":0,"stats":{"Line":2}},{"line":296,"address":[],"length":0,"stats":{"Line":3}},{"line":297,"address":[],"length":0,"stats":{"Line":1}},{"line":299,"address":[],"length":0,"stats":{"Line":1}},{"line":303,"address":[],"length":0,"stats":{"Line":2}},{"line":306,"address":[],"length":0,"stats":{"Line":52}},{"line":309,"address":[],"length":0,"stats":{"Line":6}},{"line":310,"address":[],"length":0,"stats":{"Line":10}},{"line":313,"address":[],"length":0,"stats":{"Line":1}},{"line":314,"address":[],"length":0,"stats":{"Line":3}},{"line":315,"address":[],"length":0,"stats":{"Line":2}},{"line":316,"address":[],"length":0,"stats":{"Line":1}},{"line":329,"address":[],"length":0,"stats":{"Line":60}},{"line":330,"address":[],"length":0,"stats":{"Line":120}},{"line":331,"address":[],"length":0,"stats":{"Line":8}},{"line":332,"address":[],"length":0,"stats":{"Line":4}},{"line":337,"address":[],"length":0,"stats":{"Line":14}},{"line":340,"address":[],"length":0,"stats":{"Line":234}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":12}},{"line":356,"address":[],"length":0,"stats":{"Line":6}},{"line":357,"address":[],"length":0,"stats":{"Line":6}},{"line":358,"address":[],"length":0,"stats":{"Line":42}},{"line":359,"address":[],"length":0,"stats":{"Line":6}},{"line":360,"address":[],"length":0,"stats":{"Line":6}},{"line":363,"address":[],"length":0,"stats":{"Line":36}},{"line":369,"address":[],"length":0,"stats":{"Line":12}},{"line":370,"address":[],"length":0,"stats":{"Line":36}},{"line":371,"address":[],"length":0,"stats":{"Line":36}},{"line":372,"address":[],"length":0,"stats":{"Line":36}},{"line":373,"address":[],"length":0,"stats":{"Line":24}},{"line":374,"address":[],"length":0,"stats":{"Line":24}},{"line":375,"address":[],"length":0,"stats":{"Line":12}},{"line":379,"address":[],"length":0,"stats":{"Line":1}},{"line":380,"address":[],"length":0,"stats":{"Line":3}},{"line":381,"address":[],"length":0,"stats":{"Line":1}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":21}},{"line":388,"address":[],"length":0,"stats":{"Line":42}},{"line":389,"address":[],"length":0,"stats":{"Line":42}},{"line":390,"address":[],"length":0,"stats":{"Line":42}},{"line":393,"address":[],"length":0,"stats":{"Line":35}},{"line":394,"address":[],"length":0,"stats":{"Line":35}},{"line":396,"address":[],"length":0,"stats":{"Line":2}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":401,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":4}},{"line":407,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":416,"address":[],"length":0,"stats":{"Line":856}},{"line":417,"address":[],"length":0,"stats":{"Line":1600}},{"line":418,"address":[],"length":0,"stats":{"Line":800}},{"line":419,"address":[],"length":0,"stats":{"Line":1600}},{"line":420,"address":[],"length":0,"stats":{"Line":1600}},{"line":421,"address":[],"length":0,"stats":{"Line":800}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":800}},{"line":429,"address":[],"length":0,"stats":{"Line":16}},{"line":430,"address":[],"length":0,"stats":{"Line":40}},{"line":431,"address":[],"length":0,"stats":{"Line":10}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":434,"address":[],"length":0,"stats":{"Line":10}},{"line":438,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":21}},{"line":443,"address":[],"length":0,"stats":{"Line":21}},{"line":444,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":446,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":21}},{"line":456,"address":[],"length":0,"stats":{"Line":21}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":2}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":19}},{"line":492,"address":[],"length":0,"stats":{"Line":8}},{"line":493,"address":[],"length":0,"stats":{"Line":10}},{"line":494,"address":[],"length":0,"stats":{"Line":2}},{"line":498,"address":[],"length":0,"stats":{"Line":11}},{"line":499,"address":[],"length":0,"stats":{"Line":22}},{"line":500,"address":[],"length":0,"stats":{"Line":9}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":502,"address":[],"length":0,"stats":{"Line":0}},{"line":503,"address":[],"length":0,"stats":{"Line":2}},{"line":506,"address":[],"length":0,"stats":{"Line":18}},{"line":507,"address":[],"length":0,"stats":{"Line":7}},{"line":511,"address":[],"length":0,"stats":{"Line":1}},{"line":512,"address":[],"length":0,"stats":{"Line":1}},{"line":515,"address":[],"length":0,"stats":{"Line":1}},{"line":516,"address":[],"length":0,"stats":{"Line":2}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":518,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":1}},{"line":522,"address":[],"length":0,"stats":{"Line":2}},{"line":525,"address":[],"length":0,"stats":{"Line":3}},{"line":526,"address":[],"length":0,"stats":{"Line":3}},{"line":529,"address":[],"length":0,"stats":{"Line":3}},{"line":530,"address":[],"length":0,"stats":{"Line":3}},{"line":531,"address":[],"length":0,"stats":{"Line":2}},{"line":532,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":1}},{"line":537,"address":[],"length":0,"stats":{"Line":9}},{"line":538,"address":[],"length":0,"stats":{"Line":9}},{"line":539,"address":[],"length":0,"stats":{"Line":18}},{"line":540,"address":[],"length":0,"stats":{"Line":9}},{"line":541,"address":[],"length":0,"stats":{"Line":36}},{"line":545,"address":[],"length":0,"stats":{"Line":1}},{"line":546,"address":[],"length":0,"stats":{"Line":2}},{"line":548,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":1}},{"line":556,"address":[],"length":0,"stats":{"Line":15}},{"line":559,"address":[],"length":0,"stats":{"Line":1}},{"line":566,"address":[],"length":0,"stats":{"Line":1}},{"line":567,"address":[],"length":0,"stats":{"Line":1}},{"line":568,"address":[],"length":0,"stats":{"Line":1}},{"line":569,"address":[],"length":0,"stats":{"Line":1}},{"line":570,"address":[],"length":0,"stats":{"Line":1}},{"line":571,"address":[],"length":0,"stats":{"Line":1}},{"line":572,"address":[],"length":0,"stats":{"Line":1}},{"line":573,"address":[],"length":0,"stats":{"Line":1}},{"line":577,"address":[],"length":0,"stats":{"Line":1}},{"line":578,"address":[],"length":0,"stats":{"Line":1}},{"line":581,"address":[],"length":0,"stats":{"Line":16}},{"line":582,"address":[],"length":0,"stats":{"Line":21}},{"line":583,"address":[],"length":0,"stats":{"Line":5}},{"line":584,"address":[],"length":0,"stats":{"Line":5}},{"line":587,"address":[],"length":0,"stats":{"Line":32}},{"line":588,"address":[],"length":0,"stats":{"Line":20}},{"line":590,"address":[],"length":0,"stats":{"Line":12}},{"line":593,"address":[],"length":0,"stats":{"Line":34}},{"line":594,"address":[],"length":0,"stats":{"Line":2}},{"line":598,"address":[],"length":0,"stats":{"Line":9}},{"line":599,"address":[],"length":0,"stats":{"Line":9}},{"line":601,"address":[],"length":0,"stats":{"Line":9}},{"line":602,"address":[],"length":0,"stats":{"Line":2}},{"line":603,"address":[],"length":0,"stats":{"Line":2}},{"line":604,"address":[],"length":0,"stats":{"Line":3}},{"line":605,"address":[],"length":0,"stats":{"Line":2}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":611,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":617,"address":[],"length":0,"stats":{"Line":0}},{"line":618,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":18}},{"line":627,"address":[],"length":0,"stats":{"Line":27}},{"line":628,"address":[],"length":0,"stats":{"Line":9}},{"line":630,"address":[],"length":0,"stats":{"Line":9}},{"line":631,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":9}},{"line":638,"address":[],"length":0,"stats":{"Line":6}},{"line":639,"address":[],"length":0,"stats":{"Line":3}},{"line":641,"address":[],"length":0,"stats":{"Line":4}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":650,"address":[],"length":0,"stats":{"Line":1}},{"line":652,"address":[],"length":0,"stats":{"Line":3}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":659,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":670,"address":[],"length":0,"stats":{"Line":0}},{"line":675,"address":[],"length":0,"stats":{"Line":4}},{"line":676,"address":[],"length":0,"stats":{"Line":16}},{"line":677,"address":[],"length":0,"stats":{"Line":8}},{"line":678,"address":[],"length":0,"stats":{"Line":8}},{"line":679,"address":[],"length":0,"stats":{"Line":6}},{"line":682,"address":[],"length":0,"stats":{"Line":14}},{"line":685,"address":[],"length":0,"stats":{"Line":6}},{"line":688,"address":[],"length":0,"stats":{"Line":8}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":2}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":2}},{"line":695,"address":[],"length":0,"stats":{"Line":8}},{"line":696,"address":[],"length":0,"stats":{"Line":12}},{"line":697,"address":[],"length":0,"stats":{"Line":8}},{"line":698,"address":[],"length":0,"stats":{"Line":8}},{"line":700,"address":[],"length":0,"stats":{"Line":8}},{"line":701,"address":[],"length":0,"stats":{"Line":4}},{"line":702,"address":[],"length":0,"stats":{"Line":4}},{"line":706,"address":[],"length":0,"stats":{"Line":2}},{"line":707,"address":[],"length":0,"stats":{"Line":4}},{"line":708,"address":[],"length":0,"stats":{"Line":4}},{"line":711,"address":[],"length":0,"stats":{"Line":8}},{"line":712,"address":[],"length":0,"stats":{"Line":12}},{"line":713,"address":[],"length":0,"stats":{"Line":4}},{"line":714,"address":[],"length":0,"stats":{"Line":10}},{"line":715,"address":[],"length":0,"stats":{"Line":6}},{"line":719,"address":[],"length":0,"stats":{"Line":4}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":728,"address":[],"length":0,"stats":{"Line":10}},{"line":729,"address":[],"length":0,"stats":{"Line":40}},{"line":730,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":737,"address":[],"length":0,"stats":{"Line":2}},{"line":738,"address":[],"length":0,"stats":{"Line":2}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":8}},{"line":744,"address":[],"length":0,"stats":{"Line":4}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":2}},{"line":751,"address":[],"length":0,"stats":{"Line":2}},{"line":752,"address":[],"length":0,"stats":{"Line":8}},{"line":754,"address":[],"length":0,"stats":{"Line":4}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":2}},{"line":757,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":761,"address":[],"length":0,"stats":{"Line":4}},{"line":762,"address":[],"length":0,"stats":{"Line":6}},{"line":763,"address":[],"length":0,"stats":{"Line":4}},{"line":764,"address":[],"length":0,"stats":{"Line":4}},{"line":766,"address":[],"length":0,"stats":{"Line":4}},{"line":767,"address":[],"length":0,"stats":{"Line":2}},{"line":768,"address":[],"length":0,"stats":{"Line":2}},{"line":772,"address":[],"length":0,"stats":{"Line":2}},{"line":773,"address":[],"length":0,"stats":{"Line":4}},{"line":774,"address":[],"length":0,"stats":{"Line":4}},{"line":777,"address":[],"length":0,"stats":{"Line":4}},{"line":778,"address":[],"length":0,"stats":{"Line":6}},{"line":779,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":784,"address":[],"length":0,"stats":{"Line":4}},{"line":785,"address":[],"length":0,"stats":{"Line":8}},{"line":786,"address":[],"length":0,"stats":{"Line":4}},{"line":787,"address":[],"length":0,"stats":{"Line":6}},{"line":791,"address":[],"length":0,"stats":{"Line":4}},{"line":792,"address":[],"length":0,"stats":{"Line":6}},{"line":793,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":4}},{"line":801,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":2}},{"line":807,"address":[],"length":0,"stats":{"Line":0}},{"line":808,"address":[],"length":0,"stats":{"Line":0}},{"line":809,"address":[],"length":0,"stats":{"Line":0}},{"line":811,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":813,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":819,"address":[],"length":0,"stats":{"Line":0}},{"line":821,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":831,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":841,"address":[],"length":0,"stats":{"Line":0}},{"line":844,"address":[],"length":0,"stats":{"Line":0}},{"line":845,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":847,"address":[],"length":0,"stats":{"Line":0}},{"line":848,"address":[],"length":0,"stats":{"Line":0}},{"line":849,"address":[],"length":0,"stats":{"Line":0}},{"line":853,"address":[],"length":0,"stats":{"Line":2}},{"line":854,"address":[],"length":0,"stats":{"Line":2}},{"line":856,"address":[],"length":0,"stats":{"Line":1}},{"line":859,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":862,"address":[],"length":0,"stats":{"Line":2}},{"line":863,"address":[],"length":0,"stats":{"Line":3}},{"line":867,"address":[],"length":0,"stats":{"Line":0}},{"line":868,"address":[],"length":0,"stats":{"Line":0}},{"line":869,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":875,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":883,"address":[],"length":0,"stats":{"Line":0}},{"line":884,"address":[],"length":0,"stats":{"Line":0}},{"line":887,"address":[],"length":0,"stats":{"Line":0}},{"line":890,"address":[],"length":0,"stats":{"Line":0}},{"line":893,"address":[],"length":0,"stats":{"Line":0}},{"line":897,"address":[],"length":0,"stats":{"Line":1}},{"line":900,"address":[],"length":0,"stats":{"Line":45}},{"line":901,"address":[],"length":0,"stats":{"Line":90}},{"line":905,"address":[],"length":0,"stats":{"Line":19}},{"line":906,"address":[],"length":0,"stats":{"Line":19}},{"line":908,"address":[],"length":0,"stats":{"Line":95}},{"line":911,"address":[],"length":0,"stats":{"Line":19}},{"line":912,"address":[],"length":0,"stats":{"Line":24}},{"line":914,"address":[],"length":0,"stats":{"Line":6}},{"line":915,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":19}},{"line":923,"address":[],"length":0,"stats":{"Line":40}},{"line":928,"address":[],"length":0,"stats":{"Line":17}},{"line":931,"address":[],"length":0,"stats":{"Line":76}},{"line":935,"address":[],"length":0,"stats":{"Line":1}},{"line":936,"address":[],"length":0,"stats":{"Line":1}},{"line":938,"address":[],"length":0,"stats":{"Line":2}},{"line":939,"address":[],"length":0,"stats":{"Line":2}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":2}},{"line":949,"address":[],"length":0,"stats":{"Line":4}},{"line":950,"address":[],"length":0,"stats":{"Line":1}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":1}},{"line":957,"address":[],"length":0,"stats":{"Line":2}},{"line":958,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":1}},{"line":964,"address":[],"length":0,"stats":{"Line":1}},{"line":965,"address":[],"length":0,"stats":{"Line":3}},{"line":966,"address":[],"length":0,"stats":{"Line":4}},{"line":969,"address":[],"length":0,"stats":{"Line":1}},{"line":970,"address":[],"length":0,"stats":{"Line":1}},{"line":971,"address":[],"length":0,"stats":{"Line":3}},{"line":972,"address":[],"length":0,"stats":{"Line":4}},{"line":975,"address":[],"length":0,"stats":{"Line":7}},{"line":976,"address":[],"length":0,"stats":{"Line":7}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":978,"address":[],"length":0,"stats":{"Line":7}},{"line":979,"address":[],"length":0,"stats":{"Line":2}},{"line":980,"address":[],"length":0,"stats":{"Line":5}},{"line":981,"address":[],"length":0,"stats":{"Line":1}},{"line":983,"address":[],"length":0,"stats":{"Line":4}},{"line":987,"address":[],"length":0,"stats":{"Line":119}},{"line":988,"address":[],"length":0,"stats":{"Line":124}},{"line":990,"address":[],"length":0,"stats":{"Line":3}},{"line":992,"address":[],"length":0,"stats":{"Line":2}},{"line":995,"address":[],"length":0,"stats":{"Line":114}},{"line":1001,"address":[],"length":0,"stats":{"Line":37}},{"line":1002,"address":[],"length":0,"stats":{"Line":111}}],"covered":297,"coverable":438},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","dashboard.rs"],"content":"use crate::tui::themes::Theme;\nuse crate::tui::AppState;\nuse ratatui::{\n    layout::{Constraint, Direction, Layout, Rect},\n    style::{Modifier, Style},\n    text::{Line, Span},\n    widgets::{BarChart, Block, Borders, Clear, List, ListItem, ListState, Paragraph, Wrap},\n    Frame,\n};\n\npub fn render_dashboard(f: \u0026mut Frame, app: \u0026mut AppState) {\n    let theme = app.themes[app.current_theme_index].clone();\n    let size = f.size();\n\n    // Set the background color for the entire frame\n    f.render_widget(\n        Block::default().style(Style::default().bg(theme.background)),\n        size,\n    );\n\n    match app.mode {\n        crate::tui::AppMode::Dashboard =\u003e render_main_dashboard(f, app, \u0026theme, size),\n        crate::tui::AppMode::ProcessView =\u003e render_process_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::PortView =\u003e render_port_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::ConnectionView =\u003e render_connection_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::ThemeSelector =\u003e render_theme_selector(f, app, \u0026theme, size),\n    }\n\n    // Always render status bar\n    render_status_bar(f, app, \u0026theme, size);\n\n    // Render overlays\n    if app.show_help {\n        render_help_dialog(f, \u0026theme, size);\n    } else if app.confirmation_dialog.is_some() {\n        render_confirmation_dialog(f, app, \u0026theme, size);\n    } else if app.search_active \u0026\u0026 app.show_search_help {\n        render_search_help_dialog(f, app, \u0026theme, size);\n    }\n}\n\nfn render_main_dashboard(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Main content\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    // Header\n    let header = Paragraph::new(vec![\n        Line::from(vec![\n            Span::styled(\n                \"BossyRust \",\n                Style::default()\n                    .fg(theme.primary)\n                    .add_modifier(Modifier::BOLD),\n            ),\n            Span::raw(\"- Mac Process Manager\").style(Style::default().fg(theme.foreground)),\n        ]),\n        Line::from(\"F1: Processes | F2: Ports | F3: Connections | F4: Dashboard | t: Themes | ?: Help | h: Back | q: Quit\")\n            .style(Style::default().fg(theme.text_secondary)),\n    ])\n    .block(Block::default().borders(Borders::ALL).border_style(Style::default().fg(theme.border)));\n    f.render_widget(header, chunks[0]);\n\n    // Main content area\n    let main_chunks = Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([Constraint::Percentage(50), Constraint::Percentage(50)])\n        .split(chunks[1]);\n\n    let left_chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([Constraint::Percentage(70), Constraint::Percentage(30)])\n        .split(main_chunks[0]);\n\n    // Left panel - Top processes\n    let top_processes: Vec\u003cListItem\u003e = app\n        .processes\n        .iter()\n        .take(10)\n        .enumerate()\n        .map(|(i, p)| {\n            ListItem::new(Line::from(vec![\n                Span::raw(format!(\"{:2}. \", i + 1))\n                    .style(Style::default().fg(theme.text_secondary)),\n                Span::styled(\n                    format!(\"{:15}\", truncate_string(\u0026p.name, 15)),\n                    Style::default().fg(theme.foreground),\n                ),\n                Span::raw(format!(\" {:\u003e6.1}%\", p.cpu_usage))\n                    .style(Style::default().fg(theme.accent)),\n                Span::raw(format!(\" {:\u003e8}\", p.format_memory()))\n                    .style(Style::default().fg(theme.secondary)),\n            ]))\n        })\n        .collect();\n\n    let processes_list = List::new(top_processes)\n        .block(\n            Block::default()\n                .title(\"Top Processes (CPU)\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_widget(processes_list, left_chunks[0]);\n\n    // --- Enhanced CPU Usage Chart ---\n    let current_cpu_usage = app.cpu_history.last().cloned().unwrap_or(0);\n    let max_cpu_in_history = app.cpu_history.iter().max().cloned().unwrap_or(0).max(25);\n\n    // Use a more reasonable scale that shows actual data well\n    let y_max = if max_cpu_in_history \u003c= 25 {\n        25\n    } else if max_cpu_in_history \u003c= 50 {\n        50\n    } else if max_cpu_in_history \u003c= 75 {\n        75\n    } else {\n        100\n    };\n\n    let chart_title = format!(\"âš¡ CPU Usage ({current_cpu_usage}%)\");\n\n    let chart_container = Block::default()\n        .title(chart_title)\n        .borders(Borders::ALL)\n        .border_style(Style::default().fg(theme.accent));\n\n    let chart_area = chart_container.inner(left_chunks[1]);\n    f.render_widget(chart_container, left_chunks[1]);\n\n    // Create a simple layout for the chart content\n    let inner_layout = Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([\n            Constraint::Length(4), // Y-axis labels\n            Constraint::Min(0),    // Chart bars\n        ])\n        .split(chart_area);\n\n    // Y-axis labels with regular intervals (5 labels total)\n    let step = y_max / 4; // 4 equal steps for 5 labels\n    let y_labels = [\n        format!(\"{y_max:\u003e3}%\"),\n        format!(\"{:\u003e3}%\", y_max - step),\n        format!(\"{:\u003e3}%\", y_max - step * 2),\n        format!(\"{:\u003e3}%\", y_max - step * 3),\n        \"  0%\".to_string(),\n    ];\n\n    let y_axis_text = y_labels.join(\"\\n\\n\\n\"); // More spacing for better alignment\n    let y_axis_labels =\n        Paragraph::new(y_axis_text).style(Style::default().fg(theme.text_secondary));\n    f.render_widget(y_axis_labels, inner_layout[0]);\n\n    // Chart area with proper scaling - ensure bars are visible\n    let chart_data: Vec\u003c(\u0026str, u64)\u003e = app\n        .cpu_history\n        .iter()\n        .enumerate()\n        .map(|(i, \u0026value)| {\n            // Use index as label to help with spacing, ensure minimum height for visibility\n            let visible_value = if value == 0 \u0026\u0026 current_cpu_usage \u003e 0 {\n                1\n            } else {\n                value.min(y_max)\n            };\n            (if i.is_multiple_of(10) { \"â”‚\" } else { \" \" }, visible_value)\n        })\n        .collect();\n\n    let barchart = BarChart::default()\n        .data(\u0026chart_data)\n        .bar_width(2) // Wider bars for better visibility\n        .bar_gap(0)\n        .bar_style(\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )\n        .value_style(Style::default().fg(theme.background)) // Hide values for cleaner look\n        .max(y_max);\n\n    f.render_widget(barchart, inner_layout[1]);\n\n    // Right panel - Port summary\n    let listening_ports = app\n        .ports\n        .iter()\n        .filter(|p| matches!(p.state, crate::network::ConnectionState::Listen))\n        .count();\n    let dev_ports = app.ports.iter().filter(|p| p.is_development_port()).count();\n\n    let port_items: Vec\u003cListItem\u003e = vec![\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Total Ports: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(app.ports.len().to_string()).style(Style::default().fg(theme.foreground)),\n        ])),\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Listening: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(listening_ports.to_string()).style(Style::default().fg(theme.secondary)),\n        ])),\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Development: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(dev_ports.to_string()).style(Style::default().fg(theme.primary)),\n        ])),\n    ];\n\n    let port_list = List::new(port_items).block(\n        Block::default()\n            .title(\"Port Summary\")\n            .borders(Borders::ALL)\n            .border_style(Style::default().fg(theme.border)),\n    );\n\n    f.render_widget(port_list, main_chunks[1]);\n}\n\nfn render_process_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let header_height = if app.column_headers_visible { 5 } else { 3 };\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(header_height), // Header with optional column headers\n            Constraint::Min(0),               // Process list\n            Constraint::Length(3),            // Status\n        ])\n        .split(area);\n\n    // Header\n    let sort_indicator = match app.sort_order {\n        crate::tui::SortOrder::Ascending =\u003e \"â†‘\",\n        crate::tui::SortOrder::Descending =\u003e \"â†“\",\n    };\n\n    let view_mode_indicator = if app.detailed_view_mode { \"ğŸ“‹\" } else { \"ğŸ“„\" };\n    let header_text = if app.search_active {\n        format!(\n            \"Processes ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_processes.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"{} Processes ({}) - Sorted by {:?} {} | / search | d detailed | c headers | h back\",\n            view_mode_indicator,\n            app.filtered_processes.len(),\n            app.sort_by,\n            sort_indicator\n        )\n    };\n\n    let mut header_lines = vec![Line::from(header_text)];\n    \n    // Add column headers if enabled\n    if app.column_headers_visible \u0026\u0026 !app.search_active {\n        header_lines.push(Line::from(\"\"));\n        header_lines.push(Line::from(vec![\n            Span::styled(\"Priority \", Style::default().fg(theme.accent).add_modifier(Modifier::BOLD)),\n            Span::styled(\"PID      \", Style::default().fg(theme.text_secondary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Name                 \", Style::default().fg(theme.primary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"CPU%   \", Style::default().fg(theme.accent).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Memory     \", Style::default().fg(theme.secondary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Status\", Style::default().fg(theme.text_secondary).add_modifier(Modifier::BOLD)),\n        ]));\n    }\n\n    let header = Paragraph::new(header_lines)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Process Manager\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    // Process list with enhanced visual hierarchy\n    let items: Vec\u003cListItem\u003e = app\n        .filtered_processes\n        .iter()\n        .enumerate()\n        .map(|(i, p)| {\n            let is_selected = app.selected_items.contains(\u0026i);\n            let base_style = if is_selected {\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD)\n            } else {\n                Style::default().fg(theme.foreground)\n            };\n\n            let priority_indicator = app.get_priority_indicator(p);\n            \n            if app.detailed_view_mode {\n                // Detailed view with more information\n                let user_info = p.user_id.map(|u| format!(\"U:{}\", u)).unwrap_or_else(|| \"-\".to_string());\n                let parent_info = p.parent_pid.map(|p| format!(\"P:{}\", p)).unwrap_or_else(|| \"-\".to_string());\n                \n                ListItem::new(vec![\n                    Line::from(vec![\n                        Span::raw(priority_indicator).style(base_style),\n                        Span::styled(format!(\"{:\u003e7} \", p.pid), base_style),\n                        Span::styled(\n                            format!(\"{:25} \", truncate_string(\u0026p.name, 25)),\n                            base_style.fg(theme.primary),\n                        ),\n                        Span::styled(format!(\"{:\u003e6.1}% \", p.cpu_usage), base_style.fg(theme.accent)),\n                        Span::styled(\n                            format!(\"{:\u003e10} \", p.format_memory()),\n                            base_style.fg(theme.secondary),\n                        ),\n                    ]),\n                    Line::from(vec![\n                        Span::raw(\"  \"),\n                        Span::styled(format!(\"  {} | {} | {}\", user_info, parent_info, p.status), \n                                   Style::default().fg(theme.text_secondary)),\n                    ]),\n                ])\n            } else {\n                // Compact view\n                ListItem::new(Line::from(vec![\n                    Span::raw(priority_indicator).style(base_style),\n                    Span::styled(format!(\"{:\u003e7} \", p.pid), base_style),\n                    Span::styled(\n                        format!(\"{:20} \", truncate_string(\u0026p.name, 20)),\n                        base_style.fg(theme.primary),\n                    ),\n                    Span::styled(format!(\"{:\u003e6.1}% \", p.cpu_usage), base_style.fg(theme.accent)),\n                    Span::styled(\n                        format!(\"{:\u003e10} \", p.format_memory()),\n                        base_style.fg(theme.secondary),\n                    ),\n                    Span::styled(\n                        truncate_string(\u0026p.status, 10),\n                        base_style.fg(theme.text_secondary),\n                    ),\n                ]))\n            }\n        })\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_port_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Port list\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    // Header\n    let header_text = if app.search_active {\n        format!(\n            \"Ports ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_ports.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"Ports ({}) | / to search | k to kill | :port for quick search\",\n            app.filtered_ports.len()\n        )\n    };\n\n    let header = Paragraph::new(header_text)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Port Manager\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    // Port list\n    let items: Vec\u003cListItem\u003e = app\n        .filtered_ports\n        .iter()\n        .map(|p| {\n            let protocol_color = match p.protocol {\n                crate::network::Protocol::Tcp =\u003e theme.primary,\n                crate::network::Protocol::Udp =\u003e theme.secondary,\n            };\n\n            let state_color = match p.state {\n                crate::network::ConnectionState::Listen =\u003e theme.secondary,\n                crate::network::ConnectionState::Established =\u003e theme.primary,\n                _ =\u003e theme.text_secondary,\n            };\n\n            let service_info = p\n                .get_service_suggestion()\n                .unwrap_or_else(|| format!(\"{:?}\", p.state));\n\n            ListItem::new(Line::from(vec![\n                Span::styled(\n                    format!(\"{:\u003e6} \", p.port),\n                    Style::default().fg(theme.foreground),\n                ),\n                Span::styled(\n                    format!(\"{:4} \", format!(\"{:?}\", p.protocol)),\n                    Style::default().fg(protocol_color),\n                ),\n                Span::styled(\n                    format!(\"{:12} \", format!(\"{:?}\", p.state)),\n                    Style::default().fg(state_color),\n                ),\n                Span::styled(\n                    format!(\n                        \"{:\u003e8} \",\n                        p.pid.map_or(\"-\".to_string(), |pid| pid.to_string())\n                    ),\n                    Style::default().fg(theme.accent),\n                ),\n                Span::styled(\n                    format!(\"{:20} \", p.process_name.as_deref().unwrap_or(\"-\")),\n                    Style::default().fg(theme.primary),\n                ),\n                Span::styled(\n                    truncate_string(\u0026service_info, 20),\n                    Style::default().fg(theme.text_secondary),\n                ),\n            ]))\n        })\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_connection_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Connection list\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    let header_text = if app.search_active {\n        format!(\n            \"Active Connections ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_connections.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"Active Connections ({}) | / to search\",\n            app.filtered_connections.len()\n        )\n    };\n\n    let header = Paragraph::new(header_text)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Network Connections\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    if app.filtered_connections.is_empty() {\n        // Show message when no connections are available\n        let message = Paragraph::new(\"No active connections found.\\n\\nThis could mean:\\nâ€¢ No established network connections\\nâ€¢ System permissions may be required\\nâ€¢ Try running with elevated privileges\")\n            .block(Block::default().borders(Borders::ALL).border_style(Style::default().fg(theme.border)))\n            .style(Style::default().fg(theme.text_secondary))\n            .wrap(Wrap { trim: true });\n        f.render_widget(message, chunks[1]);\n    } else {\n        let items: Vec\u003cListItem\u003e = app\n            .filtered_connections\n            .iter()\n            .map(|c| {\n                let protocol_color = match c.protocol {\n                    crate::network::Protocol::Tcp =\u003e theme.primary,\n                    crate::network::Protocol::Udp =\u003e theme.secondary,\n                };\n\n                ListItem::new(Line::from(vec![\n                    Span::styled(\n                        format!(\"{:4} \", format!(\"{:?}\", c.protocol)),\n                        Style::default().fg(protocol_color),\n                    ),\n                    Span::styled(\n                        format!(\"{:21} \", c.local_address),\n                        Style::default().fg(theme.primary),\n                    ),\n                    Span::raw(\"-\u003e \").style(Style::default().fg(theme.text_secondary)),\n                    Span::styled(\n                        format!(\"{:21} \", c.remote_address),\n                        Style::default().fg(theme.secondary),\n                    ),\n                    Span::styled(\n                        format!(\n                            \"{:\u003e8} \",\n                            c.pid.map_or(\"-\".to_string(), |pid| pid.to_string())\n                        ),\n                        Style::default().fg(theme.accent),\n                    ),\n                    Span::styled(\n                        c.process_name.as_deref().unwrap_or(\"-\"),\n                        Style::default().fg(theme.foreground),\n                    ),\n                ]))\n            })\n            .collect();\n\n        let mut list_state = ListState::default();\n        list_state.select(Some(app.selected_index));\n\n        let list = List::new(items)\n            .block(\n                Block::default()\n                    .borders(Borders::ALL)\n                    .border_style(Style::default().fg(theme.border)),\n            )\n            .highlight_style(\n                Style::default()\n                    .bg(theme.highlight)\n                    .add_modifier(Modifier::BOLD),\n            )\n            .highlight_symbol(\"\u003e \");\n\n        f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n    }\n}\n\nfn render_theme_selector(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Theme list\n        ])\n        .split(area);\n\n    let header = Paragraph::new(\"Select a Theme (Enter to confirm, Esc to cancel)\")\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    let items: Vec\u003cListItem\u003e = app\n        .themes\n        .iter()\n        .map(|t| ListItem::new(t.name.clone()).style(Style::default().fg(theme.foreground)))\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_status_bar(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([Constraint::Min(0), Constraint::Length(1)])\n        .split(area);\n\n    // Enhanced status bar with more system information\n    let status_text = if let Some(message) = app.get_status_message() {\n        message.to_string()\n    } else {\n        let item_count = match app.mode {\n            crate::tui::AppMode::ProcessView =\u003e app.filtered_processes.len(),\n            crate::tui::AppMode::PortView =\u003e app.filtered_ports.len(),\n            crate::tui::AppMode::ConnectionView =\u003e app.filtered_connections.len(),\n            crate::tui::AppMode::ThemeSelector =\u003e app.themes.len(),\n            _ =\u003e 0,\n        };\n\n        let mode_icon = match app.mode {\n            crate::tui::AppMode::Dashboard =\u003e \"ğŸ \",\n            crate::tui::AppMode::ProcessView =\u003e \"âš¡\",\n            crate::tui::AppMode::PortView =\u003e \"ğŸ”Œ\",\n            crate::tui::AppMode::ConnectionView =\u003e \"ğŸŒ\",\n            crate::tui::AppMode::ThemeSelector =\u003e \"ğŸ¨\",\n        };\n\n        let search_indicator = if app.search_active {\n            \" | ğŸ” Searching\"\n        } else if !app.search_query.is_empty() {\n            \" | ğŸ” Filtered\"\n        } else {\n            \"\"\n        };\n\n        let selection_indicator = if app.multi_select_mode {\n            format!(\" | âœ… {} selected\", app.selected_items.len())\n        } else {\n            String::new()\n        };\n\n        let refresh_indicator = if app.auto_refresh {\n            \"ğŸ”„ Auto\"\n        } else {\n            \"â¸ï¸ Manual\"\n        };\n\n        format!(\n            \"{} {:?} | {} items{}{} | {} | F1-F4: Views | ?: Help\",\n            mode_icon,\n            app.mode,\n            item_count,\n            search_indicator,\n            selection_indicator,\n            refresh_indicator\n        )\n    };\n\n    let status =\n        Paragraph::new(status_text).style(Style::default().fg(theme.foreground).bg(theme.primary));\n\n    f.render_widget(status, chunks[1]);\n}\n\nfn render_confirmation_dialog(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    if let Some(ref dialog) = app.confirmation_dialog {\n        let popup_area = centered_rect(70, 50, area);\n\n        f.render_widget(Clear, popup_area);\n\n        let mut dialog_lines = vec![\n            Line::from(dialog.message.clone()),\n            Line::from(\"\"),\n        ];\n\n        // Add additional safety information\n        if !dialog.additional_info.is_empty() {\n            dialog_lines.push(Line::from(vec![Span::styled(\n                \"Safety Information:\",\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD),\n            )]));\n            \n            for info in \u0026dialog.additional_info {\n                dialog_lines.push(Line::from(format!(\"â€¢ {}\", info)));\n            }\n            dialog_lines.push(Line::from(\"\"));\n        }\n\n        dialog_lines.push(Line::from(\"y/Y/Enter - Confirm    n/N/Esc - Cancel\"));\n\n        // Choose border color based on warning level\n        let border_color = match dialog.warning_level {\n            crate::tui::app::WarningLevel::Low =\u003e theme.secondary,\n            crate::tui::app::WarningLevel::Medium =\u003e theme.primary,\n            crate::tui::app::WarningLevel::High =\u003e theme.accent,\n            crate::tui::app::WarningLevel::Critical =\u003e ratatui::style::Color::Red,\n        };\n\n        let dialog_widget = Paragraph::new(dialog_lines)\n            .block(\n                Block::default()\n                    .title(dialog.title.as_str())\n                    .borders(Borders::ALL)\n                    .border_style(Style::default().fg(border_color)),\n            )\n            .style(Style::default().fg(theme.foreground))\n            .wrap(Wrap { trim: true });\n\n        f.render_widget(dialog_widget, popup_area);\n    }\n}\n\nfn render_help_dialog(f: \u0026mut Frame, theme: \u0026Theme, area: Rect) {\n    let popup_area = centered_rect(70, 60, area);\n\n    f.render_widget(Clear, popup_area);\n\n    let help_text = vec![\n        Line::from(vec![Span::styled(\n            \"BossyRust - Process Manager Help\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Navigation:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  d: Dashboard | t: Themes | F1-F3: Views | F4: Help\"),\n        Line::from(\"  â†‘/â†“ or j/k - Navigate    Space - Multi-select\"),\n        Line::from(\"  Page Up/Down - Fast scroll    Home/End - Go to top/bottom\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Actions:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  Enter/k/Delete - Kill selected process/port\"),\n        Line::from(\"  / - Search mode    s - Cycle sort options\"),\n        Line::from(\"  r/Ctrl+R - Refresh data    Ctrl+C - Force quit\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Search Patterns:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  :3000 - Find processes using port 3000\"),\n        Line::from(\"  #1234 - Search by Process ID\"),\n        Line::from(\"  \u003e50% - Processes using more than 50% CPU\"),\n        Line::from(\"  \u003e1GB - Processes using more than 1GB memory\"),\n        Line::from(\"  node - Search by process name\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Tips:\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  â€¢ Multi-select with Space, then Delete to kill multiple\"),\n        Line::from(\"  â€¢ Use Ctrl+R to refresh if data seems stale\"),\n        Line::from(\"  â€¢ Connection view requires active network connections\"),\n        Line::from(\"\"),\n        Line::from(\"Press F4, ?, or Esc to close this help\"),\n    ];\n\n    let help_widget = Paragraph::new(help_text)\n        .block(\n            Block::default()\n                .title(\"Help\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .style(Style::default().fg(theme.foreground))\n        .wrap(Wrap { trim: true });\n\n    f.render_widget(help_widget, popup_area);\n}\n\nfn render_search_help_dialog(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let popup_area = centered_rect(60, 40, area);\n\n    f.render_widget(Clear, popup_area);\n\n    let help_patterns = app.get_search_pattern_help();\n    let mut help_lines = vec![\n        Line::from(vec![Span::styled(\n            \"Search Patterns Help\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"\"),\n        Line::from(\"Available search patterns:\"),\n        Line::from(\"\"),\n    ];\n\n    for (pattern, description) in help_patterns {\n        help_lines.push(Line::from(vec![\n            Span::styled(\n                format!(\"{:12} \", pattern),\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD),\n            ),\n            Span::styled(description, Style::default().fg(theme.foreground)),\n        ]));\n    }\n\n    help_lines.push(Line::from(\"\"));\n    help_lines.push(Line::from(\"Tab: Autocomplete | F1: Toggle help | Enter: Apply | Esc: Cancel\"));\n\n    let help_widget = Paragraph::new(help_lines)\n        .block(\n            Block::default()\n                .title(\"Search Help\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .style(Style::default().fg(theme.foreground))\n        .wrap(Wrap { trim: true });\n\n    f.render_widget(help_widget, popup_area);\n}\n\nfn centered_rect(percent_x: u16, percent_y: u16, r: Rect) -\u003e Rect {\n    let popup_layout = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Percentage((100 - percent_y) / 2),\n            Constraint::Percentage(percent_y),\n            Constraint::Percentage((100 - percent_y) / 2),\n        ])\n        .split(r);\n\n    Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([\n            Constraint::Percentage((100 - percent_x) / 2),\n            Constraint::Percentage(percent_x),\n            Constraint::Percentage((100 - percent_x) / 2),\n        ])\n        .split(popup_layout[1])[1]\n}\n\nfn truncate_string(s: \u0026str, max_len: usize) -\u003e String {\n    if s.len() \u003c= max_len {\n        s.to_string()\n    } else {\n        format!(\"{}â€¦\", \u0026s[..max_len.saturating_sub(1)])\n    }\n}\n","traces":[{"line":11,"address":[],"length":0,"stats":{"Line":115}},{"line":12,"address":[],"length":0,"stats":{"Line":345}},{"line":13,"address":[],"length":0,"stats":{"Line":345}},{"line":16,"address":[],"length":0,"stats":{"Line":230}},{"line":17,"address":[],"length":0,"stats":{"Line":575}},{"line":18,"address":[],"length":0,"stats":{"Line":115}},{"line":21,"address":[],"length":0,"stats":{"Line":115}},{"line":22,"address":[],"length":0,"stats":{"Line":111}},{"line":23,"address":[],"length":0,"stats":{"Line":5}},{"line":24,"address":[],"length":0,"stats":{"Line":5}},{"line":25,"address":[],"length":0,"stats":{"Line":5}},{"line":26,"address":[],"length":0,"stats":{"Line":5}},{"line":30,"address":[],"length":0,"stats":{"Line":575}},{"line":33,"address":[],"length":0,"stats":{"Line":116}},{"line":34,"address":[],"length":0,"stats":{"Line":3}},{"line":35,"address":[],"length":0,"stats":{"Line":116}},{"line":36,"address":[],"length":0,"stats":{"Line":4}},{"line":37,"address":[],"length":0,"stats":{"Line":116}},{"line":38,"address":[],"length":0,"stats":{"Line":4}},{"line":42,"address":[],"length":0,"stats":{"Line":111}},{"line":43,"address":[],"length":0,"stats":{"Line":333}},{"line":44,"address":[],"length":0,"stats":{"Line":333}},{"line":45,"address":[],"length":0,"stats":{"Line":222}},{"line":46,"address":[],"length":0,"stats":{"Line":222}},{"line":47,"address":[],"length":0,"stats":{"Line":111}},{"line":48,"address":[],"length":0,"stats":{"Line":111}},{"line":50,"address":[],"length":0,"stats":{"Line":222}},{"line":53,"address":[],"length":0,"stats":{"Line":333}},{"line":54,"address":[],"length":0,"stats":{"Line":222}},{"line":55,"address":[],"length":0,"stats":{"Line":111}},{"line":57,"address":[],"length":0,"stats":{"Line":111}},{"line":58,"address":[],"length":0,"stats":{"Line":222}},{"line":59,"address":[],"length":0,"stats":{"Line":111}},{"line":61,"address":[],"length":0,"stats":{"Line":555}},{"line":63,"address":[],"length":0,"stats":{"Line":111}},{"line":64,"address":[],"length":0,"stats":{"Line":444}},{"line":66,"address":[],"length":0,"stats":{"Line":777}},{"line":67,"address":[],"length":0,"stats":{"Line":444}},{"line":70,"address":[],"length":0,"stats":{"Line":333}},{"line":71,"address":[],"length":0,"stats":{"Line":333}},{"line":72,"address":[],"length":0,"stats":{"Line":222}},{"line":73,"address":[],"length":0,"stats":{"Line":222}},{"line":75,"address":[],"length":0,"stats":{"Line":333}},{"line":76,"address":[],"length":0,"stats":{"Line":333}},{"line":77,"address":[],"length":0,"stats":{"Line":222}},{"line":78,"address":[],"length":0,"stats":{"Line":222}},{"line":81,"address":[],"length":0,"stats":{"Line":333}},{"line":82,"address":[],"length":0,"stats":{"Line":111}},{"line":86,"address":[],"length":0,"stats":{"Line":896}},{"line":87,"address":[],"length":0,"stats":{"Line":2355}},{"line":88,"address":[],"length":0,"stats":{"Line":3140}},{"line":89,"address":[],"length":0,"stats":{"Line":3140}},{"line":90,"address":[],"length":0,"stats":{"Line":785}},{"line":91,"address":[],"length":0,"stats":{"Line":3140}},{"line":92,"address":[],"length":0,"stats":{"Line":2355}},{"line":94,"address":[],"length":0,"stats":{"Line":2355}},{"line":95,"address":[],"length":0,"stats":{"Line":3140}},{"line":96,"address":[],"length":0,"stats":{"Line":3925}},{"line":97,"address":[],"length":0,"stats":{"Line":3140}},{"line":102,"address":[],"length":0,"stats":{"Line":333}},{"line":104,"address":[],"length":0,"stats":{"Line":111}},{"line":105,"address":[],"length":0,"stats":{"Line":111}},{"line":106,"address":[],"length":0,"stats":{"Line":111}},{"line":107,"address":[],"length":0,"stats":{"Line":444}},{"line":110,"address":[],"length":0,"stats":{"Line":111}},{"line":111,"address":[],"length":0,"stats":{"Line":222}},{"line":112,"address":[],"length":0,"stats":{"Line":111}},{"line":116,"address":[],"length":0,"stats":{"Line":444}},{"line":119,"address":[],"length":0,"stats":{"Line":444}},{"line":120,"address":[],"length":0,"stats":{"Line":666}},{"line":123,"address":[],"length":0,"stats":{"Line":222}},{"line":124,"address":[],"length":0,"stats":{"Line":111}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":333}},{"line":135,"address":[],"length":0,"stats":{"Line":222}},{"line":136,"address":[],"length":0,"stats":{"Line":222}},{"line":137,"address":[],"length":0,"stats":{"Line":111}},{"line":138,"address":[],"length":0,"stats":{"Line":444}},{"line":140,"address":[],"length":0,"stats":{"Line":444}},{"line":141,"address":[],"length":0,"stats":{"Line":444}},{"line":144,"address":[],"length":0,"stats":{"Line":333}},{"line":145,"address":[],"length":0,"stats":{"Line":333}},{"line":146,"address":[],"length":0,"stats":{"Line":222}},{"line":147,"address":[],"length":0,"stats":{"Line":111}},{"line":148,"address":[],"length":0,"stats":{"Line":111}},{"line":150,"address":[],"length":0,"stats":{"Line":222}},{"line":153,"address":[],"length":0,"stats":{"Line":222}},{"line":154,"address":[],"length":0,"stats":{"Line":222}},{"line":155,"address":[],"length":0,"stats":{"Line":333}},{"line":156,"address":[],"length":0,"stats":{"Line":444}},{"line":157,"address":[],"length":0,"stats":{"Line":444}},{"line":158,"address":[],"length":0,"stats":{"Line":444}},{"line":159,"address":[],"length":0,"stats":{"Line":111}},{"line":162,"address":[],"length":0,"stats":{"Line":444}},{"line":163,"address":[],"length":0,"stats":{"Line":111}},{"line":164,"address":[],"length":0,"stats":{"Line":666}},{"line":165,"address":[],"length":0,"stats":{"Line":444}},{"line":168,"address":[],"length":0,"stats":{"Line":333}},{"line":169,"address":[],"length":0,"stats":{"Line":111}},{"line":172,"address":[],"length":0,"stats":{"Line":11211}},{"line":174,"address":[],"length":0,"stats":{"Line":33300}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":11100}},{"line":179,"address":[],"length":0,"stats":{"Line":44400}},{"line":183,"address":[],"length":0,"stats":{"Line":222}},{"line":184,"address":[],"length":0,"stats":{"Line":222}},{"line":188,"address":[],"length":0,"stats":{"Line":111}},{"line":189,"address":[],"length":0,"stats":{"Line":222}},{"line":190,"address":[],"length":0,"stats":{"Line":111}},{"line":192,"address":[],"length":0,"stats":{"Line":444}},{"line":193,"address":[],"length":0,"stats":{"Line":222}},{"line":195,"address":[],"length":0,"stats":{"Line":444}},{"line":198,"address":[],"length":0,"stats":{"Line":222}},{"line":199,"address":[],"length":0,"stats":{"Line":111}},{"line":201,"address":[],"length":0,"stats":{"Line":10622}},{"line":203,"address":[],"length":0,"stats":{"Line":21466}},{"line":205,"address":[],"length":0,"stats":{"Line":333}},{"line":206,"address":[],"length":0,"stats":{"Line":333}},{"line":207,"address":[],"length":0,"stats":{"Line":555}},{"line":208,"address":[],"length":0,"stats":{"Line":777}},{"line":210,"address":[],"length":0,"stats":{"Line":333}},{"line":211,"address":[],"length":0,"stats":{"Line":555}},{"line":212,"address":[],"length":0,"stats":{"Line":777}},{"line":214,"address":[],"length":0,"stats":{"Line":333}},{"line":215,"address":[],"length":0,"stats":{"Line":555}},{"line":216,"address":[],"length":0,"stats":{"Line":777}},{"line":220,"address":[],"length":0,"stats":{"Line":444}},{"line":221,"address":[],"length":0,"stats":{"Line":111}},{"line":222,"address":[],"length":0,"stats":{"Line":111}},{"line":223,"address":[],"length":0,"stats":{"Line":111}},{"line":224,"address":[],"length":0,"stats":{"Line":444}},{"line":227,"address":[],"length":0,"stats":{"Line":444}},{"line":230,"address":[],"length":0,"stats":{"Line":1}},{"line":231,"address":[],"length":0,"stats":{"Line":3}},{"line":232,"address":[],"length":0,"stats":{"Line":3}},{"line":233,"address":[],"length":0,"stats":{"Line":3}},{"line":234,"address":[],"length":0,"stats":{"Line":2}},{"line":235,"address":[],"length":0,"stats":{"Line":2}},{"line":236,"address":[],"length":0,"stats":{"Line":1}},{"line":237,"address":[],"length":0,"stats":{"Line":1}},{"line":239,"address":[],"length":0,"stats":{"Line":2}},{"line":242,"address":[],"length":0,"stats":{"Line":2}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":1}},{"line":247,"address":[],"length":0,"stats":{"Line":3}},{"line":248,"address":[],"length":0,"stats":{"Line":2}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":1}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":4}},{"line":267,"address":[],"length":0,"stats":{"Line":3}},{"line":268,"address":[],"length":0,"stats":{"Line":4}},{"line":269,"address":[],"length":0,"stats":{"Line":5}},{"line":270,"address":[],"length":0,"stats":{"Line":6}},{"line":271,"address":[],"length":0,"stats":{"Line":6}},{"line":272,"address":[],"length":0,"stats":{"Line":6}},{"line":273,"address":[],"length":0,"stats":{"Line":6}},{"line":274,"address":[],"length":0,"stats":{"Line":6}},{"line":275,"address":[],"length":0,"stats":{"Line":4}},{"line":279,"address":[],"length":0,"stats":{"Line":3}},{"line":280,"address":[],"length":0,"stats":{"Line":4}},{"line":282,"address":[],"length":0,"stats":{"Line":1}},{"line":283,"address":[],"length":0,"stats":{"Line":1}},{"line":284,"address":[],"length":0,"stats":{"Line":1}},{"line":285,"address":[],"length":0,"stats":{"Line":4}},{"line":287,"address":[],"length":0,"stats":{"Line":4}},{"line":290,"address":[],"length":0,"stats":{"Line":3}},{"line":291,"address":[],"length":0,"stats":{"Line":1}},{"line":294,"address":[],"length":0,"stats":{"Line":8}},{"line":295,"address":[],"length":0,"stats":{"Line":21}},{"line":296,"address":[],"length":0,"stats":{"Line":14}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":7}},{"line":304,"address":[],"length":0,"stats":{"Line":28}},{"line":306,"address":[],"length":0,"stats":{"Line":7}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":311,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":7}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":345,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":2}},{"line":355,"address":[],"length":0,"stats":{"Line":3}},{"line":357,"address":[],"length":0,"stats":{"Line":3}},{"line":359,"address":[],"length":0,"stats":{"Line":1}},{"line":360,"address":[],"length":0,"stats":{"Line":1}},{"line":361,"address":[],"length":0,"stats":{"Line":4}},{"line":364,"address":[],"length":0,"stats":{"Line":1}},{"line":365,"address":[],"length":0,"stats":{"Line":2}},{"line":366,"address":[],"length":0,"stats":{"Line":1}},{"line":370,"address":[],"length":0,"stats":{"Line":5}},{"line":373,"address":[],"length":0,"stats":{"Line":1}},{"line":374,"address":[],"length":0,"stats":{"Line":3}},{"line":375,"address":[],"length":0,"stats":{"Line":3}},{"line":376,"address":[],"length":0,"stats":{"Line":2}},{"line":377,"address":[],"length":0,"stats":{"Line":2}},{"line":378,"address":[],"length":0,"stats":{"Line":1}},{"line":379,"address":[],"length":0,"stats":{"Line":1}},{"line":381,"address":[],"length":0,"stats":{"Line":2}},{"line":384,"address":[],"length":0,"stats":{"Line":2}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":1}},{"line":393,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":3}},{"line":398,"address":[],"length":0,"stats":{"Line":4}},{"line":400,"address":[],"length":0,"stats":{"Line":1}},{"line":401,"address":[],"length":0,"stats":{"Line":1}},{"line":402,"address":[],"length":0,"stats":{"Line":1}},{"line":403,"address":[],"length":0,"stats":{"Line":4}},{"line":405,"address":[],"length":0,"stats":{"Line":4}},{"line":408,"address":[],"length":0,"stats":{"Line":3}},{"line":409,"address":[],"length":0,"stats":{"Line":1}},{"line":411,"address":[],"length":0,"stats":{"Line":8}},{"line":412,"address":[],"length":0,"stats":{"Line":14}},{"line":413,"address":[],"length":0,"stats":{"Line":6}},{"line":414,"address":[],"length":0,"stats":{"Line":1}},{"line":417,"address":[],"length":0,"stats":{"Line":14}},{"line":418,"address":[],"length":0,"stats":{"Line":7}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":14}},{"line":424,"address":[],"length":0,"stats":{"Line":7}},{"line":425,"address":[],"length":0,"stats":{"Line":7}},{"line":427,"address":[],"length":0,"stats":{"Line":21}},{"line":428,"address":[],"length":0,"stats":{"Line":7}},{"line":429,"address":[],"length":0,"stats":{"Line":14}},{"line":430,"address":[],"length":0,"stats":{"Line":21}},{"line":432,"address":[],"length":0,"stats":{"Line":7}},{"line":433,"address":[],"length":0,"stats":{"Line":28}},{"line":434,"address":[],"length":0,"stats":{"Line":21}},{"line":436,"address":[],"length":0,"stats":{"Line":7}},{"line":437,"address":[],"length":0,"stats":{"Line":28}},{"line":438,"address":[],"length":0,"stats":{"Line":21}},{"line":440,"address":[],"length":0,"stats":{"Line":7}},{"line":441,"address":[],"length":0,"stats":{"Line":7}},{"line":442,"address":[],"length":0,"stats":{"Line":7}},{"line":443,"address":[],"length":0,"stats":{"Line":42}},{"line":445,"address":[],"length":0,"stats":{"Line":21}},{"line":447,"address":[],"length":0,"stats":{"Line":7}},{"line":448,"address":[],"length":0,"stats":{"Line":42}},{"line":449,"address":[],"length":0,"stats":{"Line":21}},{"line":451,"address":[],"length":0,"stats":{"Line":7}},{"line":452,"address":[],"length":0,"stats":{"Line":14}},{"line":453,"address":[],"length":0,"stats":{"Line":21}},{"line":459,"address":[],"length":0,"stats":{"Line":2}},{"line":460,"address":[],"length":0,"stats":{"Line":3}},{"line":462,"address":[],"length":0,"stats":{"Line":3}},{"line":464,"address":[],"length":0,"stats":{"Line":1}},{"line":465,"address":[],"length":0,"stats":{"Line":1}},{"line":466,"address":[],"length":0,"stats":{"Line":4}},{"line":469,"address":[],"length":0,"stats":{"Line":1}},{"line":470,"address":[],"length":0,"stats":{"Line":2}},{"line":471,"address":[],"length":0,"stats":{"Line":1}},{"line":475,"address":[],"length":0,"stats":{"Line":5}},{"line":478,"address":[],"length":0,"stats":{"Line":1}},{"line":479,"address":[],"length":0,"stats":{"Line":3}},{"line":480,"address":[],"length":0,"stats":{"Line":3}},{"line":481,"address":[],"length":0,"stats":{"Line":2}},{"line":482,"address":[],"length":0,"stats":{"Line":2}},{"line":483,"address":[],"length":0,"stats":{"Line":1}},{"line":484,"address":[],"length":0,"stats":{"Line":1}},{"line":486,"address":[],"length":0,"stats":{"Line":2}},{"line":488,"address":[],"length":0,"stats":{"Line":2}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":1}},{"line":497,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":3}},{"line":502,"address":[],"length":0,"stats":{"Line":4}},{"line":504,"address":[],"length":0,"stats":{"Line":1}},{"line":505,"address":[],"length":0,"stats":{"Line":1}},{"line":506,"address":[],"length":0,"stats":{"Line":1}},{"line":507,"address":[],"length":0,"stats":{"Line":4}},{"line":509,"address":[],"length":0,"stats":{"Line":4}},{"line":511,"address":[],"length":0,"stats":{"Line":2}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":1}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":522,"address":[],"length":0,"stats":{"Line":4}},{"line":523,"address":[],"length":0,"stats":{"Line":8}},{"line":524,"address":[],"length":0,"stats":{"Line":4}},{"line":525,"address":[],"length":0,"stats":{"Line":0}},{"line":528,"address":[],"length":0,"stats":{"Line":12}},{"line":529,"address":[],"length":0,"stats":{"Line":4}},{"line":530,"address":[],"length":0,"stats":{"Line":16}},{"line":531,"address":[],"length":0,"stats":{"Line":12}},{"line":533,"address":[],"length":0,"stats":{"Line":4}},{"line":534,"address":[],"length":0,"stats":{"Line":8}},{"line":535,"address":[],"length":0,"stats":{"Line":12}},{"line":537,"address":[],"length":0,"stats":{"Line":20}},{"line":538,"address":[],"length":0,"stats":{"Line":4}},{"line":539,"address":[],"length":0,"stats":{"Line":8}},{"line":540,"address":[],"length":0,"stats":{"Line":12}},{"line":542,"address":[],"length":0,"stats":{"Line":4}},{"line":543,"address":[],"length":0,"stats":{"Line":4}},{"line":544,"address":[],"length":0,"stats":{"Line":4}},{"line":545,"address":[],"length":0,"stats":{"Line":24}},{"line":547,"address":[],"length":0,"stats":{"Line":12}},{"line":549,"address":[],"length":0,"stats":{"Line":4}},{"line":550,"address":[],"length":0,"stats":{"Line":16}},{"line":551,"address":[],"length":0,"stats":{"Line":12}},{"line":557,"address":[],"length":0,"stats":{"Line":0}},{"line":558,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":562,"address":[],"length":0,"stats":{"Line":0}},{"line":563,"address":[],"length":0,"stats":{"Line":0}},{"line":564,"address":[],"length":0,"stats":{"Line":0}},{"line":567,"address":[],"length":0,"stats":{"Line":0}},{"line":568,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":1}},{"line":578,"address":[],"length":0,"stats":{"Line":3}},{"line":579,"address":[],"length":0,"stats":{"Line":3}},{"line":580,"address":[],"length":0,"stats":{"Line":2}},{"line":581,"address":[],"length":0,"stats":{"Line":1}},{"line":582,"address":[],"length":0,"stats":{"Line":1}},{"line":584,"address":[],"length":0,"stats":{"Line":2}},{"line":586,"address":[],"length":0,"stats":{"Line":2}},{"line":587,"address":[],"length":0,"stats":{"Line":4}},{"line":589,"address":[],"length":0,"stats":{"Line":1}},{"line":590,"address":[],"length":0,"stats":{"Line":1}},{"line":591,"address":[],"length":0,"stats":{"Line":4}},{"line":593,"address":[],"length":0,"stats":{"Line":4}},{"line":595,"address":[],"length":0,"stats":{"Line":3}},{"line":596,"address":[],"length":0,"stats":{"Line":1}},{"line":598,"address":[],"length":0,"stats":{"Line":71}},{"line":601,"address":[],"length":0,"stats":{"Line":2}},{"line":602,"address":[],"length":0,"stats":{"Line":3}},{"line":604,"address":[],"length":0,"stats":{"Line":3}},{"line":606,"address":[],"length":0,"stats":{"Line":1}},{"line":607,"address":[],"length":0,"stats":{"Line":1}},{"line":608,"address":[],"length":0,"stats":{"Line":4}},{"line":611,"address":[],"length":0,"stats":{"Line":1}},{"line":612,"address":[],"length":0,"stats":{"Line":2}},{"line":613,"address":[],"length":0,"stats":{"Line":1}},{"line":617,"address":[],"length":0,"stats":{"Line":5}},{"line":620,"address":[],"length":0,"stats":{"Line":115}},{"line":621,"address":[],"length":0,"stats":{"Line":345}},{"line":622,"address":[],"length":0,"stats":{"Line":345}},{"line":623,"address":[],"length":0,"stats":{"Line":230}},{"line":624,"address":[],"length":0,"stats":{"Line":230}},{"line":627,"address":[],"length":0,"stats":{"Line":231}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":228}},{"line":631,"address":[],"length":0,"stats":{"Line":1}},{"line":632,"address":[],"length":0,"stats":{"Line":2}},{"line":633,"address":[],"length":0,"stats":{"Line":2}},{"line":634,"address":[],"length":0,"stats":{"Line":2}},{"line":635,"address":[],"length":0,"stats":{"Line":110}},{"line":638,"address":[],"length":0,"stats":{"Line":228}},{"line":639,"address":[],"length":0,"stats":{"Line":110}},{"line":640,"address":[],"length":0,"stats":{"Line":1}},{"line":641,"address":[],"length":0,"stats":{"Line":1}},{"line":642,"address":[],"length":0,"stats":{"Line":1}},{"line":643,"address":[],"length":0,"stats":{"Line":1}},{"line":646,"address":[],"length":0,"stats":{"Line":228}},{"line":647,"address":[],"length":0,"stats":{"Line":1}},{"line":648,"address":[],"length":0,"stats":{"Line":113}},{"line":649,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":113}},{"line":654,"address":[],"length":0,"stats":{"Line":228}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":114}},{"line":660,"address":[],"length":0,"stats":{"Line":228}},{"line":661,"address":[],"length":0,"stats":{"Line":114}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":114}},{"line":677,"address":[],"length":0,"stats":{"Line":115}},{"line":678,"address":[],"length":0,"stats":{"Line":920}},{"line":680,"address":[],"length":0,"stats":{"Line":460}},{"line":683,"address":[],"length":0,"stats":{"Line":1}},{"line":684,"address":[],"length":0,"stats":{"Line":2}},{"line":685,"address":[],"length":0,"stats":{"Line":0}},{"line":687,"address":[],"length":0,"stats":{"Line":0}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":695,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":1}},{"line":698,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":700,"address":[],"length":0,"stats":{"Line":0}},{"line":703,"address":[],"length":0,"stats":{"Line":3}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":706,"address":[],"length":0,"stats":{"Line":0}},{"line":709,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":714,"address":[],"length":0,"stats":{"Line":1}},{"line":715,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":723,"address":[],"length":0,"stats":{"Line":0}},{"line":724,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":1}},{"line":734,"address":[],"length":0,"stats":{"Line":3}},{"line":736,"address":[],"length":0,"stats":{"Line":4}},{"line":738,"address":[],"length":0,"stats":{"Line":2}},{"line":739,"address":[],"length":0,"stats":{"Line":3}},{"line":741,"address":[],"length":0,"stats":{"Line":1}},{"line":742,"address":[],"length":0,"stats":{"Line":2}},{"line":743,"address":[],"length":0,"stats":{"Line":1}},{"line":745,"address":[],"length":0,"stats":{"Line":1}},{"line":746,"address":[],"length":0,"stats":{"Line":3}},{"line":748,"address":[],"length":0,"stats":{"Line":1}},{"line":749,"address":[],"length":0,"stats":{"Line":2}},{"line":750,"address":[],"length":0,"stats":{"Line":1}},{"line":752,"address":[],"length":0,"stats":{"Line":1}},{"line":753,"address":[],"length":0,"stats":{"Line":1}},{"line":754,"address":[],"length":0,"stats":{"Line":1}},{"line":755,"address":[],"length":0,"stats":{"Line":1}},{"line":756,"address":[],"length":0,"stats":{"Line":3}},{"line":758,"address":[],"length":0,"stats":{"Line":1}},{"line":759,"address":[],"length":0,"stats":{"Line":2}},{"line":760,"address":[],"length":0,"stats":{"Line":1}},{"line":762,"address":[],"length":0,"stats":{"Line":1}},{"line":763,"address":[],"length":0,"stats":{"Line":1}},{"line":764,"address":[],"length":0,"stats":{"Line":1}},{"line":765,"address":[],"length":0,"stats":{"Line":1}},{"line":766,"address":[],"length":0,"stats":{"Line":3}},{"line":768,"address":[],"length":0,"stats":{"Line":1}},{"line":769,"address":[],"length":0,"stats":{"Line":2}},{"line":770,"address":[],"length":0,"stats":{"Line":1}},{"line":772,"address":[],"length":0,"stats":{"Line":1}},{"line":773,"address":[],"length":0,"stats":{"Line":1}},{"line":774,"address":[],"length":0,"stats":{"Line":1}},{"line":775,"address":[],"length":0,"stats":{"Line":1}},{"line":776,"address":[],"length":0,"stats":{"Line":1}},{"line":777,"address":[],"length":0,"stats":{"Line":1}},{"line":778,"address":[],"length":0,"stats":{"Line":3}},{"line":780,"address":[],"length":0,"stats":{"Line":1}},{"line":781,"address":[],"length":0,"stats":{"Line":2}},{"line":782,"address":[],"length":0,"stats":{"Line":1}},{"line":784,"address":[],"length":0,"stats":{"Line":1}},{"line":785,"address":[],"length":0,"stats":{"Line":1}},{"line":786,"address":[],"length":0,"stats":{"Line":1}},{"line":787,"address":[],"length":0,"stats":{"Line":1}},{"line":788,"address":[],"length":0,"stats":{"Line":1}},{"line":791,"address":[],"length":0,"stats":{"Line":3}},{"line":793,"address":[],"length":0,"stats":{"Line":1}},{"line":794,"address":[],"length":0,"stats":{"Line":1}},{"line":795,"address":[],"length":0,"stats":{"Line":1}},{"line":796,"address":[],"length":0,"stats":{"Line":4}},{"line":798,"address":[],"length":0,"stats":{"Line":4}},{"line":799,"address":[],"length":0,"stats":{"Line":2}},{"line":801,"address":[],"length":0,"stats":{"Line":4}},{"line":804,"address":[],"length":0,"stats":{"Line":1}},{"line":805,"address":[],"length":0,"stats":{"Line":3}},{"line":807,"address":[],"length":0,"stats":{"Line":4}},{"line":809,"address":[],"length":0,"stats":{"Line":3}},{"line":810,"address":[],"length":0,"stats":{"Line":2}},{"line":811,"address":[],"length":0,"stats":{"Line":3}},{"line":813,"address":[],"length":0,"stats":{"Line":1}},{"line":814,"address":[],"length":0,"stats":{"Line":2}},{"line":815,"address":[],"length":0,"stats":{"Line":1}},{"line":817,"address":[],"length":0,"stats":{"Line":1}},{"line":818,"address":[],"length":0,"stats":{"Line":1}},{"line":819,"address":[],"length":0,"stats":{"Line":1}},{"line":822,"address":[],"length":0,"stats":{"Line":13}},{"line":823,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":827,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":3}},{"line":835,"address":[],"length":0,"stats":{"Line":3}},{"line":837,"address":[],"length":0,"stats":{"Line":3}},{"line":839,"address":[],"length":0,"stats":{"Line":1}},{"line":840,"address":[],"length":0,"stats":{"Line":1}},{"line":841,"address":[],"length":0,"stats":{"Line":1}},{"line":842,"address":[],"length":0,"stats":{"Line":4}},{"line":844,"address":[],"length":0,"stats":{"Line":4}},{"line":845,"address":[],"length":0,"stats":{"Line":2}},{"line":847,"address":[],"length":0,"stats":{"Line":4}},{"line":850,"address":[],"length":0,"stats":{"Line":3}},{"line":851,"address":[],"length":0,"stats":{"Line":9}},{"line":852,"address":[],"length":0,"stats":{"Line":9}},{"line":853,"address":[],"length":0,"stats":{"Line":6}},{"line":854,"address":[],"length":0,"stats":{"Line":6}},{"line":855,"address":[],"length":0,"stats":{"Line":3}},{"line":856,"address":[],"length":0,"stats":{"Line":3}},{"line":858,"address":[],"length":0,"stats":{"Line":6}},{"line":860,"address":[],"length":0,"stats":{"Line":9}},{"line":861,"address":[],"length":0,"stats":{"Line":12}},{"line":862,"address":[],"length":0,"stats":{"Line":9}},{"line":863,"address":[],"length":0,"stats":{"Line":9}},{"line":864,"address":[],"length":0,"stats":{"Line":6}},{"line":865,"address":[],"length":0,"stats":{"Line":6}},{"line":867,"address":[],"length":0,"stats":{"Line":6}},{"line":870,"address":[],"length":0,"stats":{"Line":806}},{"line":871,"address":[],"length":0,"stats":{"Line":1612}},{"line":872,"address":[],"length":0,"stats":{"Line":1576}},{"line":874,"address":[],"length":0,"stats":{"Line":18}}],"covered":435,"coverable":537},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","events.rs"],"content":"use anyhow::Result;\nuse crossterm::event::{self, Event, KeyEvent};\nuse std::time::Duration;\n\npub enum AppEvent {\n    Key(KeyEvent),\n    Resize(u16, u16),\n    Refresh,\n}\n\npub struct EventHandler {\n    tick_rate: Duration,\n}\n\nimpl EventHandler {\n    pub fn new(tick_rate: Duration) -\u003e Self {\n        Self { tick_rate }\n    }\n\n    pub async fn next(\u0026self) -\u003e Result\u003cAppEvent\u003e {\n        let timeout = self.tick_rate;\n\n        if event::poll(timeout)? {\n            match event::read()? {\n                Event::Key(key_event) =\u003e Ok(AppEvent::Key(key_event)),\n                Event::Resize(width, height) =\u003e Ok(AppEvent::Resize(width, height)),\n                _ =\u003e Ok(AppEvent::Refresh),\n            }\n        } else {\n            Ok(AppEvent::Refresh)\n        }\n    }\n}\n\nimpl Default for EventHandler {\n    fn default() -\u003e Self {\n        Self::new(Duration::from_millis(250))\n    }\n}\n","traces":[{"line":16,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":34}},{"line":21,"address":[],"length":0,"stats":{"Line":34}},{"line":23,"address":[],"length":0,"stats":{"Line":34}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":17}},{"line":36,"address":[],"length":0,"stats":{"Line":1}},{"line":37,"address":[],"length":0,"stats":{"Line":2}}],"covered":7,"coverable":11},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","mod.rs"],"content":"pub mod app;\npub mod dashboard;\npub mod events;\npub mod themes;\n\npub use app::*;\n// pub use dashboard::*;  // Dashboard exports not needed globally\npub use events::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","themes.rs"],"content":"use ratatui::style::Color;\n\n#[derive(Debug, Clone)]\npub struct Theme {\n    pub name: String,\n    pub background: Color,\n    pub foreground: Color,\n    pub primary: Color,\n    pub secondary: Color,\n    pub accent: Color,\n    pub highlight: Color,\n    pub border: Color,\n    pub text_secondary: Color,\n}\n\npub struct ThemeManager;\n\nimpl ThemeManager {\n    pub fn get_themes() -\u003e Vec\u003cTheme\u003e {\n        vec![\n            // Kanagawa\n            Theme {\n                name: \"Kanagawa\".to_string(),\n                background: Color::Rgb(31, 31, 46),\n                foreground: Color::Rgb(210, 210, 210),\n                primary: Color::Rgb(127, 173, 173),\n                secondary: Color::Rgb(193, 167, 127),\n                accent: Color::Rgb(224, 138, 138),\n                highlight: Color::Rgb(60, 60, 80),\n                border: Color::Rgb(80, 80, 100),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Dracula\n            Theme {\n                name: \"Dracula\".to_string(),\n                background: Color::Rgb(40, 42, 54),\n                foreground: Color::Rgb(248, 248, 242),\n                primary: Color::Rgb(189, 147, 249),\n                secondary: Color::Rgb(80, 250, 123),\n                accent: Color::Rgb(255, 85, 85),\n                highlight: Color::Rgb(68, 71, 90),\n                border: Color::Rgb(98, 114, 164),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Gruvbox\n            Theme {\n                name: \"Gruvbox\".to_string(),\n                background: Color::Rgb(40, 40, 40),\n                foreground: Color::Rgb(235, 219, 178),\n                primary: Color::Rgb(254, 128, 25),\n                secondary: Color::Rgb(184, 187, 38),\n                accent: Color::Rgb(251, 73, 52),\n                highlight: Color::Rgb(60, 56, 54),\n                border: Color::Rgb(124, 111, 100),\n                text_secondary: Color::Rgb(168, 153, 132),\n            },\n            // Nord\n            Theme {\n                name: \"Nord\".to_string(),\n                background: Color::Rgb(46, 52, 64),\n                foreground: Color::Rgb(216, 222, 233),\n                primary: Color::Rgb(136, 192, 208),\n                secondary: Color::Rgb(163, 190, 140),\n                accent: Color::Rgb(191, 97, 106),\n                highlight: Color::Rgb(59, 66, 82),\n                border: Color::Rgb(76, 86, 106),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Solarized (Dark)\n            Theme {\n                name: \"Solarized (Dark)\".to_string(),\n                background: Color::Rgb(0, 43, 54),\n                foreground: Color::Rgb(131, 148, 150),\n                primary: Color::Rgb(38, 139, 210),\n                secondary: Color::Rgb(133, 153, 0),\n                accent: Color::Rgb(220, 50, 47),\n                highlight: Color::Rgb(7, 54, 66),\n                border: Color::Rgb(88, 110, 117),\n                text_secondary: Color::Rgb(101, 123, 131),\n            },\n            // Catppuccin (Mocha)\n            Theme {\n                name: \"Catppuccin (Mocha)\".to_string(),\n                background: Color::Rgb(30, 30, 46),\n                foreground: Color::Rgb(205, 214, 244),\n                primary: Color::Rgb(137, 180, 250),\n                secondary: Color::Rgb(166, 227, 161),\n                accent: Color::Rgb(243, 139, 168),\n                highlight: Color::Rgb(49, 50, 68),\n                border: Color::Rgb(88, 91, 112),\n                text_secondary: Color::Rgb(147, 153, 178),\n            },\n            // Tokyo Night\n            Theme {\n                name: \"Tokyo Night\".to_string(),\n                background: Color::Rgb(24, 25, 38),\n                foreground: Color::Rgb(169, 177, 214),\n                primary: Color::Rgb(122, 162, 247),\n                secondary: Color::Rgb(158, 206, 106),\n                accent: Color::Rgb(247, 118, 142),\n                highlight: Color::Rgb(31, 32, 48),\n                border: Color::Rgb(56, 58, 79),\n                text_secondary: Color::Rgb(92, 99, 122),\n            },\n            // One Dark\n            Theme {\n                name: \"One Dark\".to_string(),\n                background: Color::Rgb(40, 44, 52),\n                foreground: Color::Rgb(171, 178, 191),\n                primary: Color::Rgb(97, 175, 239),\n                secondary: Color::Rgb(152, 195, 121),\n                accent: Color::Rgb(224, 108, 117),\n                highlight: Color::Rgb(49, 54, 63),\n                border: Color::Rgb(65, 70, 81),\n                text_secondary: Color::Rgb(140, 140, 140),\n            },\n            // Monokai\n            Theme {\n                name: \"Monokai\".to_string(),\n                background: Color::Rgb(39, 40, 34),\n                foreground: Color::Rgb(248, 248, 242),\n                primary: Color::Rgb(102, 217, 239),\n                secondary: Color::Rgb(166, 226, 46),\n                accent: Color::Rgb(249, 38, 114),\n                highlight: Color::Rgb(56, 57, 50),\n                border: Color::Rgb(73, 72, 62),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Everforest (Dark)\n            Theme {\n                name: \"Everforest (Dark)\".to_string(),\n                background: Color::Rgb(45, 52, 64),\n                foreground: Color::Rgb(211, 208, 191),\n                primary: Color::Rgb(116, 178, 123),\n                secondary: Color::Rgb(229, 192, 123),\n                accent: Color::Rgb(228, 108, 117),\n                highlight: Color::Rgb(56, 64, 79),\n                border: Color::Rgb(78, 87, 105),\n                text_secondary: Color::Rgb(148, 142, 129),\n            },\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_theme_creation() {\n        let theme = Theme {\n            name: \"Test Theme\".to_string(),\n            background: Color::Black,\n            foreground: Color::White,\n            primary: Color::Blue,\n            secondary: Color::Green,\n            accent: Color::Red,\n            highlight: Color::Yellow,\n            border: Color::Gray,\n            text_secondary: Color::DarkGray,\n        };\n\n        assert_eq!(theme.name, \"Test Theme\");\n        assert_eq!(theme.background, Color::Black);\n        assert_eq!(theme.foreground, Color::White);\n    }\n\n    #[test]\n    fn test_theme_manager_get_themes() {\n        let themes = ThemeManager::get_themes();\n        \n        // Should have multiple themes\n        assert!(!themes.is_empty());\n        assert!(themes.len() \u003e= 6);\n\n        // Check that all expected themes are present\n        let theme_names: Vec\u003c\u0026String\u003e = themes.iter().map(|t| \u0026t.name).collect();\n        assert!(theme_names.contains(\u0026\u0026\"Kanagawa\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Dracula\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Gruvbox\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Nord\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"One Dark\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Monokai\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Everforest (Dark)\".to_string()));\n    }\n\n    #[test]\n    fn test_all_themes_have_valid_properties() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Each theme should have a non-empty name\n            assert!(!theme.name.is_empty());\n            \n            // Theme should be cloneable\n            let _cloned = theme.clone();\n            \n            // Theme should be debuggable\n            let debug_str = format!(\"{:?}\", theme);\n            assert!(debug_str.contains(\u0026theme.name));\n        }\n    }\n\n    #[test]\n    fn test_theme_color_values() {\n        let themes = ThemeManager::get_themes();\n        let kanagawa = themes.iter().find(|t| t.name == \"Kanagawa\").unwrap();\n        \n        // Test specific color values for Kanagawa theme\n        assert_eq!(kanagawa.background, Color::Rgb(31, 31, 46));\n        assert_eq!(kanagawa.foreground, Color::Rgb(210, 210, 210));\n        assert_eq!(kanagawa.primary, Color::Rgb(127, 173, 173));\n    }\n\n    #[test]\n    fn test_theme_uniqueness() {\n        let themes = ThemeManager::get_themes();\n        let mut names = std::collections::HashSet::new();\n        \n        for theme in themes {\n            // Each theme name should be unique\n            assert!(names.insert(theme.name.clone()), \"Duplicate theme name: {}\", theme.name);\n        }\n    }\n\n    #[test]\n    fn test_rgb_color_ranges() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Test that RGB values are within valid ranges\n            if let Color::Rgb(r, g, b) = theme.background {\n                assert!(r \u003c= 255);\n                assert!(g \u003c= 255);\n                assert!(b \u003c= 255);\n            }\n            \n            if let Color::Rgb(r, g, b) = theme.foreground {\n                assert!(r \u003c= 255);\n                assert!(g \u003c= 255);\n                assert!(b \u003c= 255);\n            }\n        }\n    }\n\n    #[test]\n    fn test_theme_contrast() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Basic contrast test - background and foreground should be different\n            assert_ne!(theme.background, theme.foreground, \"Theme '{}' has same background and foreground\", theme.name);\n        }\n    }\n\n    #[test]\n    fn test_specific_theme_properties() {\n        let themes = ThemeManager::get_themes();\n        \n        // Test Dracula theme specifically\n        let dracula = themes.iter().find(|t| t.name == \"Dracula\").unwrap();\n        assert_eq!(dracula.background, Color::Rgb(40, 42, 54));\n        assert_eq!(dracula.primary, Color::Rgb(189, 147, 249));\n        \n        // Test Gruvbox theme specifically  \n        let gruvbox = themes.iter().find(|t| t.name == \"Gruvbox\").unwrap();\n        assert_eq!(gruvbox.background, Color::Rgb(40, 40, 40));\n        assert_eq!(gruvbox.accent, Color::Rgb(251, 73, 52));\n    }\n}\n","traces":[{"line":19,"address":[],"length":0,"stats":{"Line":77}},{"line":20,"address":[],"length":0,"stats":{"Line":77}},{"line":22,"address":[],"length":0,"stats":{"Line":77}},{"line":23,"address":[],"length":0,"stats":{"Line":231}},{"line":24,"address":[],"length":0,"stats":{"Line":154}},{"line":25,"address":[],"length":0,"stats":{"Line":154}},{"line":26,"address":[],"length":0,"stats":{"Line":154}},{"line":27,"address":[],"length":0,"stats":{"Line":154}},{"line":28,"address":[],"length":0,"stats":{"Line":154}},{"line":29,"address":[],"length":0,"stats":{"Line":154}},{"line":30,"address":[],"length":0,"stats":{"Line":77}},{"line":31,"address":[],"length":0,"stats":{"Line":77}},{"line":34,"address":[],"length":0,"stats":{"Line":77}},{"line":35,"address":[],"length":0,"stats":{"Line":231}},{"line":36,"address":[],"length":0,"stats":{"Line":154}},{"line":37,"address":[],"length":0,"stats":{"Line":154}},{"line":38,"address":[],"length":0,"stats":{"Line":154}},{"line":39,"address":[],"length":0,"stats":{"Line":154}},{"line":40,"address":[],"length":0,"stats":{"Line":154}},{"line":41,"address":[],"length":0,"stats":{"Line":154}},{"line":42,"address":[],"length":0,"stats":{"Line":77}},{"line":43,"address":[],"length":0,"stats":{"Line":77}},{"line":46,"address":[],"length":0,"stats":{"Line":77}},{"line":47,"address":[],"length":0,"stats":{"Line":231}},{"line":48,"address":[],"length":0,"stats":{"Line":154}},{"line":49,"address":[],"length":0,"stats":{"Line":154}},{"line":50,"address":[],"length":0,"stats":{"Line":154}},{"line":51,"address":[],"length":0,"stats":{"Line":154}},{"line":52,"address":[],"length":0,"stats":{"Line":154}},{"line":53,"address":[],"length":0,"stats":{"Line":154}},{"line":54,"address":[],"length":0,"stats":{"Line":77}},{"line":55,"address":[],"length":0,"stats":{"Line":77}},{"line":58,"address":[],"length":0,"stats":{"Line":77}},{"line":59,"address":[],"length":0,"stats":{"Line":231}},{"line":60,"address":[],"length":0,"stats":{"Line":154}},{"line":61,"address":[],"length":0,"stats":{"Line":154}},{"line":62,"address":[],"length":0,"stats":{"Line":154}},{"line":63,"address":[],"length":0,"stats":{"Line":154}},{"line":64,"address":[],"length":0,"stats":{"Line":154}},{"line":65,"address":[],"length":0,"stats":{"Line":154}},{"line":66,"address":[],"length":0,"stats":{"Line":77}},{"line":67,"address":[],"length":0,"stats":{"Line":77}},{"line":70,"address":[],"length":0,"stats":{"Line":77}},{"line":71,"address":[],"length":0,"stats":{"Line":231}},{"line":72,"address":[],"length":0,"stats":{"Line":154}},{"line":73,"address":[],"length":0,"stats":{"Line":154}},{"line":74,"address":[],"length":0,"stats":{"Line":154}},{"line":75,"address":[],"length":0,"stats":{"Line":154}},{"line":76,"address":[],"length":0,"stats":{"Line":154}},{"line":77,"address":[],"length":0,"stats":{"Line":154}},{"line":78,"address":[],"length":0,"stats":{"Line":77}},{"line":79,"address":[],"length":0,"stats":{"Line":77}},{"line":82,"address":[],"length":0,"stats":{"Line":77}},{"line":83,"address":[],"length":0,"stats":{"Line":231}},{"line":84,"address":[],"length":0,"stats":{"Line":154}},{"line":85,"address":[],"length":0,"stats":{"Line":154}},{"line":86,"address":[],"length":0,"stats":{"Line":154}},{"line":87,"address":[],"length":0,"stats":{"Line":154}},{"line":88,"address":[],"length":0,"stats":{"Line":154}},{"line":89,"address":[],"length":0,"stats":{"Line":154}},{"line":90,"address":[],"length":0,"stats":{"Line":77}},{"line":91,"address":[],"length":0,"stats":{"Line":77}},{"line":94,"address":[],"length":0,"stats":{"Line":77}},{"line":95,"address":[],"length":0,"stats":{"Line":231}},{"line":96,"address":[],"length":0,"stats":{"Line":154}},{"line":97,"address":[],"length":0,"stats":{"Line":154}},{"line":98,"address":[],"length":0,"stats":{"Line":154}},{"line":99,"address":[],"length":0,"stats":{"Line":154}},{"line":100,"address":[],"length":0,"stats":{"Line":154}},{"line":101,"address":[],"length":0,"stats":{"Line":154}},{"line":102,"address":[],"length":0,"stats":{"Line":77}},{"line":103,"address":[],"length":0,"stats":{"Line":77}},{"line":106,"address":[],"length":0,"stats":{"Line":77}},{"line":107,"address":[],"length":0,"stats":{"Line":231}},{"line":108,"address":[],"length":0,"stats":{"Line":154}},{"line":109,"address":[],"length":0,"stats":{"Line":154}},{"line":110,"address":[],"length":0,"stats":{"Line":154}},{"line":111,"address":[],"length":0,"stats":{"Line":154}},{"line":112,"address":[],"length":0,"stats":{"Line":154}},{"line":113,"address":[],"length":0,"stats":{"Line":154}},{"line":114,"address":[],"length":0,"stats":{"Line":77}},{"line":115,"address":[],"length":0,"stats":{"Line":77}},{"line":118,"address":[],"length":0,"stats":{"Line":77}},{"line":119,"address":[],"length":0,"stats":{"Line":231}},{"line":120,"address":[],"length":0,"stats":{"Line":154}},{"line":121,"address":[],"length":0,"stats":{"Line":154}},{"line":122,"address":[],"length":0,"stats":{"Line":154}},{"line":123,"address":[],"length":0,"stats":{"Line":154}},{"line":124,"address":[],"length":0,"stats":{"Line":154}},{"line":125,"address":[],"length":0,"stats":{"Line":154}},{"line":126,"address":[],"length":0,"stats":{"Line":77}},{"line":127,"address":[],"length":0,"stats":{"Line":77}},{"line":130,"address":[],"length":0,"stats":{"Line":77}},{"line":131,"address":[],"length":0,"stats":{"Line":231}},{"line":132,"address":[],"length":0,"stats":{"Line":154}},{"line":133,"address":[],"length":0,"stats":{"Line":154}},{"line":134,"address":[],"length":0,"stats":{"Line":154}},{"line":135,"address":[],"length":0,"stats":{"Line":154}},{"line":136,"address":[],"length":0,"stats":{"Line":154}},{"line":137,"address":[],"length":0,"stats":{"Line":154}},{"line":138,"address":[],"length":0,"stats":{"Line":77}},{"line":139,"address":[],"length":0,"stats":{"Line":77}}],"covered":102,"coverable":102},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","tests","cli_integration_tests.rs"],"content":"use assert_cmd::Command;\nuse predicates::prelude::*;\n\n#[test]\nfn test_cli_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.arg(\"--help\");\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\n            \"lightweight Terminal User Interface\",\n        ))\n        .stdout(predicate::str::contains(\"Usage: bossy-rust\"))\n        .stdout(predicate::str::contains(\"Commands:\"))\n        .stdout(predicate::str::contains(\"port\"))\n        .stdout(predicate::str::contains(\"kill-port\"))\n        .stdout(predicate::str::contains(\"ports\"))\n        .stdout(predicate::str::contains(\"kill-process\"))\n        .stdout(predicate::str::contains(\"ps\"))\n        .stdout(predicate::str::contains(\"cleanup\"))\n        .stdout(predicate::str::contains(\"find-port\"));\n}\n\n#[test]\nfn test_cli_version() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.arg(\"--version\");\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"bossy-rust\"));\n}\n\n#[test]\nfn test_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"--help\"]);\n\n    cmd.assert().success().stdout(predicate::str::contains(\n        \"Show what's using a specific port\",\n    ));\n}\n\n#[test]\nfn test_kill_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-port\", \"--help\"]);\n\n    cmd.assert().success().stdout(predicate::str::contains(\n        \"Kill process using a specific port\",\n    ));\n}\n\n#[test]\nfn test_ports_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Show all ports\"))\n        .stdout(predicate::str::contains(\"--common\"))\n        .stdout(predicate::str::contains(\"--listening\"));\n}\n\n#[test]\nfn test_kill_process_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Kill processes by name\"))\n        .stdout(predicate::str::contains(\"--force\"));\n}\n\n#[test]\nfn test_ps_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Show processes\"))\n        .stdout(predicate::str::contains(\"--top-cpu\"))\n        .stdout(predicate::str::contains(\"--top-memory\"))\n        .stdout(predicate::str::contains(\"--limit\"));\n}\n\n#[test]\nfn test_cleanup_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\n            \"Cleanup common development processes\",\n        ))\n        .stdout(predicate::str::contains(\"--dev\"));\n}\n\n#[test]\nfn test_find_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Find available port in range\"));\n}\n\n#[test]\nfn test_port_command_with_invalid_port() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"65534\"]);\n\n    // This should succeed but likely show no processes (using valid port range)\n    cmd.assert().success();\n}\n\n#[test]\nfn test_port_command_with_zero() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"0\"]);\n\n    // Port 0 should be handled gracefully\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ps_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Processes\"));\n}\n\n#[test]\nfn test_ps_command_top_cpu() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--top-cpu\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Top\"))\n        .stdout(predicate::str::contains(\"CPU\"));\n}\n\n#[test]\nfn test_ps_command_top_memory() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--top-memory\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Top\"))\n        .stdout(predicate::str::contains(\"Memory\"));\n}\n\n#[test]\nfn test_ps_command_with_limit() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--limit\", \"5\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ports_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Ports\"));\n}\n\n#[test]\nfn test_ports_command_listening() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--listening\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ports_command_common() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--common\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_find_port_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"50000\"]);\n\n    // Should either find a port or indicate none available\n    cmd.assert().success();\n}\n\n#[test]\nfn test_find_port_command_with_range() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"50000\", \"50010\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_kill_process_non_existent() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\", \"non_existent_process_name_12345\"]);\n\n    // Should succeed but report no processes found\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"No processes found\"));\n}\n\n#[test]\nfn test_cleanup_without_dev_flag() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Please specify --dev\"));\n}\n\n#[test]\nfn test_cleanup_with_dev_flag() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\", \"--dev\"]);\n\n    // Should succeed regardless of whether dev processes are found\n    cmd.assert().success();\n}\n\n#[test]\nfn test_invalid_command() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"invalid-command\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"unrecognized subcommand\"));\n}\n\n#[test]\nfn test_port_command_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n#[test]\nfn test_kill_port_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-port\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n#[test]\nfn test_kill_process_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n// Note: We avoid actual kill operations in tests to prevent system disruption\n#[test]\nfn test_kill_port_dry_run_concept() {\n    // This test demonstrates how we would test kill operations safely\n    // In a real scenario, we might use a mock system or test environment\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"65534\"]); // Use a valid but very unlikely port\n\n    // Just verify the command structure works\n    cmd.assert().success();\n}\n\n#[test]\nfn test_command_chaining_safety() {\n    // Test that commands don't interfere with each other\n\n    // Run multiple commands in sequence\n    let mut cmd1 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd1.args([\"ps\", \"--limit\", \"1\"]);\n    cmd1.assert().success();\n\n    let mut cmd2 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd2.args([\"ports\", \"--listening\"]);\n    cmd2.assert().success();\n\n    let mut cmd3 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd3.args([\"find-port\", \"60000\"]);\n    cmd3.assert().success();\n}\n\n#[test]\nfn test_error_handling_graceful() {\n    // Test that errors are handled gracefully without panics\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"abc\"]); // Invalid port number\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"invalid\").or(predicate::str::contains(\"error\")));\n}\n\n#[test]\nfn test_output_format_consistency() {\n    // Test that output formats are consistent across commands\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--limit\", \"3\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"PID\"))\n        .stdout(predicate::str::contains(\"Process\"));\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","tests","tui_dashboard_tests.rs"],"content":"use bossy_rust::testing::*;\nuse bossy_rust::tui::{AppState, AppMode};\nuse ratatui::{backend::TestBackend, Terminal, buffer::Buffer};\nuse ratatui::layout::Rect;\n\n#[cfg(test)]\nmod dashboard_rendering_tests {\n    use super::*;\n\n    #[test]\n    fn test_dashboard_render_basic() {\n        let mut app = AppState::default();\n        app.processes = create_realistic_test_processes();\n        app.filtered_processes = app.processes.clone();\n        app.ports = create_realistic_test_ports();\n        app.filtered_ports = app.ports.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_process_view_render() {\n        let mut app = AppState::default();\n        app.mode = AppMode::ProcessView;\n        app.processes = create_realistic_test_processes();\n        app.filtered_processes = app.processes.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        // Check that the terminal buffer contains process information\n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain process names from our test data\n        assert!(content.contains(\"node\") || content.contains(\"Process\"));\n    }\n\n    #[test] \n    fn test_port_view_render() {\n        let mut app = AppState::default();\n        app.mode = AppMode::PortView;\n        app.ports = create_realistic_test_ports();\n        app.filtered_ports = app.ports.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain port information\n        assert!(content.contains(\"Port\") || content.contains(\"3000\"));\n    }\n\n    #[test]\n    fn test_connection_view_render() {\n        let mut app = AppState::default();\n        app.mode = AppMode::ConnectionView;\n        app.connections = create_realistic_test_connections();\n        app.filtered_connections = app.connections.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_theme_selector_render() {\n        let mut app = AppState::default();\n        app.mode = AppMode::ThemeSelector;\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain theme information\n        assert!(content.contains(\"Theme\") || !app.themes.is_empty());\n    }\n\n    #[test]\n    fn test_help_dialog_render() {\n        let mut app = AppState::default();\n        app.show_help = true;\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain help text\n        assert!(content.contains(\"Help\") || content.contains(\"Key\"));\n    }\n\n    #[test]\n    fn test_confirmation_dialog_render() {\n        use bossy_rust::tui::{ConfirmationDialog, DialogAction, WarningLevel};\n        \n        let mut app = AppState::default();\n        app.confirmation_dialog = Some(ConfirmationDialog {\n            title: \"Test Dialog\".to_string(),\n            message: \"Test message\".to_string(),\n            confirm_action: DialogAction::Process(123),\n            warning_level: WarningLevel::Medium,\n            additional_info: vec![\"Additional info\".to_string()],\n        });\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain dialog content\n        assert!(content.contains(\"Test Dialog\") || content.contains(\"confirm\"));\n    }\n\n    #[test]\n    fn test_search_help_dialog_render() {\n        let mut app = AppState::default();\n        app.search_active = true;\n        app.show_search_help = true;\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_status_bar_render() {\n        let mut app = AppState::default();\n        app.set_status_message(\"Test status message\".to_string());\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n        \n        let buffer = terminal.backend().buffer();\n        let content = buffer_to_string(buffer);\n        \n        // Should contain status message\n        assert!(content.contains(\"Test status message\") || content.contains(\"status\"));\n    }\n\n    #[test]\n    fn test_render_with_different_terminal_sizes() {\n        let mut app = AppState::default();\n        app.processes = create_realistic_test_processes();\n        app.filtered_processes = app.processes.clone();\n\n        // Test various terminal sizes\n        let sizes = [(80, 24), (120, 40), (160, 50), (40, 20)];\n        \n        for (width, height) in sizes {\n            let backend = TestBackend::new(width, height);\n            let mut terminal = Terminal::new(backend).unwrap();\n\n            let result = terminal.draw(|f| {\n                bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n            });\n\n            assert!(result.is_ok(), \"Failed to render with size {}x{}\", width, height);\n        }\n    }\n\n    #[test]\n    fn test_render_with_empty_data() {\n        let mut app = AppState::default();\n        // Empty all data\n        app.processes.clear();\n        app.filtered_processes.clear();\n        app.ports.clear();\n        app.filtered_ports.clear();\n        app.connections.clear();\n        app.filtered_connections.clear();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        // Should not panic with empty data\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_render_with_large_datasets() {\n        let mut app = AppState::default();\n        \n        // Create large datasets\n        app.processes = (0..1000).map(|i| {\n            create_test_process(i, \u0026format!(\"process_{}\", i), i as f32 % 100.0, i as u64 * 1024)\n        }).collect();\n        app.filtered_processes = app.processes.clone();\n\n        app.ports = (3000..4000).map(|port| {\n            create_test_port(port, bossy_rust::network::Protocol::Tcp, Some(port as u32))\n        }).collect();\n        app.filtered_ports = app.ports.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        // Should handle large datasets without issues\n        let result = terminal.draw(|f| {\n            bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n        });\n\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_render_performance() {\n        let mut app = AppState::default();\n        app.processes = create_realistic_test_processes();\n        app.filtered_processes = app.processes.clone();\n\n        let backend = TestBackend::new(120, 40);\n        let mut terminal = Terminal::new(backend).unwrap();\n\n        let start = std::time::Instant::now();\n        \n        // Render multiple times to test performance\n        for _ in 0..100 {\n            let result = terminal.draw(|f| {\n                bossy_rust::tui::dashboard::render_dashboard(f, \u0026mut app);\n            });\n            assert!(result.is_ok());\n        }\n        \n        let duration = start.elapsed();\n        \n        // Rendering should be fast (less than 1 second for 100 renders)\n        assert!(duration.as_millis() \u003c 1000, \"Rendering too slow: {:?}\", duration);\n    }\n\n    // Helper function to convert buffer to string for assertions\n    fn buffer_to_string(buffer: \u0026Buffer) -\u003e String {\n        buffer.content().iter()\n            .map(|cell| cell.symbol())\n            .collect::\u003cVec\u003c_\u003e\u003e()\n            .join(\"\")\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","tests","tui_events_tests.rs"],"content":"use bossy_rust::tui::{AppEvent, EventHandler};\nuse crossterm::event::{Event, KeyCode, KeyEvent, KeyModifiers};\nuse std::time::Duration;\nuse tokio::time::timeout;\n\n#[cfg(test)]\nmod event_handling_tests {\n    use super::*;\n\n    #[tokio::test]\n    async fn test_event_handler_creation() {\n        let handler = EventHandler::new(Duration::from_millis(100));\n        // Should create without panic\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_event_handler_default() {\n        let handler = EventHandler::default();\n        // Should create with default tick rate\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_event_polling_timeout() {\n        let handler = EventHandler::new(Duration::from_millis(10));\n        \n        // Should timeout and return Refresh event\n        let start = std::time::Instant::now();\n        let result = timeout(Duration::from_millis(50), handler.next()).await;\n        let duration = start.elapsed();\n        \n        assert!(result.is_ok());\n        if let Ok(Ok(event)) = result {\n            match event {\n                AppEvent::Refresh =\u003e {\n                    // Expected timeout behavior\n                    assert!(duration \u003e= Duration::from_millis(10));\n                    assert!(duration \u003c Duration::from_millis(30));\n                }\n                _ =\u003e {\n                    // Other events are also valid if system generated them\n                    assert!(true);\n                }\n            }\n        }\n    }\n\n    #[test]\n    fn test_app_event_variants() {\n        // Test that all AppEvent variants can be created\n        let key_event = KeyEvent::new(KeyCode::Char('a'), KeyModifiers::NONE);\n        let _app_event_key = AppEvent::Key(key_event);\n        let _app_event_resize = AppEvent::Resize(80, 24);\n        let _app_event_refresh = AppEvent::Refresh;\n        \n        // Should compile and create without issues\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_event_handler_responsiveness() {\n        let handler = EventHandler::new(Duration::from_millis(1));\n        \n        // Test that handler responds quickly\n        let start = std::time::Instant::now();\n        let result = timeout(Duration::from_millis(100), handler.next()).await;\n        let duration = start.elapsed();\n        \n        assert!(result.is_ok());\n        assert!(duration \u003c Duration::from_millis(50), \"Event handler too slow: {:?}\", duration);\n    }\n\n    #[tokio::test]\n    async fn test_multiple_event_polling() {\n        let handler = EventHandler::new(Duration::from_millis(5));\n        \n        // Poll multiple events quickly\n        for _ in 0..5 {\n            let result = timeout(Duration::from_millis(20), handler.next()).await;\n            assert!(result.is_ok());\n        }\n    }\n\n    #[tokio::test]\n    async fn test_event_handler_error_resilience() {\n        let handler = EventHandler::new(Duration::from_millis(1));\n        \n        // Even if there are system issues, handler should not panic\n        for _ in 0..10 {\n            let result = handler.next().await;\n            // Should either succeed or fail gracefully\n            match result {\n                Ok(_) =\u003e assert!(true),\n                Err(_) =\u003e {\n                    // Errors are acceptable in test environment\n                    assert!(true);\n                    break;\n                }\n            }\n        }\n    }\n\n    #[test]\n    fn test_key_event_creation() {\n        // Test various key combinations\n        let key_events = [\n            KeyEvent::new(KeyCode::Char('q'), KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::Char('c'), KeyModifiers::CONTROL),\n            KeyEvent::new(KeyCode::Enter, KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::Esc, KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::Up, KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::Down, KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::F(1), KeyModifiers::NONE),\n            KeyEvent::new(KeyCode::Char('/'), KeyModifiers::NONE),\n        ];\n        \n        for key_event in key_events {\n            let app_event = AppEvent::Key(key_event);\n            // Should create successfully\n            match app_event {\n                AppEvent::Key(_) =\u003e assert!(true),\n                _ =\u003e panic!(\"Wrong event type\"),\n            }\n        }\n    }\n\n    #[test]\n    fn test_resize_event_creation() {\n        let resize_events = [\n            AppEvent::Resize(80, 24),\n            AppEvent::Resize(120, 40),\n            AppEvent::Resize(160, 50),\n            AppEvent::Resize(1, 1),        // Minimum size\n            AppEvent::Resize(999, 999),    // Large size\n        ];\n        \n        for event in resize_events {\n            match event {\n                AppEvent::Resize(w, h) =\u003e {\n                    assert!(w \u003e 0);\n                    assert!(h \u003e 0);\n                }\n                _ =\u003e panic!(\"Wrong event type\"),\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod event_integration_tests {\n    use super::*;\n    use bossy_rust::testing::*;\n    use bossy_rust::tui::AppState;\n\n    #[tokio::test]\n    async fn test_key_event_integration_with_app_state() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test basic navigation keys\n        let navigation_keys = [\n            KeyCode::Up,\n            KeyCode::Down,\n            KeyCode::Left,\n            KeyCode::Right,\n            KeyCode::Home,\n            KeyCode::End,\n            KeyCode::PageUp,\n            KeyCode::PageDown,\n        ];\n        \n        for key in navigation_keys {\n            let result = helper.press_key(key).await;\n            assert!(result.is_ok(), \"Failed to handle key: {:?}\", key);\n            TUIAssertions::assert_valid_state(\u0026helper.app);\n        }\n    }\n\n    #[tokio::test]\n    async fn test_function_key_integration() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test function keys for mode switching\n        let initial_mode = helper.app.mode.clone();\n        \n        // F1: Process View\n        helper.press_key(KeyCode::F(1)).await.unwrap();\n        assert_ne!(helper.app.mode, initial_mode);\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n        \n        // F2: Port View\n        helper.press_key(KeyCode::F(2)).await.unwrap();\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n        \n        // F3: Connection View\n        helper.press_key(KeyCode::F(3)).await.unwrap();\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n        \n        // F4: Dashboard\n        helper.press_key(KeyCode::F(4)).await.unwrap();\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n    }\n\n    #[tokio::test]\n    async fn test_control_key_combinations() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test Ctrl+C (quit)\n        let result = helper.press_key_with_modifiers(KeyCode::Char('c'), KeyModifiers::CONTROL).await;\n        assert!(result.is_ok());\n        assert!(helper.app.should_quit);\n        \n        // Reset quit state for next test\n        helper.app.should_quit = false;\n        \n        // Test Ctrl+R (refresh)\n        let result = helper.press_key_with_modifiers(KeyCode::Char('r'), KeyModifiers::CONTROL).await;\n        assert!(result.is_ok());\n        assert!(!helper.app.should_quit);\n    }\n\n    #[tokio::test]\n    async fn test_search_mode_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Enter search mode\n        helper.press_key(KeyCode::Char('/')).await.unwrap();\n        assert!(helper.app.search_active);\n        \n        // Type search query\n        let search_chars = ['n', 'o', 'd', 'e'];\n        for ch in search_chars {\n            helper.press_key(KeyCode::Char(ch)).await.unwrap();\n        }\n        assert_eq!(helper.app.search_query, \"node\");\n        \n        // Test backspace\n        helper.press_key(KeyCode::Backspace).await.unwrap();\n        assert_eq!(helper.app.search_query, \"nod\");\n        \n        // Test search help toggle\n        helper.press_key(KeyCode::F(1)).await.unwrap();\n        // Help state should toggle\n        \n        // Test tab completion\n        helper.press_key(KeyCode::Tab).await.unwrap();\n        // Should handle tab completion\n        \n        // Exit search mode\n        helper.press_key(KeyCode::Esc).await.unwrap();\n        assert!(!helper.app.search_active);\n        assert!(helper.app.search_query.is_empty());\n    }\n\n    #[tokio::test]\n    async fn test_confirmation_dialog_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Set up a scenario that triggers confirmation dialog\n        helper.switch_to_mode(bossy_rust::tui::AppMode::ProcessView);\n        if !helper.app.filtered_processes.is_empty() {\n            // Trigger action that shows confirmation\n            helper.press_key(KeyCode::Enter).await.unwrap();\n            \n            if helper.app.confirmation_dialog.is_some() {\n                // Test confirmation\n                helper.press_key(KeyCode::Char('y')).await.unwrap();\n                assert!(helper.app.confirmation_dialog.is_none());\n            }\n        }\n        \n        // Test rejection\n        if !helper.app.filtered_processes.is_empty() {\n            helper.press_key(KeyCode::Enter).await.unwrap();\n            \n            if helper.app.confirmation_dialog.is_some() {\n                helper.press_key(KeyCode::Char('n')).await.unwrap();\n                assert!(helper.app.confirmation_dialog.is_none());\n            }\n        }\n    }\n\n    #[tokio::test]\n    async fn test_multi_selection_events() {\n        let mut helper = TUITestHelper::new();\n        helper.switch_to_mode(bossy_rust::tui::AppMode::ProcessView);\n        \n        // Test space key for multi-selection\n        helper.press_key(KeyCode::Char(' ')).await.unwrap();\n        \n        if !helper.app.filtered_processes.is_empty() {\n            assert!(helper.app.multi_select_mode);\n            assert!(!helper.app.selected_items.is_empty());\n        }\n        \n        // Move to next item and select\n        helper.press_key(KeyCode::Down).await.unwrap();\n        helper.press_key(KeyCode::Char(' ')).await.unwrap();\n        \n        TUIAssertions::assert_valid_state(\u0026helper.app);\n    }\n\n    #[tokio::test]\n    async fn test_help_dialog_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Toggle help\n        helper.press_key(KeyCode::Char('?')).await.unwrap();\n        assert!(helper.app.show_help);\n        \n        // Toggle help off with 'q'\n        helper.press_key(KeyCode::Char('q')).await.unwrap();\n        assert!(!helper.app.show_help);\n        assert!(!helper.app.should_quit); // Should not quit when help is shown\n    }\n\n    #[tokio::test]\n    async fn test_theme_selector_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Enter theme selector\n        helper.press_key(KeyCode::Char('t')).await.unwrap();\n        assert_eq!(helper.app.mode, bossy_rust::tui::AppMode::ThemeSelector);\n        \n        // Navigate themes\n        let original_theme = helper.app.current_theme_index;\n        helper.press_key(KeyCode::Down).await.unwrap();\n        \n        // Select theme\n        helper.press_key(KeyCode::Enter).await.unwrap();\n        assert_eq!(helper.app.mode, bossy_rust::tui::AppMode::Dashboard);\n        \n        // Exit theme selector without selection\n        helper.press_key(KeyCode::Char('t')).await.unwrap();\n        helper.press_key(KeyCode::Esc).await.unwrap();\n        assert_eq!(helper.app.mode, bossy_rust::tui::AppMode::Dashboard);\n    }\n\n    #[tokio::test]\n    async fn test_sorting_events() {\n        let mut helper = TUITestHelper::new();\n        helper.switch_to_mode(bossy_rust::tui::AppMode::ProcessView);\n        \n        let initial_sort = helper.app.sort_by.clone();\n        \n        // Test sort cycling\n        helper.press_key(KeyCode::Char('s')).await.unwrap();\n        assert_ne!(helper.app.sort_by, initial_sort);\n        \n        TUIAssertions::assert_valid_state(\u0026helper.app);\n    }\n\n    #[tokio::test]\n    async fn test_view_toggle_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test detailed view toggle\n        let initial_detailed = helper.app.detailed_view_mode;\n        helper.press_key(KeyCode::Char('d')).await.unwrap();\n        assert_ne!(helper.app.detailed_view_mode, initial_detailed);\n        \n        // Test column headers toggle\n        let initial_headers = helper.app.column_headers_visible;\n        helper.press_key(KeyCode::Char('c')).await.unwrap();\n        assert_ne!(helper.app.column_headers_visible, initial_headers);\n    }\n\n    #[tokio::test]\n    async fn test_navigation_history_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Build navigation history\n        helper.switch_to_mode(bossy_rust::tui::AppMode::ProcessView);\n        helper.switch_to_mode(bossy_rust::tui::AppMode::PortView);\n        helper.switch_to_mode(bossy_rust::tui::AppMode::ConnectionView);\n        \n        // Test back navigation\n        helper.press_key(KeyCode::Char('h')).await.unwrap();\n        \n        // Should have navigated back\n        TUIAssertions::assert_valid_state(\u0026helper.app);\n    }\n\n    #[tokio::test]\n    async fn test_edge_case_events() {\n        let mut helper = TUITestHelper::new();\n        \n        // Test with empty data\n        helper.app.filtered_processes.clear();\n        helper.app.filtered_ports.clear();\n        helper.app.filtered_connections.clear();\n        \n        // Navigation should handle empty data gracefully\n        helper.press_key(KeyCode::Down).await.unwrap();\n        helper.press_key(KeyCode::Up).await.unwrap();\n        helper.press_key(KeyCode::Enter).await.unwrap();\n        \n        TUIAssertions::assert_valid_state(\u0026helper.app);\n        \n        // Quit events should always work\n        helper.press_key(KeyCode::Char('q')).await.unwrap();\n        assert!(helper.app.should_quit);\n    }\n}","traces":[],"covered":0,"coverable":0}]};
        var previousData = {"files":[{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","commands","cli.rs"],"content":"use crate::network::{NetworkUtils, PortManager};\nuse crate::process::{ProcessKiller, ProcessMonitor};\nuse anyhow::Result;\n\npub struct CliHandler;\n\nimpl CliHandler {\n    pub async fn show_port_info(port: u16) -\u003e Result\u003c()\u003e {\n        let ports = PortManager::get_port_by_number(port)?;\n\n        if ports.is_empty() {\n            println!(\"No processes found using port {port}\");\n            return Ok(());\n        }\n\n        println!(\"Port {port} information:\");\n        println!(\"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\");\n\n        for port_info in ports {\n            println!(\"Protocol: {:?}\", port_info.protocol);\n            println!(\"State: {:?}\", port_info.state);\n            println!(\"Local Address: {}\", port_info.local_address);\n\n            if let Some(remote) = \u0026port_info.remote_address {\n                println!(\"Remote Address: {remote}\");\n            }\n\n            if let Some(pid) = port_info.pid {\n                println!(\"PID: {pid}\");\n            }\n\n            if let Some(ref process_name) = port_info.process_name {\n                println!(\"Process: {process_name}\");\n            }\n\n            if let Some(service) = port_info.get_service_suggestion() {\n                println!(\"Service: {service}\");\n            }\n\n            println!(\"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\");\n        }\n\n        Ok(())\n    }\n\n    pub async fn kill_port(port: u16) -\u003e Result\u003c()\u003e {\n        println!(\"Killing process using port {port}...\");\n\n        match ProcessKiller::kill_process_by_port(port).await {\n            Ok(pid) =\u003e {\n                println!(\"âœ… Successfully killed process {pid} using port {port}\");\n            }\n            Err(e) =\u003e {\n                eprintln!(\"âŒ Failed to kill process on port {port}: {e}\");\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n\n    pub async fn show_ports(common: bool, listening: bool) -\u003e Result\u003c()\u003e {\n        let ports = if listening {\n            PortManager::get_listening_ports()?\n        } else if common {\n            PortManager::get_development_ports()?\n        } else {\n            PortManager::get_all_ports()?\n        };\n\n        if ports.is_empty() {\n            println!(\"No ports found\");\n            return Ok(());\n        }\n\n        println!(\"Ports ({}):\", ports.len());\n        println!(\"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\");\n        println!(\"â”‚  Port   â”‚ Proto   â”‚   State    â”‚   PID   â”‚       Process       â”‚       Service        â”‚\");\n        println!(\"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\");\n\n        for port in ports {\n            let protocol = format!(\"{:?}\", port.protocol);\n            let state = format!(\"{:?}\", port.state);\n            let pid = port.pid.map_or(\"-\".to_string(), |p| p.to_string());\n            let process = port.process_name.as_deref().unwrap_or(\"-\");\n            let service = port.get_service_suggestion().unwrap_or(\"-\".to_string());\n\n            println!(\n                \"â”‚ {:\u003e7} â”‚ {:\u003e7} â”‚ {:\u003e10} â”‚ {:\u003e7} â”‚ {:\u003e19} â”‚ {:\u003e20} â”‚\",\n                port.port,\n                \u0026protocol[..std::cmp::min(protocol.len(), 7)],\n                \u0026state[..std::cmp::min(state.len(), 10)],\n                \u0026pid[..std::cmp::min(pid.len(), 7)],\n                \u0026process[..std::cmp::min(process.len(), 19)],\n                \u0026service[..std::cmp::min(service.len(), 20)]\n            );\n        }\n\n        println!(\"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\");\n\n        Ok(())\n    }\n\n    pub async fn kill_process(name: \u0026str, force: bool) -\u003e Result\u003c()\u003e {\n        println!(\"Killing processes matching '{name}'...\");\n\n        match ProcessKiller::kill_processes_by_name(name, force).await {\n            Ok(pids) =\u003e {\n                if pids.is_empty() {\n                    println!(\"No processes found matching '{name}'\");\n                } else {\n                    println!(\n                        \"âœ… Successfully killed {} process(es): {pids:?}\",\n                        pids.len()\n                    );\n                }\n            }\n            Err(e) =\u003e {\n                eprintln!(\"âŒ Failed to kill processes: {e}\");\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n\n    pub async fn show_processes(top_cpu: bool, top_memory: bool, limit: usize) -\u003e Result\u003c()\u003e {\n        let mut monitor = ProcessMonitor::new();\n\n        let processes = if top_cpu {\n            monitor.get_top_cpu_processes(limit)\n        } else if top_memory {\n            monitor.get_top_memory_processes(limit)\n        } else {\n            let mut procs = monitor.get_processes();\n            procs.truncate(limit);\n            procs\n        };\n\n        if processes.is_empty() {\n            println!(\"No processes found\");\n            return Ok(());\n        }\n\n        let title = if top_cpu {\n            format!(\"Top {limit} CPU Consumers\")\n        } else if top_memory {\n            format!(\"Top {limit} Memory Consumers\")\n        } else {\n            format!(\"Processes (showing {limit})\")\n        };\n\n        println!(\"{title}:\");\n        println!(\"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\");\n        println!(\"â”‚   PID    â”‚       Process       â”‚  CPU %  â”‚   Memory    â”‚    Status    â”‚\");\n        println!(\"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\");\n\n        for process in processes {\n            let name = if process.name.chars().count() \u003e 19 {\n                format!(\"{}â€¦\", process.name.chars().take(18).collect::\u003cString\u003e())\n            } else {\n                process.name.clone()\n            };\n\n            let status = if process.status.chars().count() \u003e 12 {\n                format!(\"{}â€¦\", process.status.chars().take(11).collect::\u003cString\u003e())\n            } else {\n                process.status.clone()\n            };\n\n            println!(\n                \"â”‚ {:\u003e8} â”‚ {:\u003e19} â”‚ {:\u003e7.1} â”‚ {:\u003e11} â”‚ {:\u003e12} â”‚\",\n                process.pid,\n                name,\n                process.cpu_usage,\n                process.format_memory(),\n                status\n            );\n        }\n\n        println!(\"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\");\n\n        Ok(())\n    }\n\n    pub async fn cleanup_processes(dev: bool) -\u003e Result\u003c()\u003e {\n        if dev {\n            println!(\"Cleaning up development processes...\");\n\n            match ProcessKiller::cleanup_dev_processes().await {\n                Ok(pids) =\u003e {\n                    if pids.is_empty() {\n                        println!(\"No development processes found to cleanup\");\n                    } else {\n                        println!(\n                            \"âœ… Cleaned up {} development processes: {pids:?}\",\n                            pids.len()\n                        );\n                    }\n                }\n                Err(e) =\u003e {\n                    eprintln!(\"âŒ Failed to cleanup processes: {e}\");\n                    std::process::exit(1);\n                }\n            }\n        } else {\n            println!(\"Please specify --dev to cleanup development processes\");\n        }\n\n        Ok(())\n    }\n\n    pub async fn find_available_port(start: u16, end: u16) -\u003e Result\u003c()\u003e {\n        println!(\"Searching for available ports in range {start}-{end}...\");\n\n        match ProcessKiller::find_available_port(start, end) {\n            Ok(port) =\u003e {\n                println!(\"âœ… Available port found: {port}\");\n\n                // Show suggestions for common development ports\n                if NetworkUtils::is_development_port(port) {\n                    if let Some(service) = NetworkUtils::get_well_known_ports().get(\u0026port) {\n                        println!(\"ğŸ’¡ This port is commonly used for: {service}\");\n                    }\n                }\n            }\n            Err(e) =\u003e {\n                println!(\"âŒ {e}\");\n\n                // Suggest alternatives\n                let alternatives = NetworkUtils::suggest_alternative_port(start);\n                if !alternatives.is_empty() {\n                    println!(\"ğŸ’¡ Consider trying these alternative ports: {alternatives:?}\");\n                }\n\n                std::process::exit(1);\n            }\n        }\n\n        Ok(())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::testing::mocks::MockSystemOutputs;\n\n    #[tokio::test]\n    async fn test_show_port_info_no_process() {\n        // This test would need to mock the PortManager\n        // For now, test that the function doesn't panic\n        assert!(true);\n    }\n\n    #[tokio::test]\n    #[ignore] // Ignore this test because kill_port calls std::process::exit(1)\n    async fn test_kill_port_invalid() {\n        // Test with a port that's very unlikely to be in use\n        // NOTE: This test is ignored because the kill_port function calls std::process::exit(1)\n        // which would terminate the test process. This is a design issue that should be addressed\n        // by refactoring the CLI functions to return errors instead of calling exit.\n        let result = CliHandler::kill_port(65534).await;\n        match result {\n            Ok(_) =\u003e assert!(true),\n            Err(_) =\u003e assert!(true),\n        }\n    }\n\n    #[tokio::test]\n    async fn test_show_all_ports() {\n        let result = CliHandler::show_ports(false, false).await;\n        // Should not panic, may succeed or fail based on system state\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_kill_process_non_existent() {\n        let result = CliHandler::kill_process(\"non_existent_process_xyz_123\", false).await;\n        // Should handle non-existent process gracefully\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_show_processes() {\n        let result = CliHandler::show_processes(false, false, 5).await;\n        // Should not panic\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_cleanup_development_processes() {\n        let result = CliHandler::cleanup_processes(false).await;\n        // Should handle cleanup gracefully\n        assert!(result.is_ok());\n    }\n\n    #[tokio::test]\n    async fn test_find_available_port() {\n        let result = CliHandler::find_available_port(50000, 50010).await;\n        // Should find an available port in this range\n        assert!(result.is_ok() || result.is_err());\n    }\n\n    #[test]\n    fn test_mock_system_outputs() {\n        let ps_output = MockSystemOutputs::mock_ps_output();\n        assert!(ps_output.contains(\"node server.js\"));\n        assert!(ps_output.contains(\"PID\"));\n\n        let lsof_output = MockSystemOutputs::mock_lsof_output();\n        assert!(lsof_output.contains(\":3000\"));\n        assert!(lsof_output.contains(\"LISTEN\"));\n\n        let netstat_output = MockSystemOutputs::mock_netstat_output();\n        assert!(netstat_output.contains(\"127.0.0.1\"));\n        assert!(netstat_output.contains(\"ESTABLISHED\"));\n    }\n\n    #[test]\n    fn test_cli_handler_instantiation() {\n        // Test that CliHandler can be instantiated (though it's a unit struct)\n        let _handler = CliHandler;\n        assert!(true);\n    }\n}\n","traces":[{"line":8,"address":[],"length":0,"stats":{"Line":6}},{"line":9,"address":[],"length":0,"stats":{"Line":9}},{"line":11,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":6}},{"line":13,"address":[],"length":0,"stats":{"Line":3}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":8}},{"line":63,"address":[],"length":0,"stats":{"Line":8}},{"line":64,"address":[],"length":0,"stats":{"Line":2}},{"line":65,"address":[],"length":0,"stats":{"Line":2}},{"line":66,"address":[],"length":0,"stats":{"Line":1}},{"line":68,"address":[],"length":0,"stats":{"Line":1}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":2}},{"line":73,"address":[],"length":0,"stats":{"Line":1}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":367}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":220}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":2}},{"line":105,"address":[],"length":0,"stats":{"Line":2}},{"line":107,"address":[],"length":0,"stats":{"Line":4}},{"line":108,"address":[],"length":0,"stats":{"Line":1}},{"line":109,"address":[],"length":0,"stats":{"Line":3}},{"line":110,"address":[],"length":0,"stats":{"Line":1}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":1}},{"line":127,"address":[],"length":0,"stats":{"Line":12}},{"line":128,"address":[],"length":0,"stats":{"Line":12}},{"line":130,"address":[],"length":0,"stats":{"Line":12}},{"line":131,"address":[],"length":0,"stats":{"Line":3}},{"line":132,"address":[],"length":0,"stats":{"Line":5}},{"line":133,"address":[],"length":0,"stats":{"Line":3}},{"line":135,"address":[],"length":0,"stats":{"Line":4}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":12}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":2}},{"line":147,"address":[],"length":0,"stats":{"Line":5}},{"line":148,"address":[],"length":0,"stats":{"Line":2}},{"line":150,"address":[],"length":0,"stats":{"Line":4}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":84}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":50}},{"line":162,"address":[],"length":0,"stats":{"Line":29}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":39}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":4}},{"line":187,"address":[],"length":0,"stats":{"Line":2}},{"line":188,"address":[],"length":0,"stats":{"Line":2}},{"line":190,"address":[],"length":0,"stats":{"Line":2}},{"line":191,"address":[],"length":0,"stats":{"Line":1}},{"line":192,"address":[],"length":0,"stats":{"Line":2}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":1}},{"line":196,"address":[],"length":0,"stats":{"Line":1}},{"line":197,"address":[],"length":0,"stats":{"Line":1}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":1}},{"line":210,"address":[],"length":0,"stats":{"Line":2}},{"line":213,"address":[],"length":0,"stats":{"Line":6}},{"line":214,"address":[],"length":0,"stats":{"Line":6}},{"line":216,"address":[],"length":0,"stats":{"Line":6}},{"line":217,"address":[],"length":0,"stats":{"Line":3}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}}],"covered":52,"coverable":134},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","commands","mod.rs"],"content":"pub mod cli;\n\npub use cli::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","config","mod.rs"],"content":"pub mod settings;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","config","settings.rs"],"content":"use anyhow::Result;\nuse serde::{Deserialize, Serialize};\nuse std::fs;\nuse std::path::PathBuf;\n\n#[derive(Serialize, Deserialize, Debug, Clone)]\npub struct UserSettings {\n    pub theme_name: String,\n}\n\nimpl Default for UserSettings {\n    fn default() -\u003e Self {\n        Self {\n            theme_name: \"Kanagawa\".to_string(),\n        }\n    }\n}\n\nfn get_config_path() -\u003e Result\u003cPathBuf\u003e {\n    let config_dir =\n        dirs::config_dir().ok_or_else(|| anyhow::anyhow!(\"Could not find config directory\"))?;\n    let app_config_dir = config_dir.join(\"bossy-rust\");\n    fs::create_dir_all(\u0026app_config_dir)?;\n    Ok(app_config_dir.join(\"settings.toml\"))\n}\n\npub fn save_settings(settings: \u0026UserSettings) -\u003e Result\u003c()\u003e {\n    let path = get_config_path()?;\n    let toml_string = toml::to_string(settings)?;\n    fs::write(path, toml_string)?;\n    Ok(())\n}\n\npub fn load_settings() -\u003e Result\u003cUserSettings\u003e {\n    let path = get_config_path()?;\n    if !path.exists() {\n        return Ok(UserSettings::default());\n    }\n    let toml_string = fs::read_to_string(path)?;\n    let settings: UserSettings = toml::from_str(\u0026toml_string)?;\n    Ok(settings)\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":13}},{"line":14,"address":[],"length":0,"stats":{"Line":13}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}}],"covered":2,"coverable":19},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","main.rs"],"content":"mod commands;\nmod config;\nmod network;\nmod process;\nmod tui;\n\n#[cfg(test)]\nmod testing;\n\nuse anyhow::Result;\nuse clap::{Parser, Subcommand};\nuse crossterm::{\n    execute,\n    terminal::{disable_raw_mode, enable_raw_mode, EnterAlternateScreen, LeaveAlternateScreen},\n};\nuse ratatui::{backend::CrosstermBackend, Terminal};\nuse std::{io, time::Duration};\nuse tokio::time::sleep;\nuse tui::{AppEvent, AppState, EventHandler};\n\n#[derive(Parser)]\n#[command(name = \"bossy-rust\")]\n#[command(about = \"A lightweight Terminal User Interface (TUI) process manager for macOS\")]\n#[command(version = \"0.1.0\")]\n#[command(author = \"Pedro Nieto\")]\nstruct Cli {\n    #[command(subcommand)]\n    command: Option\u003cCommands\u003e,\n}\n\n#[derive(Subcommand)]\nenum Commands {\n    /// Show what's using a specific port\n    Port { port: u16 },\n    /// Kill process using a specific port\n    KillPort { port: u16 },\n    /// Show all ports with optional filtering\n    Ports {\n        /// Show only common development ports\n        #[arg(long)]\n        common: bool,\n        /// Show only listening ports\n        #[arg(long)]\n        listening: bool,\n    },\n    /// Kill processes by name\n    KillProcess {\n        name: String,\n        /// Force kill (SIGKILL instead of SIGTERM)\n        #[arg(short, long)]\n        force: bool,\n    },\n    /// Show processes with optional filtering\n    Ps {\n        /// Show top CPU consumers\n        #[arg(long)]\n        top_cpu: bool,\n        /// Show top memory consumers\n        #[arg(long)]\n        top_memory: bool,\n        /// Limit number of results\n        #[arg(short, long, default_value = \"10\")]\n        limit: usize,\n    },\n    /// Cleanup common development processes\n    Cleanup {\n        /// Target development processes\n        #[arg(long)]\n        dev: bool,\n    },\n    /// Find available port in range\n    FindPort {\n        /// Start port (default: 3000)\n        #[arg(default_value = \"3000\")]\n        start: u16,\n        /// End port (default: start + 100)\n        end: Option\u003cu16\u003e,\n    },\n}\n\n#[tokio::main]\nasync fn main() -\u003e Result\u003c()\u003e {\n    let cli = Cli::parse();\n\n    match cli.command {\n        Some(command) =\u003e {\n            // Handle CLI commands\n            handle_cli_command(command).await?;\n        }\n        None =\u003e {\n            // Launch interactive TUI\n            run_tui().await?;\n        }\n    }\n\n    Ok(())\n}\n\nasync fn handle_cli_command(command: Commands) -\u003e Result\u003c()\u003e {\n    use commands::CliHandler;\n\n    match command {\n        Commands::Port { port } =\u003e {\n            CliHandler::show_port_info(port).await?;\n        }\n        Commands::KillPort { port } =\u003e {\n            CliHandler::kill_port(port).await?;\n        }\n        Commands::Ports { common, listening } =\u003e {\n            CliHandler::show_ports(common, listening).await?;\n        }\n        Commands::KillProcess { name, force } =\u003e {\n            CliHandler::kill_process(\u0026name, force).await?;\n        }\n        Commands::Ps {\n            top_cpu,\n            top_memory,\n            limit,\n        } =\u003e {\n            CliHandler::show_processes(top_cpu, top_memory, limit).await?;\n        }\n        Commands::Cleanup { dev } =\u003e {\n            CliHandler::cleanup_processes(dev).await?;\n        }\n        Commands::FindPort { start, end } =\u003e {\n            let end = end.unwrap_or(start + 100);\n            CliHandler::find_available_port(start, end).await?;\n        }\n    }\n\n    Ok(())\n}\n\nasync fn run_tui() -\u003e Result\u003c()\u003e {\n    // Setup terminal\n    enable_raw_mode()?;\n    let mut stdout = io::stdout();\n    execute!(stdout, EnterAlternateScreen)?;\n    let backend = CrosstermBackend::new(stdout);\n    let mut terminal = Terminal::new(backend)?;\n\n    // Create app state\n    let mut app = AppState::new()?;\n    let event_handler = EventHandler::default();\n\n    // Main event loop\n    loop {\n        // Render UI\n        terminal.draw(|f| {\n            tui::dashboard::render_dashboard(f, \u0026mut app);\n        })?;\n\n        // Handle events\n        match event_handler.next().await? {\n            AppEvent::Key(key_event) =\u003e {\n                app.handle_key_event(key_event).await?;\n            }\n            AppEvent::Resize(width, height) =\u003e {\n                terminal.resize(ratatui::layout::Rect::new(0, 0, width, height))?;\n            }\n            AppEvent::Refresh =\u003e {\n                if app.should_refresh() {\n                    app.refresh_data()?;\n                }\n            }\n        }\n\n        // Check if we should quit\n        if app.should_quit {\n            break;\n        }\n\n        // Small delay to prevent excessive CPU usage\n        sleep(Duration::from_millis(16)).await; // ~60fps\n    }\n\n    // Cleanup terminal\n    disable_raw_mode()?;\n    execute!(terminal.backend_mut(), LeaveAlternateScreen)?;\n    terminal.show_cursor()?;\n\n    Ok(())\n}\n","traces":[{"line":79,"address":[],"length":0,"stats":{"Line":66}},{"line":80,"address":[],"length":0,"stats":{"Line":66}},{"line":82,"address":[],"length":0,"stats":{"Line":66}},{"line":83,"address":[],"length":0,"stats":{"Line":52}},{"line":85,"address":[],"length":0,"stats":{"Line":71}},{"line":87,"address":[],"length":0,"stats":{"Line":33}},{"line":89,"address":[],"length":0,"stats":{"Line":47}},{"line":93,"address":[],"length":0,"stats":{"Line":52}},{"line":96,"address":[],"length":0,"stats":{"Line":38}},{"line":99,"address":[],"length":0,"stats":{"Line":19}},{"line":100,"address":[],"length":0,"stats":{"Line":3}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":8}},{"line":107,"address":[],"length":0,"stats":{"Line":12}},{"line":109,"address":[],"length":0,"stats":{"Line":2}},{"line":110,"address":[],"length":0,"stats":{"Line":3}},{"line":113,"address":[],"length":0,"stats":{"Line":6}},{"line":114,"address":[],"length":0,"stats":{"Line":6}},{"line":115,"address":[],"length":0,"stats":{"Line":6}},{"line":117,"address":[],"length":0,"stats":{"Line":24}},{"line":119,"address":[],"length":0,"stats":{"Line":2}},{"line":120,"address":[],"length":0,"stats":{"Line":4}},{"line":122,"address":[],"length":0,"stats":{"Line":6}},{"line":123,"address":[],"length":0,"stats":{"Line":12}},{"line":124,"address":[],"length":0,"stats":{"Line":9}},{"line":128,"address":[],"length":0,"stats":{"Line":19}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}}],"covered":25,"coverable":52},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","connections.rs"],"content":"use crate::network::Protocol;\nuse std::net::SocketAddr;\n\n#[derive(Debug, Clone)]\npub struct ConnectionInfo {\n    pub protocol: Protocol,\n    pub local_address: SocketAddr,\n    pub remote_address: SocketAddr,\n    pub pid: Option\u003cu32\u003e,\n    pub process_name: Option\u003cString\u003e,\n}\n\nimpl ConnectionInfo {\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        if self.local_address.to_string().contains(\u0026query)\n            || self.remote_address.to_string().contains(\u0026query)\n        {\n            return true;\n        }\n\n        if let Some(process_name) = \u0026self.process_name {\n            if process_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        if let Some(pid) = self.pid {\n            if pid.to_string().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        false\n    }\n}\n","traces":[{"line":14,"address":[],"length":0,"stats":{"Line":6}},{"line":15,"address":[],"length":0,"stats":{"Line":18}},{"line":17,"address":[],"length":0,"stats":{"Line":12}},{"line":18,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":1}},{"line":23,"address":[],"length":0,"stats":{"Line":5}},{"line":25,"address":[],"length":0,"stats":{"Line":1}},{"line":29,"address":[],"length":0,"stats":{"Line":8}},{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":35,"address":[],"length":0,"stats":{"Line":3}}],"covered":10,"coverable":10},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","mod.rs"],"content":"pub mod connections;\npub mod ports;\npub mod utils;\n\npub use connections::*;\npub use ports::*;\npub use utils::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","ports.rs"],"content":"use crate::network::connections::ConnectionInfo;\nuse anyhow::{anyhow, Result};\nuse regex::Regex;\nuse std::collections::HashMap;\nuse std::net::{IpAddr, SocketAddr};\nuse std::process::Command;\n\n#[derive(Debug, Clone)]\npub struct PortInfo {\n    pub port: u16,\n    pub protocol: Protocol,\n    pub pid: Option\u003cu32\u003e,\n    pub process_name: Option\u003cString\u003e,\n    pub local_address: SocketAddr,\n    pub remote_address: Option\u003cSocketAddr\u003e,\n    pub state: ConnectionState,\n    pub service_name: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum Protocol {\n    Tcp,\n    Udp,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum ConnectionState {\n    Listen,\n    Established,\n    TimeWait,\n    CloseWait,\n    FinWait1,\n    FinWait2,\n    SynSent,\n    SynReceived,\n    Closed,\n    Unknown,\n}\n\nimpl From\u003c\u0026str\u003e for ConnectionState {\n    fn from(state: \u0026str) -\u003e Self {\n        match state.to_uppercase().as_str() {\n            \"LISTEN\" =\u003e ConnectionState::Listen,\n            \"ESTABLISHED\" =\u003e ConnectionState::Established,\n            \"TIME_WAIT\" =\u003e ConnectionState::TimeWait,\n            \"CLOSE_WAIT\" =\u003e ConnectionState::CloseWait,\n            \"FIN_WAIT1\" =\u003e ConnectionState::FinWait1,\n            \"FIN_WAIT2\" =\u003e ConnectionState::FinWait2,\n            \"SYN_SENT\" =\u003e ConnectionState::SynSent,\n            \"SYN_RCVD\" =\u003e ConnectionState::SynReceived,\n            \"CLOSED\" =\u003e ConnectionState::Closed,\n            _ =\u003e ConnectionState::Unknown,\n        }\n    }\n}\n\nimpl PortInfo {\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        // Handle port search patterns\n        if let Some(port_query) = query.strip_prefix(':') {\n            // Range search: :5432-5434\n            if port_query.contains('-') {\n                if let Some((start, end)) = port_query.split_once('-') {\n                    if let (Ok(start_port), Ok(end_port)) =\n                        (start.parse::\u003cu16\u003e(), end.parse::\u003cu16\u003e())\n                    {\n                        return self.port \u003e= start_port \u0026\u0026 self.port \u003c= end_port;\n                    }\n                }\n            } else {\n                // Exact port search: :3000\n                if let Ok(search_port) = port_query.parse::\u003cu16\u003e() {\n                    return self.port == search_port;\n                }\n            }\n        }\n\n        // Process name search\n        if let Some(ref process_name) = self.process_name {\n            if process_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        // Service name search\n        if let Some(ref service_name) = self.service_name {\n            if service_name.to_lowercase().contains(\u0026query) {\n                return true;\n            }\n        }\n\n        // Port number search\n        self.port.to_string().contains(\u0026query)\n    }\n\n    pub fn is_development_port(\u0026self) -\u003e bool {\n        matches!(self.port,\n            3000 | 3001 | 3002 | // React, Next.js\n            5000 | 5001 | 5002 | // Flask, various dev servers\n            8000 | 8080 | 8888 | // Django, generic HTTP\n            4200 | // Angular\n            5432 | // PostgreSQL\n            3306 | // MySQL\n            6379 | // Redis\n            27017 | // MongoDB\n            9200 | 9300 | // Elasticsearch\n            5672 | // RabbitMQ\n            1433 | // SQL Server\n            8081..=8090 | // Common dev ports\n            9000..=9010   // Common dev ports\n        )\n    }\n\n    pub fn get_service_suggestion(\u0026self) -\u003e Option\u003cString\u003e {\n        match self.port {\n            80 =\u003e Some(\"HTTP\".to_string()),\n            443 =\u003e Some(\"HTTPS\".to_string()),\n            22 =\u003e Some(\"SSH\".to_string()),\n            21 =\u003e Some(\"FTP\".to_string()),\n            25 =\u003e Some(\"SMTP\".to_string()),\n            53 =\u003e Some(\"DNS\".to_string()),\n            3000 =\u003e Some(\"React/Next.js Dev Server\".to_string()),\n            3001 =\u003e Some(\"Create React App\".to_string()),\n            4200 =\u003e Some(\"Angular Dev Server\".to_string()),\n            5000 =\u003e Some(\"Flask Dev Server\".to_string()),\n            8000 =\u003e Some(\"Django Dev Server\".to_string()),\n            8080 =\u003e Some(\"HTTP Alternate/Tomcat\".to_string()),\n            5432 =\u003e Some(\"PostgreSQL\".to_string()),\n            3306 =\u003e Some(\"MySQL\".to_string()),\n            6379 =\u003e Some(\"Redis\".to_string()),\n            27017 =\u003e Some(\"MongoDB\".to_string()),\n            9200 =\u003e Some(\"Elasticsearch\".to_string()),\n            5672 =\u003e Some(\"RabbitMQ\".to_string()),\n            _ =\u003e None,\n        }\n    }\n}\n\npub struct PortManager;\n\nimpl PortManager {\n    pub fn get_all_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let mut ports = Vec::new();\n\n        // Get TCP connections\n        ports.extend(Self::get_tcp_connections()?);\n\n        // Get UDP connections\n        ports.extend(Self::get_udp_connections()?);\n\n        Ok(ports)\n    }\n\n    pub fn get_listening_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.state == ConnectionState::Listen)\n            .collect())\n    }\n\n    pub fn get_port_by_number(port_number: u16) -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.port == port_number)\n            .collect())\n    }\n\n    pub fn get_development_ports() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| port.is_development_port())\n            .collect())\n    }\n\n    pub fn get_active_connections() -\u003e Result\u003cVec\u003cConnectionInfo\u003e\u003e {\n        Ok(Self::get_all_ports()?\n            .into_iter()\n            .filter(|port| {\n                port.state == ConnectionState::Established \u0026\u0026 port.remote_address.is_some()\n            })\n            .map(|port| ConnectionInfo {\n                protocol: port.protocol,\n                local_address: port.local_address,\n                remote_address: port.remote_address.unwrap(), // Safe due to filter\n                pid: port.pid,\n                process_name: port.process_name,\n            })\n            .collect())\n    }\n\n    fn get_tcp_connections() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let output = Command::new(\"netstat\")\n            .args([\"-an\", \"-p\", \"tcp\"])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"Failed to run netstat for TCP connections\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        Self::parse_netstat_output(\u0026stdout, Protocol::Tcp)\n    }\n\n    fn get_udp_connections() -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let output = Command::new(\"netstat\")\n            .args([\"-an\", \"-p\", \"udp\"])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"Failed to run netstat for UDP connections\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        Self::parse_netstat_output(\u0026stdout, Protocol::Udp)\n    }\n\n    fn parse_netstat_output(output: \u0026str, protocol: Protocol) -\u003e Result\u003cVec\u003cPortInfo\u003e\u003e {\n        let mut ports = Vec::new();\n        let pid_map = Self::get_pid_port_mapping()?;\n\n        for line in output.lines() {\n            if let Some(port_info) = Self::parse_netstat_line(line, \u0026protocol, \u0026pid_map) {\n                ports.push(port_info);\n            }\n        }\n\n        Ok(ports)\n    }\n\n    fn parse_netstat_line(\n        line: \u0026str,\n        protocol: \u0026Protocol,\n        pid_map: \u0026HashMap\u003cu16, (u32, String)\u003e,\n    ) -\u003e Option\u003cPortInfo\u003e {\n        let parts: Vec\u003c\u0026str\u003e = line.split_whitespace().collect();\n\n        if parts.len() \u003c 4 {\n            return None;\n        }\n\n        // Skip header lines\n        if parts[0] == \"Active\" || parts[0] == \"Proto\" {\n            return None;\n        }\n\n        let local_addr_str = parts.get(3)?;\n        let state_str = if protocol == \u0026Protocol::Tcp {\n            parts.get(5).unwrap_or(\u0026\"UNKNOWN\")\n        } else {\n            \"LISTEN\" // UDP doesn't have states in the same way\n        };\n\n        let local_addr = Self::parse_socket_addr(local_addr_str)?;\n        let port = local_addr.port();\n\n        let (pid, process_name) = pid_map\n            .get(\u0026port)\n            .map(|(pid, name)| (Some(*pid), Some(name.clone())))\n            .unwrap_or((None, None));\n\n        let remote_addr = if parts.len() \u003e 4 \u0026\u0026 parts[4] != \"*.*\" {\n            Self::parse_socket_addr(parts[4])\n        } else {\n            None\n        };\n\n        Some(PortInfo {\n            port,\n            protocol: protocol.clone(),\n            pid,\n            process_name,\n            local_address: local_addr,\n            remote_address: remote_addr,\n            state: ConnectionState::from(state_str),\n            service_name: None, // We'll populate this separately if needed\n        })\n    }\n\n    fn parse_socket_addr(addr_str: \u0026str) -\u003e Option\u003cSocketAddr\u003e {\n        // Handle different formats: *.port, ip.port, [ipv6]:port\n        if addr_str.starts_with('*') {\n            // *:port or *.port format\n            let port_str = addr_str.split(['.', ':']).next_back()?;\n            let port: u16 = port_str.parse().ok()?;\n            return Some(SocketAddr::new(IpAddr::from([0, 0, 0, 0]), port));\n        }\n\n        // Try parsing as regular socket address\n        if let Ok(addr) = addr_str.parse::\u003cSocketAddr\u003e() {\n            return Some(addr);\n        }\n\n        // Handle IPv4 dot notation: 127.0.0.1.8080\n        if let Some(last_dot) = addr_str.rfind('.') {\n            let ip_part = \u0026addr_str[..last_dot];\n            let port_part = \u0026addr_str[last_dot + 1..];\n\n            if let (Ok(ip), Ok(port)) = (ip_part.parse::\u003cIpAddr\u003e(), port_part.parse::\u003cu16\u003e()) {\n                return Some(SocketAddr::new(ip, port));\n            }\n        }\n\n        None\n    }\n\n    fn get_pid_port_mapping() -\u003e Result\u003cHashMap\u003cu16, (u32, String)\u003e\u003e {\n        let output = Command::new(\"lsof\").args([\"-i\", \"-P\", \"-n\"]).output()?;\n\n        if !output.status.success() {\n            return Ok(HashMap::new()); // Return empty map if lsof fails\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let mut mapping = HashMap::new();\n\n        let re = Regex::new(r\"(\\S+)\\s+(\\d+)\\s+\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+\\S+\\s+.*?:(\\d+)\")?;\n\n        for line in stdout.lines() {\n            if let Some(captures) = re.captures(line) {\n                if let (Some(process_name), Some(pid_str), Some(port_str)) =\n                    (captures.get(1), captures.get(2), captures.get(3))\n                {\n                    if let (Ok(pid), Ok(port)) = (\n                        pid_str.as_str().parse::\u003cu32\u003e(),\n                        port_str.as_str().parse::\u003cu16\u003e(),\n                    ) {\n                        mapping.insert(port, (pid, process_name.as_str().to_string()));\n                    }\n                }\n            }\n        }\n\n        Ok(mapping)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::network::NetworkUtils;\n    use std::net::{IpAddr, Ipv4Addr};\n\n    fn create_test_port_info() -\u003e PortInfo {\n        PortInfo {\n            port: 3000,\n            protocol: Protocol::Tcp,\n            pid: Some(1234),\n            process_name: Some(\"node\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(127, 0, 0, 1)), 3000),\n            remote_address: None,\n            state: ConnectionState::Listen,\n            service_name: None,\n        }\n    }\n\n    #[test]\n    fn test_port_info_creation() {\n        let port_info = create_test_port_info();\n        assert_eq!(port_info.port, 3000);\n        assert_eq!(port_info.protocol, Protocol::Tcp);\n        assert_eq!(port_info.state, ConnectionState::Listen);\n        assert_eq!(port_info.pid, Some(1234));\n        assert_eq!(port_info.process_name, Some(\"node\".to_string()));\n    }\n\n    #[test]\n    fn test_port_search_patterns() {\n        let port_info = create_test_port_info();\n\n        // Test port number search\n        assert!(port_info.matches_search(\":3000\"));\n        assert!(!port_info.matches_search(\":8080\"));\n\n        // Test process name search\n        assert!(port_info.matches_search(\"node\"));\n        assert!(port_info.matches_search(\"NODE\")); // case insensitive\n        assert!(!port_info.matches_search(\"python\"));\n\n        // Test general port search\n        assert!(port_info.matches_search(\"3000\"));\n    }\n\n    #[test]\n    fn test_port_range_search() {\n        let port_info = create_test_port_info();\n\n        // Test port range search\n        assert!(port_info.matches_search(\":2999-3001\"));\n        assert!(port_info.matches_search(\":3000-3000\"));\n        assert!(!port_info.matches_search(\":3001-3002\"));\n    }\n\n    #[test]\n    fn test_development_port_detection() {\n        let mut port_info = create_test_port_info();\n\n        // Test common development ports\n        port_info.port = 3000;\n        assert!(port_info.is_development_port());\n\n        port_info.port = 4200;\n        assert!(port_info.is_development_port());\n\n        port_info.port = 5432;\n        assert!(port_info.is_development_port());\n\n        // Test non-development port\n        port_info.port = 443;\n        assert!(!port_info.is_development_port());\n    }\n\n    #[test]\n    fn test_service_suggestions() {\n        let mut port_info = create_test_port_info();\n\n        // Test well-known port suggestions\n        port_info.port = 80;\n        assert_eq!(port_info.get_service_suggestion(), Some(\"HTTP\".to_string()));\n\n        port_info.port = 443;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"HTTPS\".to_string())\n        );\n\n        port_info.port = 3000;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"React/Next.js Dev Server\".to_string())\n        );\n\n        port_info.port = 5432;\n        assert_eq!(\n            port_info.get_service_suggestion(),\n            Some(\"PostgreSQL\".to_string())\n        );\n\n        // Test unknown port\n        port_info.port = 12345;\n        assert_eq!(port_info.get_service_suggestion(), None);\n    }\n\n    #[test]\n    fn test_protocol_matching() {\n        let mut port_info = create_test_port_info();\n\n        port_info.protocol = Protocol::Tcp;\n        assert_eq!(port_info.protocol, Protocol::Tcp);\n\n        port_info.protocol = Protocol::Udp;\n        assert_eq!(port_info.protocol, Protocol::Udp);\n\n        assert_ne!(Protocol::Tcp, Protocol::Udp);\n    }\n\n    #[test]\n    fn test_connection_state_parsing() {\n        assert_eq!(ConnectionState::from(\"LISTEN\"), ConnectionState::Listen);\n        assert_eq!(\n            ConnectionState::from(\"ESTABLISHED\"),\n            ConnectionState::Established\n        );\n        assert_eq!(\n            ConnectionState::from(\"TIME_WAIT\"),\n            ConnectionState::TimeWait\n        );\n        assert_eq!(\n            ConnectionState::from(\"UNKNOWN_STATE\"),\n            ConnectionState::Unknown\n        );\n    }\n\n    #[test]\n    fn test_socket_addr_parsing() {\n        // Test IPv4 address parsing\n        let addr = PortManager::parse_socket_addr(\"127.0.0.1.3000\");\n        assert!(addr.is_some());\n        let addr = addr.unwrap();\n        assert_eq!(addr.port(), 3000);\n\n        // Test wildcard address parsing\n        let addr = PortManager::parse_socket_addr(\"*.3000\");\n        assert!(addr.is_some());\n        let addr = addr.unwrap();\n        assert_eq!(addr.port(), 3000);\n        assert!(addr.ip().is_unspecified());\n\n        // Test invalid address\n        let addr = PortManager::parse_socket_addr(\"invalid\");\n        assert!(addr.is_none());\n    }\n\n    #[test]\n    fn test_common_ports_mapping() {\n        let common_ports = NetworkUtils::get_well_known_ports();\n\n        assert_eq!(common_ports.get(\u002680), Some(\u0026\"HTTP\"));\n        assert_eq!(common_ports.get(\u0026443), Some(\u0026\"HTTPS\"));\n        assert_eq!(common_ports.get(\u00263000), Some(\u0026\"React/Next.js Dev\"));\n        assert_eq!(common_ports.get(\u00265432), Some(\u0026\"PostgreSQL\"));\n        assert_eq!(common_ports.get(\u002665534), None);\n    }\n\n    #[test]\n    fn test_invalid_search_patterns() {\n        let port_info = create_test_port_info();\n\n        // Invalid port range format\n        assert!(!port_info.matches_search(\":abc-def\"));\n        assert!(!port_info.matches_search(\":3000-\"));\n        assert!(!port_info.matches_search(\":-3000\"));\n\n        // Empty searches should not match port patterns\n        assert!(!port_info.matches_search(\":\"));\n        // Empty search should match (falls through to name search which contains \"\")\n        // assert!(!port_info.matches_search(\"\"));  // This actually matches everything\n    }\n\n    #[test]\n    fn test_port_manager_error_handling() {\n        // These tests would ideally mock the system commands,\n        // but for now we'll just test that the functions don't panic\n\n        // Test with invalid port numbers in edge cases\n        let result = PortManager::get_port_by_number(0);\n        assert!(result.is_ok());\n\n        let result = PortManager::get_port_by_number(65535);\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_port_filtering() {\n        // Create test data\n        let listening_port = PortInfo {\n            port: 8080,\n            protocol: Protocol::Tcp,\n            pid: Some(5678),\n            process_name: Some(\"python\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(0, 0, 0, 0)), 8080),\n            remote_address: None,\n            state: ConnectionState::Listen,\n            service_name: None,\n        };\n\n        let established_port = PortInfo {\n            port: 443,\n            protocol: Protocol::Tcp,\n            pid: Some(9012),\n            process_name: Some(\"chrome\".to_string()),\n            local_address: SocketAddr::new(IpAddr::V4(Ipv4Addr::new(192, 168, 1, 100)), 443),\n            remote_address: Some(SocketAddr::new(\n                IpAddr::V4(Ipv4Addr::new(172, 217, 14, 206)),\n                443,\n            )),\n            state: ConnectionState::Established,\n            service_name: None,\n        };\n\n        // Test state filtering\n        assert_eq!(listening_port.state, ConnectionState::Listen);\n        assert_eq!(established_port.state, ConnectionState::Established);\n\n        // Test development port classification\n        assert!(listening_port.is_development_port()); // 8080 is development\n        assert!(!established_port.is_development_port()); // 443 is not development\n    }\n\n    #[test]\n    fn test_get_active_connections() {\n        // This test is conceptual because we can't easily mock `get_all_ports`.\n        // We trust that if `get_all_ports` works, this filtering function will also work.\n        // A more advanced test setup would involve mocking the command execution.\n        let connections = PortManager::get_active_connections();\n        assert!(connections.is_ok());\n    }\n}\n","traces":[{"line":41,"address":[],"length":0,"stats":{"Line":964}},{"line":42,"address":[],"length":0,"stats":{"Line":964}},{"line":43,"address":[],"length":0,"stats":{"Line":1371}},{"line":44,"address":[],"length":0,"stats":{"Line":878}},{"line":45,"address":[],"length":0,"stats":{"Line":271}},{"line":46,"address":[],"length":0,"stats":{"Line":221}},{"line":47,"address":[],"length":0,"stats":{"Line":181}},{"line":48,"address":[],"length":0,"stats":{"Line":181}},{"line":49,"address":[],"length":0,"stats":{"Line":181}},{"line":50,"address":[],"length":0,"stats":{"Line":181}},{"line":51,"address":[],"length":0,"stats":{"Line":361}},{"line":52,"address":[],"length":0,"stats":{"Line":1}},{"line":58,"address":[],"length":0,"stats":{"Line":13}},{"line":59,"address":[],"length":0,"stats":{"Line":39}},{"line":62,"address":[],"length":0,"stats":{"Line":22}},{"line":65,"address":[],"length":0,"stats":{"Line":12}},{"line":66,"address":[],"length":0,"stats":{"Line":3}},{"line":69,"address":[],"length":0,"stats":{"Line":2}},{"line":74,"address":[],"length":0,"stats":{"Line":5}},{"line":81,"address":[],"length":0,"stats":{"Line":16}},{"line":83,"address":[],"length":0,"stats":{"Line":2}},{"line":88,"address":[],"length":0,"stats":{"Line":6}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":6}},{"line":98,"address":[],"length":0,"stats":{"Line":102}},{"line":99,"address":[],"length":0,"stats":{"Line":200}},{"line":116,"address":[],"length":0,"stats":{"Line":187}},{"line":117,"address":[],"length":0,"stats":{"Line":187}},{"line":118,"address":[],"length":0,"stats":{"Line":1}},{"line":119,"address":[],"length":0,"stats":{"Line":1}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":1}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":1}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":183}},{"line":144,"address":[],"length":0,"stats":{"Line":10}},{"line":145,"address":[],"length":0,"stats":{"Line":20}},{"line":148,"address":[],"length":0,"stats":{"Line":30}},{"line":151,"address":[],"length":0,"stats":{"Line":10}},{"line":156,"address":[],"length":0,"stats":{"Line":2}},{"line":157,"address":[],"length":0,"stats":{"Line":2}},{"line":158,"address":[],"length":0,"stats":{"Line":2}},{"line":159,"address":[],"length":0,"stats":{"Line":384}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":5}},{"line":164,"address":[],"length":0,"stats":{"Line":5}},{"line":165,"address":[],"length":0,"stats":{"Line":5}},{"line":166,"address":[],"length":0,"stats":{"Line":952}},{"line":170,"address":[],"length":0,"stats":{"Line":1}},{"line":171,"address":[],"length":0,"stats":{"Line":1}},{"line":172,"address":[],"length":0,"stats":{"Line":1}},{"line":173,"address":[],"length":0,"stats":{"Line":192}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":1}},{"line":178,"address":[],"length":0,"stats":{"Line":1}},{"line":179,"address":[],"length":0,"stats":{"Line":1}},{"line":180,"address":[],"length":0,"stats":{"Line":94}},{"line":181,"address":[],"length":0,"stats":{"Line":158}},{"line":184,"address":[],"length":0,"stats":{"Line":32}},{"line":185,"address":[],"length":0,"stats":{"Line":32}},{"line":186,"address":[],"length":0,"stats":{"Line":64}},{"line":187,"address":[],"length":0,"stats":{"Line":32}},{"line":188,"address":[],"length":0,"stats":{"Line":32}},{"line":193,"address":[],"length":0,"stats":{"Line":10}},{"line":194,"address":[],"length":0,"stats":{"Line":30}},{"line":195,"address":[],"length":0,"stats":{"Line":20}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":30}},{"line":203,"address":[],"length":0,"stats":{"Line":30}},{"line":206,"address":[],"length":0,"stats":{"Line":10}},{"line":207,"address":[],"length":0,"stats":{"Line":30}},{"line":208,"address":[],"length":0,"stats":{"Line":20}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":30}},{"line":216,"address":[],"length":0,"stats":{"Line":30}},{"line":219,"address":[],"length":0,"stats":{"Line":20}},{"line":220,"address":[],"length":0,"stats":{"Line":40}},{"line":221,"address":[],"length":0,"stats":{"Line":40}},{"line":223,"address":[],"length":0,"stats":{"Line":1838}},{"line":224,"address":[],"length":0,"stats":{"Line":960}},{"line":232,"address":[],"length":0,"stats":{"Line":1838}},{"line":237,"address":[],"length":0,"stats":{"Line":9190}},{"line":239,"address":[],"length":0,"stats":{"Line":1838}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":1818}},{"line":245,"address":[],"length":0,"stats":{"Line":40}},{"line":248,"address":[],"length":0,"stats":{"Line":1798}},{"line":250,"address":[],"length":0,"stats":{"Line":2664}},{"line":252,"address":[],"length":0,"stats":{"Line":466}},{"line":255,"address":[],"length":0,"stats":{"Line":1798}},{"line":260,"address":[],"length":0,"stats":{"Line":1040}},{"line":263,"address":[],"length":0,"stats":{"Line":960}},{"line":264,"address":[],"length":0,"stats":{"Line":1128}},{"line":266,"address":[],"length":0,"stats":{"Line":396}},{"line":281,"address":[],"length":0,"stats":{"Line":2365}},{"line":283,"address":[],"length":0,"stats":{"Line":4730}},{"line":285,"address":[],"length":0,"stats":{"Line":1828}},{"line":286,"address":[],"length":0,"stats":{"Line":457}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":3815}},{"line":300,"address":[],"length":0,"stats":{"Line":1269}},{"line":305,"address":[],"length":0,"stats":{"Line":639}},{"line":308,"address":[],"length":0,"stats":{"Line":20}},{"line":309,"address":[],"length":0,"stats":{"Line":100}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":60}},{"line":316,"address":[],"length":0,"stats":{"Line":40}},{"line":318,"address":[],"length":0,"stats":{"Line":60}},{"line":320,"address":[],"length":0,"stats":{"Line":1872}},{"line":321,"address":[],"length":0,"stats":{"Line":1772}},{"line":322,"address":[],"length":0,"stats":{"Line":1772}},{"line":325,"address":[],"length":0,"stats":{"Line":1772}}],"covered":102,"coverable":124},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","network","utils.rs"],"content":"use std::collections::HashMap;\n\npub struct NetworkUtils;\n\nimpl NetworkUtils {\n    pub fn get_well_known_ports() -\u003e HashMap\u003cu16, \u0026'static str\u003e {\n        let mut ports = HashMap::new();\n\n        // System ports (0-1023)\n        ports.insert(21, \"FTP\");\n        ports.insert(22, \"SSH\");\n        ports.insert(23, \"Telnet\");\n        ports.insert(25, \"SMTP\");\n        ports.insert(53, \"DNS\");\n        ports.insert(67, \"DHCP Server\");\n        ports.insert(68, \"DHCP Client\");\n        ports.insert(80, \"HTTP\");\n        ports.insert(110, \"POP3\");\n        ports.insert(143, \"IMAP\");\n        ports.insert(443, \"HTTPS\");\n        ports.insert(993, \"IMAPS\");\n        ports.insert(995, \"POP3S\");\n\n        // Database ports\n        ports.insert(1433, \"SQL Server\");\n        ports.insert(1521, \"Oracle\");\n        ports.insert(3306, \"MySQL\");\n        ports.insert(5432, \"PostgreSQL\");\n        ports.insert(6379, \"Redis\");\n        ports.insert(27017, \"MongoDB\");\n\n        // Web development ports\n        ports.insert(3000, \"React/Next.js Dev\");\n        ports.insert(3001, \"Create React App\");\n        ports.insert(4200, \"Angular Dev\");\n        ports.insert(5000, \"Flask Dev\");\n        ports.insert(8000, \"Django Dev\");\n        ports.insert(8080, \"HTTP Alt/Tomcat\");\n        ports.insert(8443, \"HTTPS Alt\");\n\n        // Message queues\n        ports.insert(5672, \"RabbitMQ\");\n        ports.insert(1883, \"MQTT\");\n        ports.insert(9092, \"Kafka\");\n\n        // Search engines\n        ports.insert(9200, \"Elasticsearch\");\n        ports.insert(8983, \"Solr\");\n\n        // Monitoring \u0026 metrics\n        ports.insert(3001, \"Grafana\");\n        ports.insert(9090, \"Prometheus\");\n        ports.insert(8086, \"InfluxDB\");\n\n        ports\n    }\n\n    pub fn get_development_ports() -\u003e Vec\u003cu16\u003e {\n        vec![\n            3000, 3001, 3002, 3003, 3004, 3005, // React, Next.js variants\n            4200, 4201, 4202, // Angular variants\n            5000, 5001, 5002, // Flask, various dev servers\n            8000, 8001, 8002, // Django variants\n            8080, 8081, 8082, 8083, 8084, 8085, // Generic HTTP variants\n            9000, 9001, 9002, // Various dev tools\n        ]\n    }\n\n    pub fn is_development_port(port: u16) -\u003e bool {\n        Self::get_development_ports().contains(\u0026port)\n    }\n\n    pub fn suggest_alternative_port(port: u16) -\u003e Vec\u003cu16\u003e {\n        match port {\n            3000 =\u003e vec![3001, 3002, 3003, 8000],\n            8000 =\u003e vec![8001, 8080, 3000],\n            8080 =\u003e vec![8081, 8000, 3000],\n            5000 =\u003e vec![5001, 5002, 8000],\n            4200 =\u003e vec![4201, 4202, 3000],\n            _ =\u003e {\n                // Generate alternatives around the requested port\n                let mut alternatives = Vec::new();\n                for i in 1..=5 {\n                    if let Some(new_port) = port.checked_add(i) {\n                        alternatives.push(new_port);\n                    }\n                }\n                alternatives\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_well_known_ports() {\n        let ports = NetworkUtils::get_well_known_ports();\n\n        // Test system ports\n        assert_eq!(ports.get(\u002621), Some(\u0026\"FTP\"));\n        assert_eq!(ports.get(\u002622), Some(\u0026\"SSH\"));\n        assert_eq!(ports.get(\u002680), Some(\u0026\"HTTP\"));\n        assert_eq!(ports.get(\u0026443), Some(\u0026\"HTTPS\"));\n\n        // Test database ports\n        assert_eq!(ports.get(\u00263306), Some(\u0026\"MySQL\"));\n        assert_eq!(ports.get(\u00265432), Some(\u0026\"PostgreSQL\"));\n        assert_eq!(ports.get(\u00266379), Some(\u0026\"Redis\"));\n        assert_eq!(ports.get(\u002627017), Some(\u0026\"MongoDB\"));\n\n        // Test development ports\n        assert_eq!(ports.get(\u00263000), Some(\u0026\"React/Next.js Dev\"));\n        assert_eq!(ports.get(\u00264200), Some(\u0026\"Angular Dev\"));\n        assert_eq!(ports.get(\u00265000), Some(\u0026\"Flask Dev\"));\n\n        // Test non-existent port\n        assert_eq!(ports.get(\u002665534), None);\n    }\n\n    #[test]\n    fn test_development_ports() {\n        let dev_ports = NetworkUtils::get_development_ports();\n\n        // Should contain common dev ports\n        assert!(dev_ports.contains(\u00263000));\n        assert!(dev_ports.contains(\u00263001));\n        assert!(dev_ports.contains(\u00264200));\n        assert!(dev_ports.contains(\u00265000));\n        assert!(dev_ports.contains(\u00268000));\n        assert!(dev_ports.contains(\u00268080));\n\n        // Should not be empty\n        assert!(!dev_ports.is_empty());\n    }\n\n    #[test]\n    fn test_is_development_port() {\n        // Test common development ports\n        assert!(NetworkUtils::is_development_port(3000));\n        assert!(NetworkUtils::is_development_port(3001));\n        assert!(NetworkUtils::is_development_port(4200));\n        assert!(NetworkUtils::is_development_port(5000));\n        assert!(NetworkUtils::is_development_port(8000));\n        assert!(NetworkUtils::is_development_port(8080));\n\n        // Test non-development ports\n        assert!(!NetworkUtils::is_development_port(80));\n        assert!(!NetworkUtils::is_development_port(443));\n        assert!(!NetworkUtils::is_development_port(22));\n        assert!(!NetworkUtils::is_development_port(25));\n    }\n\n    #[test]\n    fn test_suggest_alternative_port() {\n        // Test common development ports\n        let alternatives = NetworkUtils::suggest_alternative_port(3000);\n        assert!(alternatives.contains(\u00263001));\n        assert!(alternatives.contains(\u00263002));\n        assert!(alternatives.contains(\u00268000));\n\n        let alternatives = NetworkUtils::suggest_alternative_port(8000);\n        assert!(alternatives.contains(\u00268001));\n        assert!(alternatives.contains(\u00268080));\n        assert!(alternatives.contains(\u00263000));\n\n        let alternatives = NetworkUtils::suggest_alternative_port(5000);\n        assert!(alternatives.contains(\u00265001));\n        assert!(alternatives.contains(\u00265002));\n        assert!(alternatives.contains(\u00268000));\n\n        // Test uncommon port\n        let alternatives = NetworkUtils::suggest_alternative_port(12345);\n        assert!(alternatives.len() \u003e 0);\n        assert!(alternatives.len() \u003c= 5);\n\n        // All suggestions should be in valid range\n        for port in \u0026alternatives {\n            assert!(*port \u003e 12345);\n            // All u16 values are \u003c= 65535 by definition\n        }\n    }\n\n    #[test]\n    fn test_alternative_port_suggestions_edge_cases() {\n        // Test edge cases for port suggestions\n        let alternatives = NetworkUtils::suggest_alternative_port(65530);\n\n        // Should still provide valid alternatives\n        for _port in \u0026alternatives {\n            // All u16 values are \u003c= 65535 by definition\n        }\n\n        // Should not suggest ports beyond the valid range\n        // All u16 values are \u003c= 65535 by definition\n    }\n}\n","traces":[{"line":6,"address":[],"length":0,"stats":{"Line":2}},{"line":7,"address":[],"length":0,"stats":{"Line":4}},{"line":10,"address":[],"length":0,"stats":{"Line":4}},{"line":11,"address":[],"length":0,"stats":{"Line":6}},{"line":12,"address":[],"length":0,"stats":{"Line":6}},{"line":13,"address":[],"length":0,"stats":{"Line":6}},{"line":14,"address":[],"length":0,"stats":{"Line":6}},{"line":15,"address":[],"length":0,"stats":{"Line":6}},{"line":16,"address":[],"length":0,"stats":{"Line":6}},{"line":17,"address":[],"length":0,"stats":{"Line":6}},{"line":18,"address":[],"length":0,"stats":{"Line":6}},{"line":19,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":6}},{"line":21,"address":[],"length":0,"stats":{"Line":6}},{"line":22,"address":[],"length":0,"stats":{"Line":6}},{"line":25,"address":[],"length":0,"stats":{"Line":6}},{"line":26,"address":[],"length":0,"stats":{"Line":6}},{"line":27,"address":[],"length":0,"stats":{"Line":6}},{"line":28,"address":[],"length":0,"stats":{"Line":6}},{"line":29,"address":[],"length":0,"stats":{"Line":6}},{"line":30,"address":[],"length":0,"stats":{"Line":6}},{"line":33,"address":[],"length":0,"stats":{"Line":6}},{"line":34,"address":[],"length":0,"stats":{"Line":6}},{"line":35,"address":[],"length":0,"stats":{"Line":6}},{"line":36,"address":[],"length":0,"stats":{"Line":6}},{"line":37,"address":[],"length":0,"stats":{"Line":6}},{"line":38,"address":[],"length":0,"stats":{"Line":6}},{"line":39,"address":[],"length":0,"stats":{"Line":6}},{"line":42,"address":[],"length":0,"stats":{"Line":6}},{"line":43,"address":[],"length":0,"stats":{"Line":6}},{"line":44,"address":[],"length":0,"stats":{"Line":6}},{"line":47,"address":[],"length":0,"stats":{"Line":6}},{"line":48,"address":[],"length":0,"stats":{"Line":6}},{"line":51,"address":[],"length":0,"stats":{"Line":6}},{"line":52,"address":[],"length":0,"stats":{"Line":6}},{"line":53,"address":[],"length":0,"stats":{"Line":6}},{"line":55,"address":[],"length":0,"stats":{"Line":2}},{"line":58,"address":[],"length":0,"stats":{"Line":14}},{"line":59,"address":[],"length":0,"stats":{"Line":14}},{"line":69,"address":[],"length":0,"stats":{"Line":13}},{"line":70,"address":[],"length":0,"stats":{"Line":26}},{"line":73,"address":[],"length":0,"stats":{"Line":5}},{"line":74,"address":[],"length":0,"stats":{"Line":5}},{"line":75,"address":[],"length":0,"stats":{"Line":1}},{"line":76,"address":[],"length":0,"stats":{"Line":1}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":1}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":4}},{"line":83,"address":[],"length":0,"stats":{"Line":22}},{"line":84,"address":[],"length":0,"stats":{"Line":10}},{"line":88,"address":[],"length":0,"stats":{"Line":2}}],"covered":50,"coverable":52},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","info.rs"],"content":"use sysinfo::{Pid, Process, System};\n\n#[derive(Debug, Clone)]\npub struct ProcessInfo {\n    pub pid: u32,\n    pub name: String,\n    pub cpu_usage: f32,\n    pub memory: u64,\n    #[allow(dead_code)]\n    pub parent_pid: Option\u003cu32\u003e,\n    pub status: String,\n    #[allow(dead_code)]\n    pub start_time: u64,\n    #[allow(dead_code)]\n    pub user_id: Option\u003cu32\u003e,\n    #[allow(dead_code)]\n    pub executable_path: Option\u003cString\u003e,\n    #[allow(dead_code)]\n    pub command_line: Vec\u003cString\u003e,\n}\n\nimpl ProcessInfo {\n    pub fn from_sysinfo(pid: Pid, process: \u0026Process) -\u003e Self {\n        Self {\n            pid: pid.as_u32(),\n            name: process.name().to_string(),\n            cpu_usage: process.cpu_usage(),\n            memory: process.memory(),\n            parent_pid: process.parent().map(|p| p.as_u32()),\n            status: format!(\"{:?}\", process.status()),\n            start_time: process.start_time(),\n            user_id: process\n                .user_id()\n                .and_then(|u| u.to_string().parse::\u003cu32\u003e().ok()),\n            executable_path: process.exe().and_then(|p| p.to_str().map(String::from)),\n            command_line: process.cmd().to_vec(),\n        }\n    }\n\n    pub fn matches_search(\u0026self, query: \u0026str) -\u003e bool {\n        let query = query.to_lowercase();\n\n        // Handle special search patterns\n        if let Some(pid_query) = query.strip_prefix('#') {\n            // PID search: #1234\n            if let Ok(search_pid) = pid_query.parse::\u003cu32\u003e() {\n                return self.pid == search_pid;\n            }\n        } else if let Some(resource_query) = query.strip_prefix('\u003e') {\n            // Resource usage search: \u003e50% for CPU, \u003e1GB for memory\n            if let Some(cpu_query) = resource_query.strip_suffix('%') {\n                if let Ok(cpu_threshold) = cpu_query.parse::\u003cf32\u003e() {\n                    return self.cpu_usage \u003e cpu_threshold;\n                }\n            } else if let Some(mem_query) = resource_query\n                .strip_suffix(\"gb\")\n                .or_else(|| resource_query.strip_suffix(\"GB\"))\n            {\n                if let Ok(mem_threshold) = mem_query.parse::\u003cf32\u003e() {\n                    let mem_gb = self.memory as f32 / 1024.0 / 1024.0 / 1024.0;\n                    return mem_gb \u003e mem_threshold;\n                }\n            } else if let Some(mem_query) = resource_query\n                .strip_suffix(\"mb\")\n                .or_else(|| resource_query.strip_suffix(\"MB\"))\n            {\n                if let Ok(mem_threshold) = mem_query.parse::\u003cf32\u003e() {\n                    let mem_mb = self.memory as f32 / 1024.0 / 1024.0;\n                    return mem_mb \u003e mem_threshold;\n                }\n            }\n        }\n\n        // Default name-based search\n        self.name.to_lowercase().contains(\u0026query)\n    }\n\n    pub fn format_memory(\u0026self) -\u003e String {\n        let kb = self.memory / 1024;\n        let mb = kb / 1024;\n        let gb = mb / 1024;\n\n        if gb \u003e 0 {\n            format!(\"{:.1}GB\", gb as f64 / 1.0)\n        } else if mb \u003e 0 {\n            format!(\"{mb}MB\")\n        } else {\n            format!(\"{kb}KB\")\n        }\n    }\n}\n\npub struct ProcessManager {\n    system: System,\n}\n\nimpl ProcessManager {\n    pub fn new() -\u003e Self {\n        let mut system = System::new_all();\n        system.refresh_all();\n        Self { system }\n    }\n\n    pub fn refresh(\u0026mut self) {\n        self.system.refresh_all();\n    }\n\n    pub fn get_processes(\u0026self) -\u003e Vec\u003cProcessInfo\u003e {\n        self.system\n            .processes()\n            .iter()\n            .map(|(\u0026pid, process)| ProcessInfo::from_sysinfo(pid, process))\n            .collect()\n    }\n\n    pub fn get_system_cpu_usage(\u0026self) -\u003e f32 {\n        self.system.global_cpu_info().cpu_usage()\n    }\n}\n\nimpl Default for ProcessManager {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    fn create_test_process() -\u003e ProcessInfo {\n        ProcessInfo {\n            pid: 1234,\n            name: \"test_process\".to_string(),\n            cpu_usage: 25.5,\n            memory: 1024 * 1024 * 512, // 512 MB\n            parent_pid: Some(1),\n            status: \"Running\".to_string(),\n            start_time: 1234567890,\n            user_id: Some(1000),\n            executable_path: Some(\"/usr/bin/test_process\".to_string()),\n            command_line: vec![\n                \"test_process\".to_string(),\n                \"--arg1\".to_string(),\n                \"value\".to_string(),\n            ],\n        }\n    }\n\n    #[test]\n    fn test_process_info_creation() {\n        let process = create_test_process();\n        assert_eq!(process.pid, 1234);\n        assert_eq!(process.name, \"test_process\");\n        assert_eq!(process.cpu_usage, 25.5);\n        assert_eq!(process.memory, 1024 * 1024 * 512);\n    }\n\n    #[test]\n    fn test_memory_formatting() {\n        let mut process = create_test_process();\n\n        // Test MB formatting\n        process.memory = 1024 * 1024 * 100; // 100 MB\n        assert_eq!(process.format_memory(), \"100MB\");\n\n        // Test GB formatting\n        process.memory = 1024 * 1024 * 1024 * 2; // 2 GB\n        assert_eq!(process.format_memory(), \"2.0GB\");\n\n        // Test KB formatting\n        process.memory = 1024 * 500; // 500 KB\n        assert_eq!(process.format_memory(), \"500KB\");\n    }\n\n    #[test]\n    fn test_search_by_name() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"test\"));\n        assert!(process.matches_search(\"TEST\")); // case insensitive\n        assert!(process.matches_search(\"process\"));\n        assert!(!process.matches_search(\"notfound\"));\n    }\n\n    #[test]\n    fn test_search_by_pid() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"#1234\"));\n        assert!(!process.matches_search(\"#5678\"));\n    }\n\n    #[test]\n    fn test_search_by_cpu_usage() {\n        let process = create_test_process();\n        assert!(process.matches_search(\"\u003e20%\"));\n        assert!(process.matches_search(\"\u003e25%\"));\n        assert!(!process.matches_search(\"\u003e30%\"));\n    }\n\n    #[test]\n    fn test_search_by_memory_usage() {\n        let process = create_test_process();\n\n        // Test MB search\n        assert!(process.matches_search(\"\u003e400MB\"));\n        assert!(!process.matches_search(\"\u003e600MB\"));\n\n        // Test GB search\n        assert!(!process.matches_search(\"\u003e1GB\")); // 512MB \u003c 1GB\n    }\n\n    #[test]\n    fn test_invalid_search_patterns() {\n        let process = create_test_process();\n\n        // Invalid PID format\n        assert!(!process.matches_search(\"#abc\"));\n\n        // Invalid CPU format\n        assert!(!process.matches_search(\"\u003eabc%\"));\n\n        // Invalid memory format\n        assert!(!process.matches_search(\"\u003eabcMB\"));\n    }\n\n    #[test]\n    fn test_process_manager_creation() {\n        let manager = ProcessManager::new();\n        let processes = manager.get_processes();\n\n        // Should have at least some processes running\n        assert!(!processes.is_empty());\n\n        // All processes should have valid PIDs\n        for process in \u0026processes {\n            assert!(process.pid \u003e 0);\n        }\n    }\n\n    #[test]\n    fn test_process_filtering() {\n        let manager = ProcessManager::new();\n        let all_processes = manager.get_processes();\n\n        // Test that we get some processes\n        assert!(!all_processes.is_empty());\n\n        // Test that basic process info is populated\n        for process in all_processes.iter().take(5) {\n            assert!(process.pid \u003e 0);\n            assert!(!process.name.is_empty());\n        }\n    }\n\n    #[test]\n    fn test_process_tree_structure() {\n        let manager = ProcessManager::new();\n        let processes = manager.get_processes();\n\n        // Test that processes have valid parent relationships\n        for process in processes.iter().take(10) {\n            // PIDs should be positive\n            assert!(process.pid \u003e 0);\n\n            // Parent PIDs, if present, should also be positive\n            if let Some(_parent_pid) = process.parent_pid {\n                // Parent PIDs should be valid\n            }\n        }\n    }\n\n    #[test]\n    fn test_search_functionality() {\n        let manager = ProcessManager::new();\n\n        // Test basic search functionality\n        let all_processes = manager.get_processes();\n\n        // Test that we get some processes and they have searchable info\n        assert!(!all_processes.is_empty());\n\n        // Test search pattern matching with first process\n        if let Some(first_process) = all_processes.first() {\n            // Should match itself by name\n            assert!(first_process.matches_search(\u0026first_process.name.to_lowercase()));\n        }\n    }\n\n    #[test]\n    fn test_process_sorting() {\n        let manager = ProcessManager::new();\n        let mut processes = manager.get_processes();\n\n        // Test CPU sorting manually\n        processes.sort_by(|a, b| b.cpu_usage.partial_cmp(\u0026a.cpu_usage).unwrap());\n        processes.truncate(10);\n\n        for i in 1..processes.len() {\n            assert!(processes[i - 1].cpu_usage \u003e= processes[i].cpu_usage);\n        }\n\n        // Test memory sorting manually\n        let mut processes = manager.get_processes();\n        processes.sort_by(|a, b| b.memory.cmp(\u0026a.memory));\n        processes.truncate(10);\n\n        for i in 1..processes.len() {\n            assert!(processes[i - 1].memory \u003e= processes[i].memory);\n        }\n    }\n}\n","traces":[{"line":23,"address":[],"length":0,"stats":{"Line":9143}},{"line":25,"address":[],"length":0,"stats":{"Line":18286}},{"line":26,"address":[],"length":0,"stats":{"Line":18286}},{"line":27,"address":[],"length":0,"stats":{"Line":18286}},{"line":28,"address":[],"length":0,"stats":{"Line":18286}},{"line":29,"address":[],"length":0,"stats":{"Line":38995}},{"line":30,"address":[],"length":0,"stats":{"Line":36572}},{"line":31,"address":[],"length":0,"stats":{"Line":18286}},{"line":32,"address":[],"length":0,"stats":{"Line":9143}},{"line":35,"address":[],"length":0,"stats":{"Line":54858}},{"line":36,"address":[],"length":0,"stats":{"Line":18286}},{"line":40,"address":[],"length":0,"stats":{"Line":20}},{"line":41,"address":[],"length":0,"stats":{"Line":60}},{"line":44,"address":[],"length":0,"stats":{"Line":23}},{"line":46,"address":[],"length":0,"stats":{"Line":2}},{"line":49,"address":[],"length":0,"stats":{"Line":27}},{"line":51,"address":[],"length":0,"stats":{"Line":6}},{"line":52,"address":[],"length":0,"stats":{"Line":5}},{"line":55,"address":[],"length":0,"stats":{"Line":5}},{"line":57,"address":[],"length":0,"stats":{"Line":10}},{"line":59,"address":[],"length":0,"stats":{"Line":1}},{"line":63,"address":[],"length":0,"stats":{"Line":6}},{"line":65,"address":[],"length":0,"stats":{"Line":3}},{"line":67,"address":[],"length":0,"stats":{"Line":2}},{"line":75,"address":[],"length":0,"stats":{"Line":10}},{"line":78,"address":[],"length":0,"stats":{"Line":42}},{"line":79,"address":[],"length":0,"stats":{"Line":84}},{"line":80,"address":[],"length":0,"stats":{"Line":84}},{"line":81,"address":[],"length":0,"stats":{"Line":84}},{"line":83,"address":[],"length":0,"stats":{"Line":42}},{"line":84,"address":[],"length":0,"stats":{"Line":6}},{"line":85,"address":[],"length":0,"stats":{"Line":40}},{"line":86,"address":[],"length":0,"stats":{"Line":64}},{"line":88,"address":[],"length":0,"stats":{"Line":8}},{"line":98,"address":[],"length":0,"stats":{"Line":24}},{"line":99,"address":[],"length":0,"stats":{"Line":48}},{"line":100,"address":[],"length":0,"stats":{"Line":48}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":12}},{"line":109,"address":[],"length":0,"stats":{"Line":12}},{"line":112,"address":[],"length":0,"stats":{"Line":27441}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}}],"covered":40,"coverable":46},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","killer.rs"],"content":"use anyhow::{anyhow, Result};\nuse std::process::Command;\nuse std::time::Duration;\nuse tokio::time::sleep;\n\npub struct ProcessKiller;\n\nimpl ProcessKiller {\n    pub async fn kill_process_by_pid(pid: u32, force: bool) -\u003e Result\u003c()\u003e {\n        if force {\n            Self::kill_force(pid).await\n        } else {\n            Self::kill_graceful(pid).await\n        }\n    }\n\n    pub async fn kill_processes_by_name(name: \u0026str, force: bool) -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let pids = Self::find_pids_by_name(name)?;\n        let mut killed_pids = Vec::new();\n\n        for pid in pids {\n            match Self::kill_process_by_pid(pid, force).await {\n                Ok(()) =\u003e killed_pids.push(pid),\n                Err(e) =\u003e eprintln!(\"Failed to kill process {pid}: {e}\"),\n            }\n        }\n\n        Ok(killed_pids)\n    }\n\n    pub async fn kill_process_by_port(port: u16) -\u003e Result\u003cu32\u003e {\n        let pid = Self::find_pid_by_port(port)?;\n        Self::kill_graceful(pid).await?;\n        Ok(pid)\n    }\n\n    async fn kill_graceful(pid: u32) -\u003e Result\u003c()\u003e {\n        // First try SIGTERM\n        let output = Command::new(\"kill\")\n            .args([\"-TERM\", \u0026pid.to_string()])\n            .output()?;\n\n        if !output.status.success() {\n            let error = String::from_utf8_lossy(\u0026output.stderr);\n            return Err(anyhow!(\"Failed to send SIGTERM to process {pid}: {error}\"));\n        }\n\n        // Wait up to 5 seconds for graceful shutdown\n        for _ in 0..50 {\n            if !Self::is_process_running(pid)? {\n                return Ok(());\n            }\n            sleep(Duration::from_millis(100)).await;\n        }\n\n        // If still running, escalate to SIGKILL\n        eprintln!(\"Process {pid} didn't respond to SIGTERM, escalating to SIGKILL\");\n        Self::kill_force(pid).await\n    }\n\n    async fn kill_force(pid: u32) -\u003e Result\u003c()\u003e {\n        let output = Command::new(\"kill\")\n            .args([\"-KILL\", \u0026pid.to_string()])\n            .output()?;\n\n        if !output.status.success() {\n            let error = String::from_utf8_lossy(\u0026output.stderr);\n            return Err(anyhow!(\"Failed to send SIGKILL to process {pid}: {error}\"));\n        }\n\n        // Wait up to 2 seconds for force kill to take effect\n        for _ in 0..20 {\n            if !Self::is_process_running(pid)? {\n                return Ok(());\n            }\n            sleep(Duration::from_millis(100)).await;\n        }\n\n        Err(anyhow!(\"Process {pid} is still running after SIGKILL\"))\n    }\n\n    fn is_process_running(pid: u32) -\u003e Result\u003cbool\u003e {\n        let output = Command::new(\"ps\").args([\"-p\", \u0026pid.to_string()]).output()?;\n\n        Ok(output.status.success())\n    }\n\n    fn find_pids_by_name(name: \u0026str) -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let output = Command::new(\"pgrep\").args([\"-f\", name]).output()?;\n\n        if !output.status.success() {\n            return Ok(Vec::new());\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let pids: Result\u003cVec\u003cu32\u003e, _\u003e = stdout\n            .lines()\n            .filter(|line| !line.trim().is_empty())\n            .map(|line| line.trim().parse())\n            .collect();\n\n        pids.map_err(|e| anyhow!(\"Failed to parse PID: {e}\"))\n    }\n\n    fn find_pid_by_port(port: u16) -\u003e Result\u003cu32\u003e {\n        let output = Command::new(\"lsof\")\n            .args([\"-t\", \"-i\", \u0026format!(\":{port}\")])\n            .output()?;\n\n        if !output.status.success() {\n            return Err(anyhow!(\"No process found using port {port}\"));\n        }\n\n        let stdout = String::from_utf8_lossy(\u0026output.stdout);\n        let first_line = stdout\n            .lines()\n            .next()\n            .ok_or_else(|| anyhow!(\"No process found using port {port}\"))?;\n\n        first_line\n            .trim()\n            .parse()\n            .map_err(|e| anyhow!(\"Failed to parse PID from port lookup: {e}\"))\n    }\n\n    pub async fn cleanup_dev_processes() -\u003e Result\u003cVec\u003cu32\u003e\u003e {\n        let common_dev_processes = [\n            \"node\",\n            \"npm\",\n            \"yarn\",\n            \"webpack\",\n            \"vite\",\n            \"next\",\n            \"python\",\n            \"django\",\n            \"flask\",\n            \"rails\",\n            \"ruby\",\n            \"php\",\n            \"artisan\",\n            \"composer\",\n            \"java\",\n            \"gradle\",\n            \"docker\",\n            \"docker-compose\",\n            \"redis-server\",\n            \"postgres\",\n        ];\n\n        let mut killed_pids = Vec::new();\n\n        for process_name in \u0026common_dev_processes {\n            match Self::kill_processes_by_name(process_name, false).await {\n                Ok(pids) =\u003e killed_pids.extend(pids),\n                Err(e) =\u003e eprintln!(\"Error killing {process_name}: {e}\"),\n            }\n        }\n\n        Ok(killed_pids)\n    }\n\n    pub fn find_available_port(start_port: u16, end_port: u16) -\u003e Result\u003cu16\u003e {\n        for port in start_port..=end_port {\n            if Self::is_port_available(port)? {\n                return Ok(port);\n            }\n        }\n        Err(anyhow!(\n            \"No available port found in range {start_port}-{end_port}\"\n        ))\n    }\n\n    fn is_port_available(port: u16) -\u003e Result\u003cbool\u003e {\n        let output = Command::new(\"lsof\")\n            .args([\"-i\", \u0026format!(\":{port}\")])\n            .output()?;\n\n        // If lsof returns non-zero, port is available\n        Ok(!output.status.success())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[tokio::test]\n    async fn test_process_killer_error_handling() {\n        // Test killing a non-existent process\n        let result = ProcessKiller::kill_process_by_pid(999999, false).await;\n        assert!(result.is_err());\n\n        // Test killing by non-existent process name\n        let result =\n            ProcessKiller::kill_processes_by_name(\"non_existent_process_12345\", false).await;\n        assert!(result.is_ok());\n        let killed_pids = result.unwrap();\n        assert!(killed_pids.is_empty());\n    }\n\n    #[tokio::test]\n    async fn test_find_available_port() {\n        // Test finding available port in a high range (likely to be available)\n        let result = ProcessKiller::find_available_port(60000, 60010);\n\n        match result {\n            Ok(port) =\u003e {\n                assert!(port \u003e= 60000);\n                assert!(port \u003c= 60010);\n            }\n            Err(_) =\u003e {\n                // It's possible no ports are available, which is acceptable\n            }\n        }\n    }\n\n    #[tokio::test]\n    async fn test_port_availability_check() {\n        // Test port availability for a very high port (likely available)\n        let result = ProcessKiller::is_port_available(65000);\n\n        // Should either return true (available) or false (not available)\n        // Both are valid results\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_is_process_running() {\n        // Test with process PID 1 (init/launchd - should always exist on Unix systems)\n        let result = ProcessKiller::is_process_running(1);\n        assert!(result.is_ok());\n\n        // On macOS/Unix, PID 1 should always be running\n        if let Ok(is_running) = result {\n            assert!(is_running);\n        }\n\n        // Test with a very high PID (likely not to exist)\n        let result = ProcessKiller::is_process_running(999999);\n        assert!(result.is_ok());\n\n        if let Ok(is_running) = result {\n            // Very high PID is unlikely to be running\n            assert!(!is_running);\n        }\n    }\n\n    #[test]\n    fn test_find_pids_by_name() {\n        // Test finding PIDs for a common system process\n        let result = ProcessKiller::find_pids_by_name(\"kernel_task\");\n\n        match result {\n            Ok(pids) =\u003e {\n                // kernel_task should exist on macOS\n                // PIDs should be positive numbers\n                for pid in pids {\n                    assert!(pid \u003e 0);\n                }\n            }\n            Err(_) =\u003e {\n                // pgrep might not be available or process might not exist\n                // This is acceptable for the test\n            }\n        }\n    }\n\n    #[test]\n    fn test_find_pid_by_port_non_existent() {\n        // Test finding PID for a port that's very unlikely to be used\n        let result = ProcessKiller::find_pid_by_port(65534);\n\n        // Should either find a PID or return an error (port not in use)\n        // Both outcomes are valid\n        match result {\n            Ok(pid) =\u003e assert!(pid \u003e 0),\n            Err(e) =\u003e assert!(e.to_string().contains(\"No process found\")),\n        }\n    }\n\n    #[tokio::test]\n    async fn test_cleanup_dev_processes_safety() {\n        // This test ensures cleanup doesn't crash\n        // We won't actually kill processes in tests\n\n        // For safety, we'll test the function structure exists\n        // In a real test environment, we'd mock the system calls\n        let result = ProcessKiller::cleanup_dev_processes().await;\n\n        // Should return a result (either success with PIDs or an error)\n        assert!(result.is_ok());\n\n        let killed_pids = result.unwrap();\n        // Could be empty (no dev processes) or contain PIDs\n        // Both are valid outcomes\n        for pid in killed_pids {\n            assert!(pid \u003e 0);\n        }\n    }\n\n    #[test]\n    fn test_find_available_port_range_validation() {\n        // Test edge cases for port range finding\n\n        // Test with single port\n        let result = ProcessKiller::find_available_port(50000, 50000);\n        // Should either succeed or fail gracefully\n        match result {\n            Ok(port) =\u003e assert_eq!(port, 50000),\n            Err(_) =\u003e {} // Port might be in use, which is fine\n        }\n\n        // Test with small range\n        let result = ProcessKiller::find_available_port(50000, 50001);\n        match result {\n            Ok(port) =\u003e {\n                assert!(port \u003e= 50000);\n                assert!(port \u003c= 50001);\n            }\n            Err(_) =\u003e {} // Ports might be in use\n        }\n    }\n\n    #[test]\n    fn test_error_messages_quality() {\n        // Test that error messages are meaningful\n\n        let result = ProcessKiller::find_pid_by_port(0);\n        if let Err(e) = result {\n            let error_msg = e.to_string();\n            // Error message should mention the port or \"process\"\n            assert!(error_msg.contains(\"process\") || error_msg.contains(\"0\"));\n        }\n    }\n\n    #[tokio::test]\n    async fn test_graceful_vs_force_kill_parameters() {\n        // Test that force and graceful parameters are handled correctly\n\n        // Test with non-existent PID - should fail gracefully for both modes\n        let graceful_result = ProcessKiller::kill_process_by_pid(999999, false).await;\n        let force_result = ProcessKiller::kill_process_by_pid(999999, true).await;\n\n        // Both should fail (PID doesn't exist) but not panic\n        assert!(graceful_result.is_err());\n        assert!(force_result.is_err());\n\n        // Error messages should be meaningful\n        if let Err(e) = graceful_result {\n            assert!(!e.to_string().is_empty());\n        }\n\n        if let Err(e) = force_result {\n            assert!(!e.to_string().is_empty());\n        }\n    }\n\n    #[test]\n    fn test_system_command_safety() {\n        // Test that system commands are called safely\n\n        // Test ps command with safe parameters\n        let result = ProcessKiller::is_process_running(1);\n        assert!(result.is_ok());\n\n        // Test lsof command with safe parameters\n        let result = ProcessKiller::find_pid_by_port(65535);\n        // Should complete without panicking\n        match result {\n            Ok(_) | Err(_) =\u003e {} // Both outcomes are acceptable\n        }\n    }\n}\n","traces":[{"line":9,"address":[],"length":0,"stats":{"Line":58}},{"line":10,"address":[],"length":0,"stats":{"Line":29}},{"line":11,"address":[],"length":0,"stats":{"Line":2}},{"line":13,"address":[],"length":0,"stats":{"Line":28}},{"line":17,"address":[],"length":0,"stats":{"Line":84}},{"line":18,"address":[],"length":0,"stats":{"Line":126}},{"line":21,"address":[],"length":0,"stats":{"Line":94}},{"line":22,"address":[],"length":0,"stats":{"Line":104}},{"line":23,"address":[],"length":0,"stats":{"Line":20}},{"line":24,"address":[],"length":0,"stats":{"Line":18}},{"line":28,"address":[],"length":0,"stats":{"Line":42}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":56}},{"line":39,"address":[],"length":0,"stats":{"Line":84}},{"line":40,"address":[],"length":0,"stats":{"Line":56}},{"line":44,"address":[],"length":0,"stats":{"Line":8}},{"line":49,"address":[],"length":0,"stats":{"Line":26}},{"line":50,"address":[],"length":0,"stats":{"Line":52}},{"line":51,"address":[],"length":0,"stats":{"Line":20}},{"line":53,"address":[],"length":0,"stats":{"Line":12}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":2}},{"line":62,"address":[],"length":0,"stats":{"Line":3}},{"line":63,"address":[],"length":0,"stats":{"Line":2}},{"line":67,"address":[],"length":0,"stats":{"Line":1}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":29}},{"line":83,"address":[],"length":0,"stats":{"Line":145}},{"line":88,"address":[],"length":0,"stats":{"Line":43}},{"line":89,"address":[],"length":0,"stats":{"Line":172}},{"line":92,"address":[],"length":0,"stats":{"Line":38}},{"line":95,"address":[],"length":0,"stats":{"Line":15}},{"line":96,"address":[],"length":0,"stats":{"Line":15}},{"line":98,"address":[],"length":0,"stats":{"Line":57}},{"line":99,"address":[],"length":0,"stats":{"Line":57}},{"line":102,"address":[],"length":0,"stats":{"Line":10}},{"line":105,"address":[],"length":0,"stats":{"Line":3}},{"line":106,"address":[],"length":0,"stats":{"Line":9}},{"line":107,"address":[],"length":0,"stats":{"Line":9}},{"line":111,"address":[],"length":0,"stats":{"Line":2}},{"line":114,"address":[],"length":0,"stats":{"Line":3}},{"line":115,"address":[],"length":0,"stats":{"Line":2}},{"line":118,"address":[],"length":0,"stats":{"Line":1}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":4}},{"line":127,"address":[],"length":0,"stats":{"Line":4}},{"line":128,"address":[],"length":0,"stats":{"Line":2}},{"line":129,"address":[],"length":0,"stats":{"Line":4}},{"line":130,"address":[],"length":0,"stats":{"Line":4}},{"line":131,"address":[],"length":0,"stats":{"Line":4}},{"line":132,"address":[],"length":0,"stats":{"Line":4}},{"line":133,"address":[],"length":0,"stats":{"Line":4}},{"line":134,"address":[],"length":0,"stats":{"Line":4}},{"line":135,"address":[],"length":0,"stats":{"Line":4}},{"line":136,"address":[],"length":0,"stats":{"Line":4}},{"line":137,"address":[],"length":0,"stats":{"Line":4}},{"line":138,"address":[],"length":0,"stats":{"Line":4}},{"line":139,"address":[],"length":0,"stats":{"Line":4}},{"line":140,"address":[],"length":0,"stats":{"Line":4}},{"line":141,"address":[],"length":0,"stats":{"Line":4}},{"line":142,"address":[],"length":0,"stats":{"Line":4}},{"line":143,"address":[],"length":0,"stats":{"Line":4}},{"line":144,"address":[],"length":0,"stats":{"Line":4}},{"line":145,"address":[],"length":0,"stats":{"Line":4}},{"line":146,"address":[],"length":0,"stats":{"Line":2}},{"line":147,"address":[],"length":0,"stats":{"Line":2}},{"line":150,"address":[],"length":0,"stats":{"Line":4}},{"line":152,"address":[],"length":0,"stats":{"Line":82}},{"line":153,"address":[],"length":0,"stats":{"Line":120}},{"line":154,"address":[],"length":0,"stats":{"Line":40}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":2}},{"line":162,"address":[],"length":0,"stats":{"Line":6}},{"line":163,"address":[],"length":0,"stats":{"Line":18}},{"line":164,"address":[],"length":0,"stats":{"Line":12}},{"line":165,"address":[],"length":0,"stats":{"Line":6}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":7}},{"line":174,"address":[],"length":0,"stats":{"Line":21}},{"line":175,"address":[],"length":0,"stats":{"Line":14}}],"covered":74,"coverable":88},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","mod.rs"],"content":"pub mod info;\npub mod killer;\npub mod monitor;\n\npub use info::*;\npub use killer::*;\npub use monitor::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","process","monitor.rs"],"content":"use crate::process::{ProcessInfo, ProcessManager};\nuse std::time::{Duration, Instant};\n\npub struct ProcessMonitor {\n    manager: ProcessManager,\n    last_update: Instant,\n    update_interval: Duration,\n}\n\nimpl ProcessMonitor {\n    pub fn new() -\u003e Self {\n        Self {\n            manager: ProcessManager::new(),\n            last_update: Instant::now(),\n            update_interval: Duration::from_millis(1000), // 1 second default\n        }\n    }\n\n    pub fn should_update(\u0026self) -\u003e bool {\n        self.last_update.elapsed() \u003e= self.update_interval\n    }\n\n    pub fn get_processes(\u0026mut self) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        self.manager.get_processes()\n    }\n\n    pub fn get_top_cpu_processes(\u0026mut self, limit: usize) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        let mut processes = self.manager.get_processes();\n        processes.sort_by(|a, b| b.cpu_usage.partial_cmp(\u0026a.cpu_usage).unwrap());\n        processes.truncate(limit);\n        processes\n    }\n\n    pub fn get_top_memory_processes(\u0026mut self, limit: usize) -\u003e Vec\u003cProcessInfo\u003e {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        let mut processes = self.manager.get_processes();\n        processes.sort_by(|a, b| b.memory.cmp(\u0026a.memory));\n        processes.truncate(limit);\n        processes\n    }\n\n    pub fn get_system_cpu_usage(\u0026mut self) -\u003e f32 {\n        if self.should_update() {\n            self.manager.refresh();\n            self.last_update = Instant::now();\n        }\n        self.manager.get_system_cpu_usage()\n    }\n}\n\nimpl Default for ProcessMonitor {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n","traces":[{"line":11,"address":[],"length":0,"stats":{"Line":19}},{"line":13,"address":[],"length":0,"stats":{"Line":38}},{"line":14,"address":[],"length":0,"stats":{"Line":19}},{"line":15,"address":[],"length":0,"stats":{"Line":19}},{"line":19,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":6}},{"line":23,"address":[],"length":0,"stats":{"Line":4}},{"line":24,"address":[],"length":0,"stats":{"Line":8}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":8}},{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":32,"address":[],"length":0,"stats":{"Line":2}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":3}},{"line":37,"address":[],"length":0,"stats":{"Line":3058}},{"line":38,"address":[],"length":0,"stats":{"Line":3}},{"line":39,"address":[],"length":0,"stats":{"Line":1}},{"line":42,"address":[],"length":0,"stats":{"Line":1}},{"line":43,"address":[],"length":0,"stats":{"Line":2}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":3}},{"line":48,"address":[],"length":0,"stats":{"Line":17162}},{"line":49,"address":[],"length":0,"stats":{"Line":3}},{"line":50,"address":[],"length":0,"stats":{"Line":1}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}}],"covered":21,"coverable":34},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","app.rs"],"content":"use crate::config::settings::{load_settings, save_settings, UserSettings};\nuse crate::network::{ConnectionInfo, PortInfo, PortManager};\nuse crate::process::{ProcessInfo, ProcessMonitor};\nuse crate::tui::themes::{Theme, ThemeManager};\nuse anyhow::Result;\nuse crossterm::event::{KeyCode, KeyEvent, KeyModifiers};\nuse std::collections::HashMap;\nuse std::time::{Duration, Instant};\n\n#[derive(Debug, Clone, PartialEq, Eq, Hash)]\npub enum AppMode {\n    Dashboard,\n    ProcessView,\n    PortView,\n    ConnectionView,\n    ThemeSelector,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum SortBy {\n    Name,\n    Pid,\n    Cpu,\n    Memory,\n    Port,\n    LocalAddress,\n    RemoteAddress,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum SortOrder {\n    Ascending,\n    Descending,\n}\n\npub struct AppState {\n    pub mode: AppMode,\n    pub should_quit: bool,\n    pub search_query: String,\n    pub search_active: bool,\n    pub selected_index: usize,\n    pub sort_by: SortBy,\n    pub sort_order: SortOrder,\n    pub show_help: bool,\n    pub status_message: Option\u003c(String, Instant)\u003e,\n    pub confirmation_dialog: Option\u003cConfirmationDialog\u003e,\n\n    // Data\n    pub processes: Vec\u003cProcessInfo\u003e,\n    pub filtered_processes: Vec\u003cProcessInfo\u003e,\n    pub ports: Vec\u003cPortInfo\u003e,\n    pub filtered_ports: Vec\u003cPortInfo\u003e,\n    pub connections: Vec\u003cConnectionInfo\u003e,\n    pub filtered_connections: Vec\u003cConnectionInfo\u003e,\n\n    // Monitoring\n    pub process_monitor: ProcessMonitor,\n    pub last_refresh: Instant,\n    pub refresh_interval: Duration,\n    pub auto_refresh: bool,\n\n    // Multi-selection\n    pub selected_items: Vec\u003cusize\u003e,\n    pub multi_select_mode: bool,\n\n    // CPU History for sparkline\n    pub cpu_history: Vec\u003cu64\u003e,\n\n    // Theming\n    pub themes: Vec\u003cTheme\u003e,\n    pub current_theme_index: usize,\n\n    // Navigation enhancement\n    pub view_history: Vec\u003cAppMode\u003e,\n    pub selection_memory: HashMap\u003cAppMode, usize\u003e,\n\n    // Visual enhancement\n    pub detailed_view_mode: bool,\n    pub column_headers_visible: bool,\n\n    // Search enhancement\n    pub search_suggestions: Vec\u003cString\u003e,\n    pub show_search_help: bool,\n}\n\n#[derive(Debug, Clone)]\npub struct ConfirmationDialog {\n    pub title: String,\n    pub message: String,\n    pub confirm_action: DialogAction,\n    pub warning_level: WarningLevel,\n    pub additional_info: Vec\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum WarningLevel {\n    Low,     // Green - safe operations\n    Medium,  // Yellow - caution advised\n    High,    // Orange - dangerous operations\n    Critical, // Red - system-critical processes\n}\n\n#[derive(Debug, Clone)]\npub enum DialogAction {\n    Process(u32),\n    Processes(Vec\u003cu32\u003e),\n    Port(u16),\n}\n\nimpl AppState {\n    pub fn new() -\u003e Result\u003cSelf\u003e {\n        let mut process_monitor = ProcessMonitor::new();\n        let processes = process_monitor.get_processes();\n        let ports = PortManager::get_all_ports()?;\n        let connections = PortManager::get_active_connections()?;\n        let themes = ThemeManager::get_themes();\n        let settings = load_settings().unwrap_or_default();\n        let current_theme_index = themes\n            .iter()\n            .position(|t| t.name == settings.theme_name)\n            .unwrap_or(0);\n\n        Ok(Self {\n            mode: AppMode::Dashboard,\n            should_quit: false,\n            search_query: String::new(),\n            search_active: false,\n            selected_index: 0,\n            sort_by: SortBy::Cpu,\n            sort_order: SortOrder::Descending,\n            show_help: false,\n            status_message: None,\n            confirmation_dialog: None,\n\n            filtered_processes: processes.clone(),\n            processes,\n            ports: ports.clone(),\n            filtered_ports: ports.clone(),\n            connections: connections.clone(),\n            filtered_connections: connections,\n\n            process_monitor,\n            last_refresh: Instant::now(),\n            refresh_interval: Duration::from_secs(2),\n            auto_refresh: true,\n\n            selected_items: Vec::new(),\n            multi_select_mode: false,\n\n            cpu_history: vec![0; 100], // Store last 100 CPU usage points\n\n            themes,\n            current_theme_index,\n\n            view_history: vec![AppMode::Dashboard],\n            selection_memory: HashMap::new(),\n\n            detailed_view_mode: false,\n            column_headers_visible: true,\n\n            search_suggestions: vec![\n                \":3000\".to_string(),\n                \"#1234\".to_string(), \n                \"\u003e50%\".to_string(),\n                \"\u003e1GB\".to_string(),\n                \"node\".to_string(),\n            ],\n            show_search_help: false,\n        })\n    }\n\n    pub async fn handle_key_event(\u0026mut self, key: KeyEvent) -\u003e Result\u003c()\u003e {\n        // Handle global keys first\n        if key.modifiers.contains(KeyModifiers::CONTROL) {\n            match key.code {\n                KeyCode::Char('c') =\u003e {\n                    self.should_quit = true;\n                    return Ok(());\n                }\n                KeyCode::Char('r') =\u003e {\n                    self.refresh_data()?;\n                    return Ok(());\n                }\n                _ =\u003e {}\n            }\n        }\n\n        // Handle confirmation dialog\n        if let Some(_dialog) = \u0026self.confirmation_dialog {\n            match key.code {\n                KeyCode::Char('y') | KeyCode::Char('Y') | KeyCode::Enter =\u003e {\n                    self.execute_dialog_action().await?;\n                }\n                KeyCode::Char('n') | KeyCode::Char('N') | KeyCode::Esc =\u003e {\n                    self.confirmation_dialog = None;\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        // Handle search mode with enhanced features\n        if self.search_active {\n            match key.code {\n                KeyCode::Enter =\u003e {\n                    self.apply_search_filter();\n                    self.search_active = false;\n                    self.show_search_help = false;\n                }\n                KeyCode::Esc =\u003e {\n                    self.search_active = false;\n                    self.search_query.clear();\n                    self.show_search_help = false;\n                    self.reset_filters();\n                }\n                KeyCode::F(1) =\u003e {\n                    self.show_search_help = !self.show_search_help;\n                }\n                KeyCode::Tab =\u003e {\n                    self.autocomplete_search();\n                }\n                KeyCode::Backspace =\u003e {\n                    self.search_query.pop();\n                    self.apply_search_filter();\n                }\n                KeyCode::Char(c) =\u003e {\n                    self.search_query.push(c);\n                    self.apply_search_filter();\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        // Handle normal mode keys\n        if self.mode == AppMode::ThemeSelector {\n            match key.code {\n                KeyCode::Up | KeyCode::Char('k') =\u003e {\n                    self.selected_index = self.selected_index.saturating_sub(1);\n                }\n                KeyCode::Down | KeyCode::Char('j') =\u003e {\n                    if self.selected_index \u003c self.themes.len() - 1 {\n                        self.selected_index += 1;\n                    }\n                }\n                KeyCode::Enter =\u003e {\n                    self.current_theme_index = self.selected_index;\n                    let settings = UserSettings {\n                        theme_name: self.themes[self.current_theme_index].name.clone(),\n                    };\n                    if let Err(e) = save_settings(\u0026settings) {\n                        self.set_status_message(format!(\"Error saving settings: {e}\"));\n                    }\n                    self.mode = AppMode::Dashboard; // Go back to dashboard after selection\n                }\n                KeyCode::Esc | KeyCode::Char('q') =\u003e {\n                    self.mode = AppMode::Dashboard;\n                }\n                _ =\u003e {}\n            }\n            return Ok(());\n        }\n\n        match key.code {\n            // Navigation\n            KeyCode::Up | KeyCode::Char('k') =\u003e self.move_up(),\n            KeyCode::Down | KeyCode::Char('j') =\u003e self.move_down(),\n            KeyCode::PageUp =\u003e self.page_up(),\n            KeyCode::PageDown =\u003e self.page_down(),\n            KeyCode::Home =\u003e self.go_to_top(),\n            KeyCode::End =\u003e self.go_to_bottom(),\n\n            // Enhanced Mode switching with navigation memory\n            KeyCode::F(1) =\u003e self.switch_to_mode(AppMode::ProcessView),\n            KeyCode::F(2) =\u003e self.switch_to_mode(AppMode::PortView),\n            KeyCode::F(3) =\u003e self.switch_to_mode(AppMode::ConnectionView),\n            KeyCode::F(4) =\u003e self.switch_to_mode(AppMode::Dashboard),\n            KeyCode::Char('?') | KeyCode::F(12) =\u003e self.toggle_help(), // F12 for help to avoid F4 conflict\n\n            // Actions\n            KeyCode::Char('t') =\u003e self.switch_to_mode(AppMode::ThemeSelector),\n            KeyCode::Char('h') =\u003e self.go_back_in_history(),\n            KeyCode::Char('/') =\u003e self.enter_search_mode(),\n            KeyCode::Char('r') =\u003e self.refresh_data()?,\n            KeyCode::Char(' ') =\u003e self.toggle_selection(),\n            KeyCode::Enter =\u003e self.primary_action().await?,\n            KeyCode::Delete =\u003e self.kill_action(),\n\n            // Sorting and view options\n            KeyCode::Char('s') =\u003e self.cycle_sort(),\n            KeyCode::Char('d') =\u003e self.toggle_detailed_view(),\n            KeyCode::Char('c') =\u003e self.toggle_column_headers(),\n\n            // Quit\n            KeyCode::Char('q') | KeyCode::Esc =\u003e {\n                if self.show_help {\n                    self.show_help = false;\n                } else {\n                    self.should_quit = true;\n                }\n            }\n\n            _ =\u003e {}\n        }\n\n        Ok(())\n    }\n\n    pub fn should_refresh(\u0026self) -\u003e bool {\n        self.auto_refresh \u0026\u0026 self.last_refresh.elapsed() \u003e= self.refresh_interval\n    }\n\n    pub fn refresh_data(\u0026mut self) -\u003e Result\u003c()\u003e {\n        self.processes = self.process_monitor.get_processes();\n        self.ports = PortManager::get_all_ports()?;\n        self.connections = PortManager::get_active_connections()?;\n\n        // Update CPU history with actual system CPU usage (0-100%)\n        let system_cpu_usage = self.process_monitor.get_system_cpu_usage() as u64;\n        self.cpu_history.remove(0);\n        self.cpu_history.push(system_cpu_usage);\n\n        self.apply_current_filters();\n        self.last_refresh = Instant::now();\n        self.set_status_message(\"Data refreshed\".to_string());\n        Ok(())\n    }\n\n    pub fn apply_search_filter(\u0026mut self) {\n        if self.search_query.is_empty() {\n            self.reset_filters();\n            return;\n        }\n\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                self.filtered_processes = self\n                    .processes\n                    .iter()\n                    .filter(|p| p.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                self.sort_processes();\n            }\n            AppMode::PortView =\u003e {\n                self.filtered_ports = self\n                    .ports\n                    .iter()\n                    .filter(|p| p.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                self.sort_ports();\n            }\n            AppMode::ConnectionView =\u003e {\n                self.filtered_connections = self\n                    .connections\n                    .iter()\n                    .filter(|c| c.matches_search(\u0026self.search_query))\n                    .cloned()\n                    .collect();\n                // TODO: Add sorting for connections if needed\n            }\n            _ =\u003e {}\n        }\n\n        self.selected_index = 0;\n    }\n\n    fn reset_filters(\u0026mut self) {\n        self.filtered_processes = self.processes.clone();\n        self.filtered_ports = self.ports.clone();\n        self.filtered_connections = self.connections.clone();\n        self.apply_current_sorts();\n        if self.mode != AppMode::ThemeSelector {\n            self.selected_index = 0;\n        }\n    }\n\n    fn apply_current_filters(\u0026mut self) {\n        if self.search_query.is_empty() {\n            self.reset_filters();\n        } else {\n            self.apply_search_filter();\n        }\n    }\n\n    fn apply_current_sorts(\u0026mut self) {\n        self.sort_processes();\n        self.sort_ports();\n        self.sort_connections();\n    }\n\n    fn sort_processes(\u0026mut self) {\n        match self.sort_by {\n            SortBy::Name =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.name.cmp(\u0026b.name);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Pid =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.pid.cmp(\u0026b.pid);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Cpu =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a\n                        .cpu_usage\n                        .partial_cmp(\u0026b.cpu_usage)\n                        .unwrap_or(std::cmp::Ordering::Equal);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Memory =\u003e {\n                self.filtered_processes.sort_by(|a, b| {\n                    let cmp = a.memory.cmp(\u0026b.memory);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            _ =\u003e {}\n        }\n    }\n\n    fn sort_ports(\u0026mut self) {\n        if self.sort_by == SortBy::Port {\n            self.filtered_ports.sort_by(|a, b| {\n                let cmp = a.port.cmp(\u0026b.port);\n                if self.sort_order == SortOrder::Ascending {\n                    cmp\n                } else {\n                    cmp.reverse()\n                }\n            });\n        }\n    }\n\n    fn sort_connections(\u0026mut self) {\n        match self.sort_by {\n            SortBy::LocalAddress =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.local_address.cmp(\u0026b.local_address);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::RemoteAddress =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.remote_address.cmp(\u0026b.remote_address);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            SortBy::Pid =\u003e {\n                self.filtered_connections.sort_by(|a, b| {\n                    let cmp = a.pid.cmp(\u0026b.pid);\n                    if self.sort_order == SortOrder::Ascending {\n                        cmp\n                    } else {\n                        cmp.reverse()\n                    }\n                });\n            }\n            _ =\u003e {}\n        }\n    }\n\n    // Navigation methods\n    fn move_up(\u0026mut self) {\n        if self.selected_index \u003e 0 {\n            self.selected_index -= 1;\n        }\n    }\n\n    fn move_down(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            AppMode::ConnectionView =\u003e self.filtered_connections.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n\n        if self.selected_index \u003c max_index {\n            self.selected_index += 1;\n        }\n    }\n\n    fn page_up(\u0026mut self) {\n        self.selected_index = self.selected_index.saturating_sub(10);\n    }\n\n    fn page_down(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n\n        self.selected_index = std::cmp::min(self.selected_index + 10, max_index);\n    }\n\n    fn go_to_top(\u0026mut self) {\n        self.selected_index = 0;\n    }\n\n    fn go_to_bottom(\u0026mut self) {\n        self.selected_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n    }\n\n    fn enter_search_mode(\u0026mut self) {\n        self.search_active = true;\n        self.search_query.clear();\n        self.show_search_help = true; // Show help by default when entering search\n        self.set_status_message(\"Search mode - F1: toggle help, Tab: autocomplete, Enter: apply\".to_string());\n    }\n\n    // Enhanced search methods\n    fn autocomplete_search(\u0026mut self) {\n        if self.search_query.is_empty() {\n            // Show first suggestion\n            if let Some(suggestion) = self.search_suggestions.first() {\n                self.search_query = suggestion.clone();\n                self.apply_search_filter();\n            }\n        } else {\n            // Find next matching suggestion\n            let current_suggestion = self.search_suggestions\n                .iter()\n                .find(|s| s.starts_with(\u0026self.search_query))\n                .cloned();\n                \n            if let Some(suggestion) = current_suggestion {\n                self.search_query = suggestion;\n                self.apply_search_filter();\n            }\n        }\n    }\n\n    pub fn get_search_pattern_help(\u0026self) -\u003e Vec\u003c(\u0026'static str, \u0026'static str)\u003e {\n        vec![\n            (\":3000\", \"Find processes using port 3000\"),\n            (\"#1234\", \"Search by Process ID\"),\n            (\"\u003e50%\", \"Processes using \u003e50% CPU\"),\n            (\"\u003e1GB\", \"Processes using \u003e1GB memory\"),\n            (\"node\", \"Search by process name\"),\n            (\"3000-8000\", \"Port range search\"),\n        ]\n    }\n\n    fn toggle_help(\u0026mut self) {\n        self.show_help = !self.show_help;\n    }\n\n    fn toggle_selection(\u0026mut self) {\n        if !self.multi_select_mode {\n            self.multi_select_mode = true;\n            self.selected_items.clear();\n        }\n\n        if self.selected_items.contains(\u0026self.selected_index) {\n            self.selected_items.retain(|\u0026x| x != self.selected_index);\n        } else {\n            self.selected_items.push(self.selected_index);\n        }\n\n        if self.selected_items.is_empty() {\n            self.multi_select_mode = false;\n        }\n    }\n\n    fn cycle_sort(\u0026mut self) {\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                self.sort_by = match self.sort_by {\n                    SortBy::Name =\u003e SortBy::Pid,\n                    SortBy::Pid =\u003e SortBy::Cpu,\n                    SortBy::Cpu =\u003e SortBy::Memory,\n                    SortBy::Memory =\u003e SortBy::Name,\n                    _ =\u003e SortBy::Name,\n                };\n            }\n            AppMode::PortView =\u003e {\n                self.sort_by = SortBy::Port;\n                self.sort_order = match self.sort_order {\n                    SortOrder::Ascending =\u003e SortOrder::Descending,\n                    SortOrder::Descending =\u003e SortOrder::Ascending,\n                };\n            }\n            AppMode::ConnectionView =\u003e {\n                self.sort_by = match self.sort_by {\n                    SortBy::LocalAddress =\u003e SortBy::RemoteAddress,\n                    SortBy::RemoteAddress =\u003e SortBy::Pid,\n                    _ =\u003e SortBy::LocalAddress,\n                };\n            }\n            _ =\u003e {}\n        }\n\n        self.apply_current_sorts();\n        self.set_status_message(format!(\n            \"Sorted by {:?} ({})\",\n            self.sort_by,\n            if self.sort_order == SortOrder::Ascending {\n                \"â†‘\"\n            } else {\n                \"â†“\"\n            }\n        ));\n    }\n\n    async fn primary_action(\u0026mut self) -\u003e Result\u003c()\u003e {\n        match self.mode {\n            AppMode::ProcessView =\u003e {\n                if let Some(process) = self.filtered_processes.get(self.selected_index) {\n                    self.show_kill_process_dialog(process.pid);\n                }\n            }\n            AppMode::PortView =\u003e {\n                if let Some(port) = self.filtered_ports.get(self.selected_index) {\n                    self.show_kill_port_dialog(port.port);\n                }\n            }\n            _ =\u003e {}\n        }\n        Ok(())\n    }\n\n    fn kill_action(\u0026mut self) {\n        if self.multi_select_mode \u0026\u0026 !self.selected_items.is_empty() {\n            self.show_kill_multiple_dialog();\n        } else {\n            match self.mode {\n                AppMode::ProcessView =\u003e {\n                    if let Some(process) = self.filtered_processes.get(self.selected_index) {\n                        self.show_kill_process_dialog(process.pid);\n                    }\n                }\n                AppMode::PortView =\u003e {\n                    if let Some(port) = self.filtered_ports.get(self.selected_index) {\n                        self.show_kill_port_dialog(port.port);\n                    }\n                }\n                _ =\u003e {}\n            }\n        }\n    }\n\n    fn show_kill_process_dialog(\u0026mut self, pid: u32) {\n        let process = self.processes.iter().find(|p| p.pid == pid);\n        let process_name = process\n            .map(|p| p.name.clone())\n            .unwrap_or_else(|| format!(\"PID {pid}\"));\n\n        // Determine warning level based on process characteristics\n        let (warning_level, additional_info) = if let Some(p) = process {\n            self.assess_process_safety(p)\n        } else {\n            (WarningLevel::Medium, vec![\"Process information unavailable\".to_string()])\n        };\n\n        let warning_emoji = match warning_level {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\",\n            WarningLevel::High =\u003e \"ğŸŸ \",\n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Process\", warning_emoji),\n            message: format!(\n                \"Kill process '{process_name}' (PID: {pid})?\\n\\nPress 'y' to confirm, 'n' to cancel\"\n            ),\n            confirm_action: DialogAction::Process(pid),\n            warning_level,\n            additional_info,\n        });\n    }\n\n    fn assess_process_safety(\u0026self, process: \u0026ProcessInfo) -\u003e (WarningLevel, Vec\u003cString\u003e) {\n        let mut info = Vec::new();\n        let mut warning_level = WarningLevel::Low;\n\n        // Check for system-critical processes\n        let critical_processes = [\"kernel_task\", \"launchd\", \"WindowServer\", \"systemd\", \"init\"];\n        if critical_processes.iter().any(|\u0026name| process.name.contains(name)) {\n            warning_level = WarningLevel::Critical;\n            info.push(\"âš ï¸  CRITICAL: This is a system process!\".to_string());\n            info.push(\"Killing this may cause system instability.\".to_string());\n        }\n\n        // Check for high resource usage (might be important)\n        if process.cpu_usage \u003e 50.0 || process.memory \u003e 1024 * 1024 * 1024 {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(format!(\"High resource usage: {:.1}% CPU, {}\", \n                             process.cpu_usage, process.format_memory()));\n        }\n\n        // Check for development processes\n        let dev_processes = [\"node\", \"npm\", \"python\", \"ruby\", \"java\", \"docker\"];\n        if dev_processes.iter().any(|\u0026name| process.name.to_lowercase().contains(name)) {\n            if warning_level \u003c WarningLevel::Medium {\n                warning_level = WarningLevel::Medium;\n            }\n            info.push(\"This appears to be a development process.\".to_string());\n        }\n\n        // Count child processes (simulated - would need actual process tree)\n        if process.pid \u003c 1000 {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(\"Low PID number - may be a system service.\".to_string());\n        }\n\n        if info.is_empty() {\n            info.push(\"Process appears safe to terminate.\".to_string());\n        }\n\n        (warning_level, info)\n    }\n\n    fn show_kill_port_dialog(\u0026mut self, port: u16) {\n        let (warning_level, additional_info) = self.assess_port_safety(port);\n        \n        let warning_emoji = match warning_level {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\", \n            WarningLevel::High =\u003e \"ğŸŸ \",\n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Process on Port\", warning_emoji),\n            message: format!(\n                \"Kill process using port {port}?\\n\\nPress 'y' to confirm, 'n' to cancel\"\n            ),\n            confirm_action: DialogAction::Port(port),\n            warning_level,\n            additional_info,\n        });\n    }\n\n    fn assess_port_safety(\u0026self, port: u16) -\u003e (WarningLevel, Vec\u003cString\u003e) {\n        let mut info = Vec::new();\n        let mut warning_level = WarningLevel::Low;\n\n        // Check for system/critical ports\n        let critical_ports = [22, 25, 53, 80, 443, 993, 995];\n        if critical_ports.contains(\u0026port) {\n            warning_level = WarningLevel::Critical;\n            info.push(\"âš ï¸  CRITICAL: This is a system service port!\".to_string());\n        }\n\n        // Check for common development ports\n        let dev_ports = [3000, 3001, 4200, 5000, 8000, 8080, 9000];\n        if dev_ports.contains(\u0026port) {\n            warning_level = WarningLevel::Medium;\n            info.push(\"This appears to be a development server.\".to_string());\n        }\n\n        // Check for database ports\n        let db_ports = [3306, 5432, 27017, 6379];\n        if db_ports.contains(\u0026port) {\n            if warning_level \u003c WarningLevel::High {\n                warning_level = WarningLevel::High;\n            }\n            info.push(\"âš ï¸  This is a database service port.\".to_string());\n            info.push(\"Killing may cause data loss or application errors.\".to_string());\n        }\n\n        if info.is_empty() {\n            info.push(\"Port appears safe to terminate.\".to_string());\n        }\n\n        (warning_level, info)\n    }\n\n    fn show_kill_multiple_dialog(\u0026mut self) {\n        let count = self.selected_items.len();\n        let pids: Vec\u003cu32\u003e = self.selected_items\n            .iter()\n            .filter_map(|\u0026index| match self.mode {\n                AppMode::ProcessView =\u003e self.filtered_processes.get(index).map(|p| p.pid),\n                _ =\u003e None,\n            })\n            .collect();\n\n        // Assess danger level for batch operation\n        let mut highest_warning = WarningLevel::Low;\n        let mut warnings = Vec::new();\n        \n        for \u0026index in \u0026self.selected_items {\n            if let Some(process) = self.filtered_processes.get(index) {\n                let (warning_level, _) = self.assess_process_safety(process);\n                if warning_level \u003e highest_warning {\n                    highest_warning = warning_level;\n                }\n            }\n        }\n\n        warnings.push(format!(\"This will kill {} processes simultaneously.\", count));\n        warnings.push(\"Review each process carefully before confirming.\".to_string());\n        \n        if highest_warning \u003e= WarningLevel::High {\n            warnings.push(\"âš ï¸  Some processes may be critical!\".to_string());\n        }\n\n        let warning_emoji = match highest_warning {\n            WarningLevel::Low =\u003e \"âœ…\",\n            WarningLevel::Medium =\u003e \"âš ï¸\",\n            WarningLevel::High =\u003e \"ğŸŸ \", \n            WarningLevel::Critical =\u003e \"ğŸ”´\",\n        };\n\n        self.confirmation_dialog = Some(ConfirmationDialog {\n            title: format!(\"{} Kill Multiple Processes\", warning_emoji),\n            message: format!(\"Kill {count} selected processes?\\n\\nPress 'y' to confirm, 'n' to cancel\"),\n            confirm_action: DialogAction::Processes(pids),\n            warning_level: highest_warning,\n            additional_info: warnings,\n        });\n    }\n\n    async fn execute_dialog_action(\u0026mut self) -\u003e Result\u003c()\u003e {\n        if let Some(dialog) = self.confirmation_dialog.take() {\n            match dialog.confirm_action {\n                DialogAction::Process(pid) =\u003e {\n                    match crate::process::ProcessKiller::kill_process_by_pid(pid, false).await {\n                        Ok(()) =\u003e {\n                            self.set_status_message(format!(\"Successfully killed process {pid}\"));\n                            self.refresh_data()?;\n                        }\n                        Err(e) =\u003e {\n                            self.set_status_message(format!(\"Failed to kill process {pid}: {e}\"));\n                        }\n                    }\n                }\n                DialogAction::Port(port) =\u003e {\n                    match crate::process::ProcessKiller::kill_process_by_port(port).await {\n                        Ok(pid) =\u003e {\n                            self.set_status_message(format!(\n                                \"Successfully killed process {pid} using port {port}\"\n                            ));\n                            self.refresh_data()?;\n                        }\n                        Err(e) =\u003e {\n                            self.set_status_message(format!(\"Failed to kill port {port}: {e}\"));\n                        }\n                    }\n                }\n                DialogAction::Processes(pids) =\u003e {\n                    let mut success_count = 0;\n                    for pid in pids {\n                        if crate::process::ProcessKiller::kill_process_by_pid(pid, false)\n                            .await\n                            .is_ok()\n                        {\n                            success_count += 1;\n                        }\n                    }\n                    self.set_status_message(format!(\"Killed {success_count} processes\"));\n                    self.multi_select_mode = false;\n                    self.selected_items.clear();\n                    self.refresh_data()?;\n                }\n            }\n        }\n        Ok(())\n    }\n\n    pub fn set_status_message(\u0026mut self, message: String) {\n        self.status_message = Some((message, Instant::now()));\n    }\n\n    // Enhanced navigation methods\n    pub fn switch_to_mode(\u0026mut self, new_mode: AppMode) {\n        if new_mode != self.mode {\n            // Save current selection for this mode\n            self.selection_memory.insert(self.mode.clone(), self.selected_index);\n            \n            // Add to history if not already the last item\n            if self.view_history.last() != Some(\u0026self.mode) {\n                self.view_history.push(self.mode.clone());\n                // Keep history size manageable\n                if self.view_history.len() \u003e 10 {\n                    self.view_history.remove(0);\n                }\n            }\n\n            // Switch to new mode\n            self.mode = new_mode.clone();\n            \n            // Restore selection for new mode if available\n            if let Some(\u0026saved_selection) = self.selection_memory.get(\u0026new_mode) {\n                self.selected_index = saved_selection;\n                // Validate selection is still within bounds\n                self.validate_selection_bounds();\n            } else {\n                self.selected_index = 0;\n            }\n\n            self.set_status_message(format!(\"Switched to {:?} view\", new_mode));\n        }\n    }\n\n    pub fn go_back_in_history(\u0026mut self) {\n        if self.view_history.len() \u003e 1 {\n            // Remove current mode from history and go to previous\n            self.view_history.pop();\n            if let Some(previous_mode) = self.view_history.last().cloned() {\n                self.switch_to_mode(previous_mode);\n                self.set_status_message(\"Navigated back in history\".to_string());\n            }\n        } else {\n            self.set_status_message(\"No previous view in history\".to_string());\n        }\n    }\n\n    fn validate_selection_bounds(\u0026mut self) {\n        let max_index = match self.mode {\n            AppMode::ProcessView =\u003e self.filtered_processes.len().saturating_sub(1),\n            AppMode::PortView =\u003e self.filtered_ports.len().saturating_sub(1),\n            AppMode::ConnectionView =\u003e self.filtered_connections.len().saturating_sub(1),\n            AppMode::ThemeSelector =\u003e self.themes.len().saturating_sub(1),\n            _ =\u003e 0,\n        };\n        \n        if self.selected_index \u003e max_index {\n            self.selected_index = max_index;\n        }\n    }\n\n    // Visual enhancement methods\n    pub fn toggle_detailed_view(\u0026mut self) {\n        self.detailed_view_mode = !self.detailed_view_mode;\n        let mode_text = if self.detailed_view_mode { \"detailed\" } else { \"compact\" };\n        self.set_status_message(format!(\"Switched to {} view mode\", mode_text));\n    }\n\n    pub fn toggle_column_headers(\u0026mut self) {\n        self.column_headers_visible = !self.column_headers_visible;\n        let status = if self.column_headers_visible { \"shown\" } else { \"hidden\" };\n        self.set_status_message(format!(\"Column headers {}\", status));\n    }\n\n    pub fn get_priority_indicator(\u0026self, process: \u0026ProcessInfo) -\u003e \u0026'static str {\n        if process.cpu_usage \u003e 50.0 {\n            \"ğŸ”´\" // High CPU\n        } else if process.cpu_usage \u003e 20.0 {\n            \"ğŸŸ¡\" // Medium CPU\n        } else if process.memory \u003e 1024 * 1024 * 1024 { // \u003e 1GB\n            \"ğŸŸ \" // High memory\n        } else {\n            \" \"  // Normal\n        }\n    }\n\n    pub fn get_status_message(\u0026self) -\u003e Option\u003c\u0026str\u003e {\n        if let Some((ref message, timestamp)) = self.status_message {\n            if timestamp.elapsed() \u003c Duration::from_secs(5) {\n                Some(message.as_str())\n            } else {\n                None\n            }\n        } else {\n            None\n        }\n    }\n}\n\nimpl Default for AppState {\n    fn default() -\u003e Self {\n        Self::new().expect(\"Failed to create default AppState\")\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crossterm::event::{KeyCode, KeyModifiers};\n\n    fn create_test_app_state() -\u003e AppState {\n        // Create a minimal test app state without system calls\n        let themes = ThemeManager::get_themes();\n        let settings = UserSettings::default();\n        let current_theme_index = themes\n            .iter()\n            .position(|t| t.name == settings.theme_name)\n            .unwrap_or(0);\n\n        AppState {\n            mode: AppMode::Dashboard,\n            should_quit: false,\n            search_query: String::new(),\n            search_active: false,\n            selected_index: 0,\n            sort_by: SortBy::Cpu,\n            sort_order: SortOrder::Descending,\n            show_help: false,\n            status_message: None,\n            confirmation_dialog: None,\n\n            processes: vec![],\n            filtered_processes: vec![],\n            ports: vec![],\n            filtered_ports: vec![],\n            connections: vec![],\n            filtered_connections: vec![],\n\n            process_monitor: ProcessMonitor::new(),\n            last_refresh: Instant::now(),\n            refresh_interval: Duration::from_secs(2),\n            auto_refresh: true,\n\n            selected_items: Vec::new(),\n            multi_select_mode: false,\n\n            cpu_history: vec![0; 100],\n            themes,\n            current_theme_index,\n            \n            view_history: vec![AppMode::Dashboard],\n            selection_memory: HashMap::new(),\n            detailed_view_mode: false,\n            column_headers_visible: true,\n            search_suggestions: vec![\n                \":3000\".to_string(),\n                \"#1234\".to_string(), \n                \"\u003e50%\".to_string(),\n                \"\u003e1GB\".to_string(),\n                \"node\".to_string(),\n            ],\n            show_search_help: false,\n        }\n    }\n\n    #[test]\n    fn test_app_state_creation() {\n        let app = create_test_app_state();\n        assert_eq!(app.mode, AppMode::Dashboard);\n        assert!(!app.should_quit);\n        assert!(!app.search_active);\n        assert_eq!(app.selected_index, 0);\n        assert_eq!(app.sort_by, SortBy::Cpu);\n        assert_eq!(app.sort_order, SortOrder::Descending);\n    }\n\n    #[test]\n    fn test_mode_switching() {\n        let mut app = create_test_app_state();\n\n        // Test switching to different modes\n        app.mode = AppMode::ProcessView;\n        assert_eq!(app.mode, AppMode::ProcessView);\n\n        app.mode = AppMode::PortView;\n        assert_eq!(app.mode, AppMode::PortView);\n\n        app.mode = AppMode::ConnectionView;\n        assert_eq!(app.mode, AppMode::ConnectionView);\n    }\n\n    #[tokio::test]\n    async fn test_key_event_handling_quit() {\n        let mut app = create_test_app_state();\n\n        // Test Ctrl+C to quit\n        let key_event = KeyEvent::new(KeyCode::Char('c'), KeyModifiers::CONTROL);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(app.should_quit);\n    }\n\n    #[tokio::test]\n    async fn test_key_event_handling_navigation() {\n        let mut app = create_test_app_state();\n\n        // Add some test data\n        app.filtered_processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"test1\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"test2\".to_string(),\n                cpu_usage: 20.0,\n                memory: 2000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        app.mode = AppMode::ProcessView;\n        assert_eq!(app.selected_index, 0);\n\n        // Test moving down\n        let key_event = KeyEvent::new(KeyCode::Down, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.selected_index, 1);\n\n        // Test moving up\n        let key_event = KeyEvent::new(KeyCode::Up, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.selected_index, 0);\n    }\n\n    #[tokio::test]\n    async fn test_search_functionality() {\n        let mut app = create_test_app_state();\n\n        // Enter search mode\n        let key_event = KeyEvent::new(KeyCode::Char('/'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(app.search_active);\n\n        // Type search query\n        let key_event = KeyEvent::new(KeyCode::Char('t'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"t\");\n\n        let key_event = KeyEvent::new(KeyCode::Char('e'), KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"te\");\n\n        // Test backspace\n        let key_event = KeyEvent::new(KeyCode::Backspace, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert_eq!(app.search_query, \"t\");\n\n        // Exit search mode\n        let key_event = KeyEvent::new(KeyCode::Esc, KeyModifiers::NONE);\n        app.handle_key_event(key_event).await.unwrap();\n        assert!(!app.search_active);\n        assert!(app.search_query.is_empty());\n    }\n\n    #[test]\n    fn test_multi_selection() {\n        let mut app = create_test_app_state();\n\n        // Start multi-selection\n        app.toggle_selection();\n        assert!(app.multi_select_mode);\n        assert!(app.selected_items.contains(\u00260));\n\n        // Add another selection\n        app.selected_index = 1;\n        app.toggle_selection();\n        assert!(app.selected_items.contains(\u00261));\n        assert_eq!(app.selected_items.len(), 2);\n\n        // Remove selection\n        app.selected_index = 0;\n        app.toggle_selection();\n        assert!(!app.selected_items.contains(\u00260));\n        assert_eq!(app.selected_items.len(), 1);\n\n        // Clear all selections\n        app.selected_index = 1;\n        app.toggle_selection();\n        assert!(!app.multi_select_mode);\n        assert!(app.selected_items.is_empty());\n    }\n\n    #[test]\n    fn test_sorting_functionality() {\n        let mut app = create_test_app_state();\n\n        // Test initial sort state\n        assert_eq!(app.sort_by, SortBy::Cpu);\n        assert_eq!(app.sort_order, SortOrder::Descending);\n\n        // Switch to process view and cycle sort\n        app.mode = AppMode::ProcessView;\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Memory); // Cpu -\u003e Memory\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Name); // Memory -\u003e Name\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Pid); // Name -\u003e Pid\n\n        app.cycle_sort();\n        assert_eq!(app.sort_by, SortBy::Cpu); // Pid -\u003e Cpu (back to start)\n    }\n\n    #[test]\n    fn test_status_message() {\n        let mut app = create_test_app_state();\n\n        // Set status message\n        app.set_status_message(\"Test message\".to_string());\n        assert_eq!(app.get_status_message(), Some(\"Test message\"));\n\n        // Message should expire after some time (tested by setting old timestamp)\n        if let Some((_, ref mut timestamp)) = app.status_message {\n            *timestamp = Instant::now() - Duration::from_secs(10);\n        }\n        assert_eq!(app.get_status_message(), None);\n    }\n\n    #[test]\n    fn test_dialog_functionality() {\n        let mut app = create_test_app_state();\n\n        // Show kill process dialog\n        app.show_kill_process_dialog(1234);\n        assert!(app.confirmation_dialog.is_some());\n\n        if let Some(ref dialog) = app.confirmation_dialog {\n            assert!(dialog.title.contains(\"Kill Process\"));\n            assert!(dialog.message.contains(\"1234\"));\n        }\n\n        // Show kill port dialog\n        app.show_kill_port_dialog(8080);\n        assert!(app.confirmation_dialog.is_some());\n\n        if let Some(ref dialog) = app.confirmation_dialog {\n            assert!(dialog.title.contains(\"Kill Process on Port\"));\n            assert!(dialog.message.contains(\"8080\"));\n        }\n    }\n\n    #[test]\n    fn test_refresh_timing() {\n        let mut app = create_test_app_state();\n\n        // Should not need refresh immediately after creation\n        assert!(!app.should_refresh());\n\n        // Set old refresh time to trigger refresh\n        app.last_refresh = Instant::now() - Duration::from_secs(5);\n        assert!(app.should_refresh());\n\n        // Disable auto-refresh\n        app.auto_refresh = false;\n        assert!(!app.should_refresh());\n    }\n\n    #[test]\n    fn test_navigation_bounds() {\n        let mut app = create_test_app_state();\n\n        // Add test processes\n        app.filtered_processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"test1\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"test2\".to_string(),\n                cpu_usage: 20.0,\n                memory: 2000,\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        app.mode = AppMode::ProcessView;\n\n        // Test navigation bounds\n        app.selected_index = 0;\n        app.move_up(); // Should stay at 0\n        assert_eq!(app.selected_index, 0);\n\n        app.move_down();\n        assert_eq!(app.selected_index, 1);\n\n        app.move_down(); // Should stay at 1 (last item)\n        assert_eq!(app.selected_index, 1);\n\n        // Test go to top/bottom\n        app.go_to_top();\n        assert_eq!(app.selected_index, 0);\n\n        app.go_to_bottom();\n        assert_eq!(app.selected_index, 1);\n    }\n\n    #[test]\n    fn test_filter_application() {\n        let mut app = create_test_app_state();\n\n        // Add test data\n        app.processes = vec![\n            ProcessInfo {\n                pid: 1,\n                name: \"node\".to_string(),\n                cpu_usage: 50.0,\n                memory: 1024 * 1024 * 500, // 500MB\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n            ProcessInfo {\n                pid: 2,\n                name: \"python\".to_string(),\n                cpu_usage: 10.0,\n                memory: 1024 * 1024 * 100, // 100MB\n                parent_pid: None,\n                status: \"Running\".to_string(),\n                start_time: 0,\n                user_id: None,\n                executable_path: None,\n                command_line: vec![],\n            },\n        ];\n\n        // Test search filtering\n        app.mode = AppMode::ProcessView; // Set the mode first\n        app.search_query = \"node\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_processes.len(), 1);\n        assert_eq!(app.filtered_processes[0].name, \"node\");\n\n        // Test CPU filtering\n        app.search_query = \"\u003e30%\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_processes.len(), 1);\n        assert_eq!(app.filtered_processes[0].name, \"node\");\n\n        // Reset filters\n        app.reset_filters();\n        assert_eq!(app.filtered_processes.len(), 2);\n    }\n\n    #[test]\n    fn test_connection_view_filtering() {\n        use crate::network::Protocol;\n\n        let mut app = create_test_app_state();\n        app.connections = vec![\n            ConnectionInfo {\n                protocol: Protocol::Tcp,\n                local_address: \"127.0.0.1:1234\".parse().unwrap(),\n                remote_address: \"1.1.1.1:443\".parse().unwrap(),\n                pid: Some(100),\n                process_name: Some(\"chrome\".to_string()),\n            },\n            ConnectionInfo {\n                protocol: Protocol::Tcp,\n                local_address: \"127.0.0.1:5678\".parse().unwrap(),\n                remote_address: \"2.2.2.2:80\".parse().unwrap(),\n                pid: Some(200),\n                process_name: Some(\"firefox\".to_string()),\n            },\n        ];\n\n        app.mode = AppMode::ConnectionView;\n        app.reset_filters(); // Initialize filtered_connections\n\n        // Test search by process name\n        app.search_query = \"chrome\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n        assert_eq!(\n            app.filtered_connections[0].process_name.as_deref(),\n            Some(\"chrome\")\n        );\n\n        // Test search by IP address\n        app.search_query = \"2.2.2.2\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n        assert_eq!(app.filtered_connections[0].pid, Some(200));\n\n        // Test search by PID\n        app.search_query = \"100\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 1);\n\n        // Reset filters\n        app.search_query = \"\".to_string();\n        app.apply_search_filter();\n        assert_eq!(app.filtered_connections.len(), 2);\n    }\n}\n","traces":[{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":16}},{"line":174,"address":[],"length":0,"stats":{"Line":16}},{"line":175,"address":[],"length":0,"stats":{"Line":1}},{"line":177,"address":[],"length":0,"stats":{"Line":1}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":7}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":7}},{"line":204,"address":[],"length":0,"stats":{"Line":4}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":1}},{"line":211,"address":[],"length":0,"stats":{"Line":2}},{"line":212,"address":[],"length":0,"stats":{"Line":3}},{"line":213,"address":[],"length":0,"stats":{"Line":2}},{"line":214,"address":[],"length":0,"stats":{"Line":1}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":1}},{"line":223,"address":[],"length":0,"stats":{"Line":1}},{"line":224,"address":[],"length":0,"stats":{"Line":1}},{"line":226,"address":[],"length":0,"stats":{"Line":4}},{"line":227,"address":[],"length":0,"stats":{"Line":8}},{"line":228,"address":[],"length":0,"stats":{"Line":2}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":4}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":2}},{"line":267,"address":[],"length":0,"stats":{"Line":2}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":275,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":2}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":3}},{"line":309,"address":[],"length":0,"stats":{"Line":3}},{"line":310,"address":[],"length":0,"stats":{"Line":5}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":9}},{"line":330,"address":[],"length":0,"stats":{"Line":18}},{"line":331,"address":[],"length":0,"stats":{"Line":2}},{"line":332,"address":[],"length":0,"stats":{"Line":1}},{"line":337,"address":[],"length":0,"stats":{"Line":2}},{"line":340,"address":[],"length":0,"stats":{"Line":12}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":6}},{"line":356,"address":[],"length":0,"stats":{"Line":3}},{"line":357,"address":[],"length":0,"stats":{"Line":3}},{"line":358,"address":[],"length":0,"stats":{"Line":21}},{"line":359,"address":[],"length":0,"stats":{"Line":3}},{"line":360,"address":[],"length":0,"stats":{"Line":3}},{"line":363,"address":[],"length":0,"stats":{"Line":3}},{"line":369,"address":[],"length":0,"stats":{"Line":4}},{"line":370,"address":[],"length":0,"stats":{"Line":12}},{"line":371,"address":[],"length":0,"stats":{"Line":12}},{"line":372,"address":[],"length":0,"stats":{"Line":12}},{"line":373,"address":[],"length":0,"stats":{"Line":8}},{"line":374,"address":[],"length":0,"stats":{"Line":8}},{"line":375,"address":[],"length":0,"stats":{"Line":4}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":8}},{"line":388,"address":[],"length":0,"stats":{"Line":16}},{"line":389,"address":[],"length":0,"stats":{"Line":16}},{"line":390,"address":[],"length":0,"stats":{"Line":16}},{"line":393,"address":[],"length":0,"stats":{"Line":10}},{"line":394,"address":[],"length":0,"stats":{"Line":10}},{"line":396,"address":[],"length":0,"stats":{"Line":1}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":401,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":2}},{"line":407,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":416,"address":[],"length":0,"stats":{"Line":15}},{"line":417,"address":[],"length":0,"stats":{"Line":2}},{"line":418,"address":[],"length":0,"stats":{"Line":1}},{"line":419,"address":[],"length":0,"stats":{"Line":2}},{"line":420,"address":[],"length":0,"stats":{"Line":2}},{"line":421,"address":[],"length":0,"stats":{"Line":1}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":1}},{"line":429,"address":[],"length":0,"stats":{"Line":2}},{"line":430,"address":[],"length":0,"stats":{"Line":0}},{"line":431,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":434,"address":[],"length":0,"stats":{"Line":0}},{"line":438,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":8}},{"line":443,"address":[],"length":0,"stats":{"Line":8}},{"line":444,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":446,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":8}},{"line":456,"address":[],"length":0,"stats":{"Line":8}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":1}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":7}},{"line":492,"address":[],"length":0,"stats":{"Line":2}},{"line":493,"address":[],"length":0,"stats":{"Line":3}},{"line":494,"address":[],"length":0,"stats":{"Line":1}},{"line":498,"address":[],"length":0,"stats":{"Line":3}},{"line":499,"address":[],"length":0,"stats":{"Line":6}},{"line":500,"address":[],"length":0,"stats":{"Line":3}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":502,"address":[],"length":0,"stats":{"Line":0}},{"line":503,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":5}},{"line":507,"address":[],"length":0,"stats":{"Line":2}},{"line":511,"address":[],"length":0,"stats":{"Line":0}},{"line":512,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":518,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":522,"address":[],"length":0,"stats":{"Line":0}},{"line":525,"address":[],"length":0,"stats":{"Line":1}},{"line":526,"address":[],"length":0,"stats":{"Line":1}},{"line":529,"address":[],"length":0,"stats":{"Line":1}},{"line":530,"address":[],"length":0,"stats":{"Line":1}},{"line":531,"address":[],"length":0,"stats":{"Line":1}},{"line":532,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":1}},{"line":538,"address":[],"length":0,"stats":{"Line":1}},{"line":539,"address":[],"length":0,"stats":{"Line":2}},{"line":540,"address":[],"length":0,"stats":{"Line":1}},{"line":541,"address":[],"length":0,"stats":{"Line":4}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":548,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}},{"line":559,"address":[],"length":0,"stats":{"Line":0}},{"line":566,"address":[],"length":0,"stats":{"Line":0}},{"line":567,"address":[],"length":0,"stats":{"Line":0}},{"line":568,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":570,"address":[],"length":0,"stats":{"Line":0}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":572,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":581,"address":[],"length":0,"stats":{"Line":4}},{"line":582,"address":[],"length":0,"stats":{"Line":5}},{"line":583,"address":[],"length":0,"stats":{"Line":1}},{"line":584,"address":[],"length":0,"stats":{"Line":1}},{"line":587,"address":[],"length":0,"stats":{"Line":8}},{"line":588,"address":[],"length":0,"stats":{"Line":10}},{"line":590,"address":[],"length":0,"stats":{"Line":2}},{"line":593,"address":[],"length":0,"stats":{"Line":9}},{"line":594,"address":[],"length":0,"stats":{"Line":1}},{"line":598,"address":[],"length":0,"stats":{"Line":4}},{"line":599,"address":[],"length":0,"stats":{"Line":4}},{"line":601,"address":[],"length":0,"stats":{"Line":4}},{"line":602,"address":[],"length":0,"stats":{"Line":1}},{"line":603,"address":[],"length":0,"stats":{"Line":1}},{"line":604,"address":[],"length":0,"stats":{"Line":1}},{"line":605,"address":[],"length":0,"stats":{"Line":1}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":611,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":617,"address":[],"length":0,"stats":{"Line":0}},{"line":618,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":8}},{"line":627,"address":[],"length":0,"stats":{"Line":12}},{"line":628,"address":[],"length":0,"stats":{"Line":4}},{"line":630,"address":[],"length":0,"stats":{"Line":4}},{"line":631,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":4}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":641,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":650,"address":[],"length":0,"stats":{"Line":0}},{"line":652,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":659,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":670,"address":[],"length":0,"stats":{"Line":0}},{"line":675,"address":[],"length":0,"stats":{"Line":1}},{"line":676,"address":[],"length":0,"stats":{"Line":3}},{"line":677,"address":[],"length":0,"stats":{"Line":2}},{"line":678,"address":[],"length":0,"stats":{"Line":1}},{"line":679,"address":[],"length":0,"stats":{"Line":2}},{"line":682,"address":[],"length":0,"stats":{"Line":3}},{"line":685,"address":[],"length":0,"stats":{"Line":3}},{"line":688,"address":[],"length":0,"stats":{"Line":2}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":1}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":0}},{"line":695,"address":[],"length":0,"stats":{"Line":2}},{"line":696,"address":[],"length":0,"stats":{"Line":3}},{"line":697,"address":[],"length":0,"stats":{"Line":2}},{"line":698,"address":[],"length":0,"stats":{"Line":2}},{"line":700,"address":[],"length":0,"stats":{"Line":2}},{"line":701,"address":[],"length":0,"stats":{"Line":1}},{"line":702,"address":[],"length":0,"stats":{"Line":1}},{"line":706,"address":[],"length":0,"stats":{"Line":0}},{"line":707,"address":[],"length":0,"stats":{"Line":0}},{"line":708,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":714,"address":[],"length":0,"stats":{"Line":0}},{"line":715,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":728,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":730,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":737,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":751,"address":[],"length":0,"stats":{"Line":1}},{"line":752,"address":[],"length":0,"stats":{"Line":4}},{"line":754,"address":[],"length":0,"stats":{"Line":2}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":1}},{"line":757,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":761,"address":[],"length":0,"stats":{"Line":2}},{"line":762,"address":[],"length":0,"stats":{"Line":3}},{"line":763,"address":[],"length":0,"stats":{"Line":2}},{"line":764,"address":[],"length":0,"stats":{"Line":2}},{"line":766,"address":[],"length":0,"stats":{"Line":2}},{"line":767,"address":[],"length":0,"stats":{"Line":1}},{"line":768,"address":[],"length":0,"stats":{"Line":1}},{"line":772,"address":[],"length":0,"stats":{"Line":1}},{"line":773,"address":[],"length":0,"stats":{"Line":2}},{"line":774,"address":[],"length":0,"stats":{"Line":2}},{"line":777,"address":[],"length":0,"stats":{"Line":2}},{"line":778,"address":[],"length":0,"stats":{"Line":3}},{"line":779,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":784,"address":[],"length":0,"stats":{"Line":2}},{"line":785,"address":[],"length":0,"stats":{"Line":4}},{"line":786,"address":[],"length":0,"stats":{"Line":2}},{"line":787,"address":[],"length":0,"stats":{"Line":3}},{"line":791,"address":[],"length":0,"stats":{"Line":2}},{"line":792,"address":[],"length":0,"stats":{"Line":3}},{"line":793,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":2}},{"line":801,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":1}},{"line":807,"address":[],"length":0,"stats":{"Line":0}},{"line":808,"address":[],"length":0,"stats":{"Line":0}},{"line":809,"address":[],"length":0,"stats":{"Line":0}},{"line":811,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":813,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":819,"address":[],"length":0,"stats":{"Line":0}},{"line":821,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":831,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":841,"address":[],"length":0,"stats":{"Line":0}},{"line":844,"address":[],"length":0,"stats":{"Line":0}},{"line":845,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":847,"address":[],"length":0,"stats":{"Line":0}},{"line":848,"address":[],"length":0,"stats":{"Line":0}},{"line":849,"address":[],"length":0,"stats":{"Line":0}},{"line":853,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":859,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":862,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":867,"address":[],"length":0,"stats":{"Line":0}},{"line":868,"address":[],"length":0,"stats":{"Line":0}},{"line":869,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":875,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":883,"address":[],"length":0,"stats":{"Line":0}},{"line":884,"address":[],"length":0,"stats":{"Line":0}},{"line":887,"address":[],"length":0,"stats":{"Line":0}},{"line":890,"address":[],"length":0,"stats":{"Line":0}},{"line":893,"address":[],"length":0,"stats":{"Line":0}},{"line":897,"address":[],"length":0,"stats":{"Line":0}},{"line":900,"address":[],"length":0,"stats":{"Line":6}},{"line":901,"address":[],"length":0,"stats":{"Line":12}},{"line":905,"address":[],"length":0,"stats":{"Line":0}},{"line":906,"address":[],"length":0,"stats":{"Line":0}},{"line":908,"address":[],"length":0,"stats":{"Line":0}},{"line":911,"address":[],"length":0,"stats":{"Line":0}},{"line":912,"address":[],"length":0,"stats":{"Line":0}},{"line":914,"address":[],"length":0,"stats":{"Line":0}},{"line":915,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":928,"address":[],"length":0,"stats":{"Line":0}},{"line":931,"address":[],"length":0,"stats":{"Line":0}},{"line":935,"address":[],"length":0,"stats":{"Line":0}},{"line":936,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":939,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":949,"address":[],"length":0,"stats":{"Line":0}},{"line":950,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":0}},{"line":957,"address":[],"length":0,"stats":{"Line":0}},{"line":958,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":964,"address":[],"length":0,"stats":{"Line":0}},{"line":965,"address":[],"length":0,"stats":{"Line":0}},{"line":966,"address":[],"length":0,"stats":{"Line":0}},{"line":969,"address":[],"length":0,"stats":{"Line":0}},{"line":970,"address":[],"length":0,"stats":{"Line":0}},{"line":971,"address":[],"length":0,"stats":{"Line":0}},{"line":972,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":976,"address":[],"length":0,"stats":{"Line":0}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":978,"address":[],"length":0,"stats":{"Line":0}},{"line":979,"address":[],"length":0,"stats":{"Line":0}},{"line":980,"address":[],"length":0,"stats":{"Line":0}},{"line":981,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":2}},{"line":988,"address":[],"length":0,"stats":{"Line":4}},{"line":990,"address":[],"length":0,"stats":{"Line":1}},{"line":992,"address":[],"length":0,"stats":{"Line":1}},{"line":995,"address":[],"length":0,"stats":{"Line":0}},{"line":1001,"address":[],"length":0,"stats":{"Line":0}},{"line":1002,"address":[],"length":0,"stats":{"Line":0}}],"covered":152,"coverable":478},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","dashboard.rs"],"content":"use crate::tui::themes::Theme;\nuse crate::tui::AppState;\nuse ratatui::{\n    layout::{Constraint, Direction, Layout, Rect},\n    style::{Modifier, Style},\n    text::{Line, Span},\n    widgets::{BarChart, Block, Borders, Clear, List, ListItem, ListState, Paragraph, Wrap},\n    Frame,\n};\n\npub fn render_dashboard(f: \u0026mut Frame, app: \u0026mut AppState) {\n    let theme = app.themes[app.current_theme_index].clone();\n    let size = f.size();\n\n    // Set the background color for the entire frame\n    f.render_widget(\n        Block::default().style(Style::default().bg(theme.background)),\n        size,\n    );\n\n    match app.mode {\n        crate::tui::AppMode::Dashboard =\u003e render_main_dashboard(f, app, \u0026theme, size),\n        crate::tui::AppMode::ProcessView =\u003e render_process_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::PortView =\u003e render_port_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::ConnectionView =\u003e render_connection_view(f, app, \u0026theme, size),\n        crate::tui::AppMode::ThemeSelector =\u003e render_theme_selector(f, app, \u0026theme, size),\n    }\n\n    // Always render status bar\n    render_status_bar(f, app, \u0026theme, size);\n\n    // Render overlays\n    if app.show_help {\n        render_help_dialog(f, \u0026theme, size);\n    } else if app.confirmation_dialog.is_some() {\n        render_confirmation_dialog(f, app, \u0026theme, size);\n    } else if app.search_active \u0026\u0026 app.show_search_help {\n        render_search_help_dialog(f, app, \u0026theme, size);\n    }\n}\n\nfn render_main_dashboard(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Main content\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    // Header\n    let header = Paragraph::new(vec![\n        Line::from(vec![\n            Span::styled(\n                \"BossyRust \",\n                Style::default()\n                    .fg(theme.primary)\n                    .add_modifier(Modifier::BOLD),\n            ),\n            Span::raw(\"- Mac Process Manager\").style(Style::default().fg(theme.foreground)),\n        ]),\n        Line::from(\"F1: Processes | F2: Ports | F3: Connections | F4: Dashboard | t: Themes | ?: Help | h: Back | q: Quit\")\n            .style(Style::default().fg(theme.text_secondary)),\n    ])\n    .block(Block::default().borders(Borders::ALL).border_style(Style::default().fg(theme.border)));\n    f.render_widget(header, chunks[0]);\n\n    // Main content area\n    let main_chunks = Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([Constraint::Percentage(50), Constraint::Percentage(50)])\n        .split(chunks[1]);\n\n    let left_chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([Constraint::Percentage(70), Constraint::Percentage(30)])\n        .split(main_chunks[0]);\n\n    // Left panel - Top processes\n    let top_processes: Vec\u003cListItem\u003e = app\n        .processes\n        .iter()\n        .take(10)\n        .enumerate()\n        .map(|(i, p)| {\n            ListItem::new(Line::from(vec![\n                Span::raw(format!(\"{:2}. \", i + 1))\n                    .style(Style::default().fg(theme.text_secondary)),\n                Span::styled(\n                    format!(\"{:15}\", truncate_string(\u0026p.name, 15)),\n                    Style::default().fg(theme.foreground),\n                ),\n                Span::raw(format!(\" {:\u003e6.1}%\", p.cpu_usage))\n                    .style(Style::default().fg(theme.accent)),\n                Span::raw(format!(\" {:\u003e8}\", p.format_memory()))\n                    .style(Style::default().fg(theme.secondary)),\n            ]))\n        })\n        .collect();\n\n    let processes_list = List::new(top_processes)\n        .block(\n            Block::default()\n                .title(\"Top Processes (CPU)\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_widget(processes_list, left_chunks[0]);\n\n    // --- Enhanced CPU Usage Chart ---\n    let current_cpu_usage = app.cpu_history.last().cloned().unwrap_or(0);\n    let max_cpu_in_history = app.cpu_history.iter().max().cloned().unwrap_or(0).max(25);\n\n    // Use a more reasonable scale that shows actual data well\n    let y_max = if max_cpu_in_history \u003c= 25 {\n        25\n    } else if max_cpu_in_history \u003c= 50 {\n        50\n    } else if max_cpu_in_history \u003c= 75 {\n        75\n    } else {\n        100\n    };\n\n    let chart_title = format!(\"âš¡ CPU Usage ({current_cpu_usage}%)\");\n\n    let chart_container = Block::default()\n        .title(chart_title)\n        .borders(Borders::ALL)\n        .border_style(Style::default().fg(theme.accent));\n\n    let chart_area = chart_container.inner(left_chunks[1]);\n    f.render_widget(chart_container, left_chunks[1]);\n\n    // Create a simple layout for the chart content\n    let inner_layout = Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([\n            Constraint::Length(4), // Y-axis labels\n            Constraint::Min(0),    // Chart bars\n        ])\n        .split(chart_area);\n\n    // Y-axis labels with regular intervals (5 labels total)\n    let step = y_max / 4; // 4 equal steps for 5 labels\n    let y_labels = [\n        format!(\"{y_max:\u003e3}%\"),\n        format!(\"{:\u003e3}%\", y_max - step),\n        format!(\"{:\u003e3}%\", y_max - step * 2),\n        format!(\"{:\u003e3}%\", y_max - step * 3),\n        \"  0%\".to_string(),\n    ];\n\n    let y_axis_text = y_labels.join(\"\\n\\n\\n\"); // More spacing for better alignment\n    let y_axis_labels =\n        Paragraph::new(y_axis_text).style(Style::default().fg(theme.text_secondary));\n    f.render_widget(y_axis_labels, inner_layout[0]);\n\n    // Chart area with proper scaling - ensure bars are visible\n    let chart_data: Vec\u003c(\u0026str, u64)\u003e = app\n        .cpu_history\n        .iter()\n        .enumerate()\n        .map(|(i, \u0026value)| {\n            // Use index as label to help with spacing, ensure minimum height for visibility\n            let visible_value = if value == 0 \u0026\u0026 current_cpu_usage \u003e 0 {\n                1\n            } else {\n                value.min(y_max)\n            };\n            (if i.is_multiple_of(10) { \"â”‚\" } else { \" \" }, visible_value)\n        })\n        .collect();\n\n    let barchart = BarChart::default()\n        .data(\u0026chart_data)\n        .bar_width(2) // Wider bars for better visibility\n        .bar_gap(0)\n        .bar_style(\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )\n        .value_style(Style::default().fg(theme.background)) // Hide values for cleaner look\n        .max(y_max);\n\n    f.render_widget(barchart, inner_layout[1]);\n\n    // Right panel - Port summary\n    let listening_ports = app\n        .ports\n        .iter()\n        .filter(|p| matches!(p.state, crate::network::ConnectionState::Listen))\n        .count();\n    let dev_ports = app.ports.iter().filter(|p| p.is_development_port()).count();\n\n    let port_items: Vec\u003cListItem\u003e = vec![\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Total Ports: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(app.ports.len().to_string()).style(Style::default().fg(theme.foreground)),\n        ])),\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Listening: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(listening_ports.to_string()).style(Style::default().fg(theme.secondary)),\n        ])),\n        ListItem::new(Line::from(vec![\n            Span::raw(\"Development: \").style(Style::default().fg(theme.text_secondary)),\n            Span::raw(dev_ports.to_string()).style(Style::default().fg(theme.primary)),\n        ])),\n    ];\n\n    let port_list = List::new(port_items).block(\n        Block::default()\n            .title(\"Port Summary\")\n            .borders(Borders::ALL)\n            .border_style(Style::default().fg(theme.border)),\n    );\n\n    f.render_widget(port_list, main_chunks[1]);\n}\n\nfn render_process_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let header_height = if app.column_headers_visible { 5 } else { 3 };\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(header_height), // Header with optional column headers\n            Constraint::Min(0),               // Process list\n            Constraint::Length(3),            // Status\n        ])\n        .split(area);\n\n    // Header\n    let sort_indicator = match app.sort_order {\n        crate::tui::SortOrder::Ascending =\u003e \"â†‘\",\n        crate::tui::SortOrder::Descending =\u003e \"â†“\",\n    };\n\n    let view_mode_indicator = if app.detailed_view_mode { \"ğŸ“‹\" } else { \"ğŸ“„\" };\n    let header_text = if app.search_active {\n        format!(\n            \"Processes ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_processes.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"{} Processes ({}) - Sorted by {:?} {} | / search | d detailed | c headers | h back\",\n            view_mode_indicator,\n            app.filtered_processes.len(),\n            app.sort_by,\n            sort_indicator\n        )\n    };\n\n    let mut header_lines = vec![Line::from(header_text)];\n    \n    // Add column headers if enabled\n    if app.column_headers_visible \u0026\u0026 !app.search_active {\n        header_lines.push(Line::from(\"\"));\n        header_lines.push(Line::from(vec![\n            Span::styled(\"Priority \", Style::default().fg(theme.accent).add_modifier(Modifier::BOLD)),\n            Span::styled(\"PID      \", Style::default().fg(theme.text_secondary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Name                 \", Style::default().fg(theme.primary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"CPU%   \", Style::default().fg(theme.accent).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Memory     \", Style::default().fg(theme.secondary).add_modifier(Modifier::BOLD)),\n            Span::styled(\"Status\", Style::default().fg(theme.text_secondary).add_modifier(Modifier::BOLD)),\n        ]));\n    }\n\n    let header = Paragraph::new(header_lines)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Process Manager\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    // Process list with enhanced visual hierarchy\n    let items: Vec\u003cListItem\u003e = app\n        .filtered_processes\n        .iter()\n        .enumerate()\n        .map(|(i, p)| {\n            let is_selected = app.selected_items.contains(\u0026i);\n            let base_style = if is_selected {\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD)\n            } else {\n                Style::default().fg(theme.foreground)\n            };\n\n            let priority_indicator = app.get_priority_indicator(p);\n            \n            if app.detailed_view_mode {\n                // Detailed view with more information\n                let user_info = p.user_id.map(|u| format!(\"U:{}\", u)).unwrap_or_else(|| \"-\".to_string());\n                let parent_info = p.parent_pid.map(|p| format!(\"P:{}\", p)).unwrap_or_else(|| \"-\".to_string());\n                \n                ListItem::new(vec![\n                    Line::from(vec![\n                        Span::raw(priority_indicator).style(base_style),\n                        Span::styled(format!(\"{:\u003e7} \", p.pid), base_style),\n                        Span::styled(\n                            format!(\"{:25} \", truncate_string(\u0026p.name, 25)),\n                            base_style.fg(theme.primary),\n                        ),\n                        Span::styled(format!(\"{:\u003e6.1}% \", p.cpu_usage), base_style.fg(theme.accent)),\n                        Span::styled(\n                            format!(\"{:\u003e10} \", p.format_memory()),\n                            base_style.fg(theme.secondary),\n                        ),\n                    ]),\n                    Line::from(vec![\n                        Span::raw(\"  \"),\n                        Span::styled(format!(\"  {} | {} | {}\", user_info, parent_info, p.status), \n                                   Style::default().fg(theme.text_secondary)),\n                    ]),\n                ])\n            } else {\n                // Compact view\n                ListItem::new(Line::from(vec![\n                    Span::raw(priority_indicator).style(base_style),\n                    Span::styled(format!(\"{:\u003e7} \", p.pid), base_style),\n                    Span::styled(\n                        format!(\"{:20} \", truncate_string(\u0026p.name, 20)),\n                        base_style.fg(theme.primary),\n                    ),\n                    Span::styled(format!(\"{:\u003e6.1}% \", p.cpu_usage), base_style.fg(theme.accent)),\n                    Span::styled(\n                        format!(\"{:\u003e10} \", p.format_memory()),\n                        base_style.fg(theme.secondary),\n                    ),\n                    Span::styled(\n                        truncate_string(\u0026p.status, 10),\n                        base_style.fg(theme.text_secondary),\n                    ),\n                ]))\n            }\n        })\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_port_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Port list\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    // Header\n    let header_text = if app.search_active {\n        format!(\n            \"Ports ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_ports.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"Ports ({}) | / to search | k to kill | :port for quick search\",\n            app.filtered_ports.len()\n        )\n    };\n\n    let header = Paragraph::new(header_text)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Port Manager\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    // Port list\n    let items: Vec\u003cListItem\u003e = app\n        .filtered_ports\n        .iter()\n        .map(|p| {\n            let protocol_color = match p.protocol {\n                crate::network::Protocol::Tcp =\u003e theme.primary,\n                crate::network::Protocol::Udp =\u003e theme.secondary,\n            };\n\n            let state_color = match p.state {\n                crate::network::ConnectionState::Listen =\u003e theme.secondary,\n                crate::network::ConnectionState::Established =\u003e theme.primary,\n                _ =\u003e theme.text_secondary,\n            };\n\n            let service_info = p\n                .get_service_suggestion()\n                .unwrap_or_else(|| format!(\"{:?}\", p.state));\n\n            ListItem::new(Line::from(vec![\n                Span::styled(\n                    format!(\"{:\u003e6} \", p.port),\n                    Style::default().fg(theme.foreground),\n                ),\n                Span::styled(\n                    format!(\"{:4} \", format!(\"{:?}\", p.protocol)),\n                    Style::default().fg(protocol_color),\n                ),\n                Span::styled(\n                    format!(\"{:12} \", format!(\"{:?}\", p.state)),\n                    Style::default().fg(state_color),\n                ),\n                Span::styled(\n                    format!(\n                        \"{:\u003e8} \",\n                        p.pid.map_or(\"-\".to_string(), |pid| pid.to_string())\n                    ),\n                    Style::default().fg(theme.accent),\n                ),\n                Span::styled(\n                    format!(\"{:20} \", p.process_name.as_deref().unwrap_or(\"-\")),\n                    Style::default().fg(theme.primary),\n                ),\n                Span::styled(\n                    truncate_string(\u0026service_info, 20),\n                    Style::default().fg(theme.text_secondary),\n                ),\n            ]))\n        })\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_connection_view(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Connection list\n            Constraint::Length(3), // Status\n        ])\n        .split(area);\n\n    let header_text = if app.search_active {\n        format!(\n            \"Active Connections ({}) | Search: {} | Enter to confirm, Esc to cancel\",\n            app.filtered_connections.len(),\n            app.search_query\n        )\n    } else {\n        format!(\n            \"Active Connections ({}) | / to search\",\n            app.filtered_connections.len()\n        )\n    };\n\n    let header = Paragraph::new(header_text)\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Network Connections\")\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    if app.filtered_connections.is_empty() {\n        // Show message when no connections are available\n        let message = Paragraph::new(\"No active connections found.\\n\\nThis could mean:\\nâ€¢ No established network connections\\nâ€¢ System permissions may be required\\nâ€¢ Try running with elevated privileges\")\n            .block(Block::default().borders(Borders::ALL).border_style(Style::default().fg(theme.border)))\n            .style(Style::default().fg(theme.text_secondary))\n            .wrap(Wrap { trim: true });\n        f.render_widget(message, chunks[1]);\n    } else {\n        let items: Vec\u003cListItem\u003e = app\n            .filtered_connections\n            .iter()\n            .map(|c| {\n                let protocol_color = match c.protocol {\n                    crate::network::Protocol::Tcp =\u003e theme.primary,\n                    crate::network::Protocol::Udp =\u003e theme.secondary,\n                };\n\n                ListItem::new(Line::from(vec![\n                    Span::styled(\n                        format!(\"{:4} \", format!(\"{:?}\", c.protocol)),\n                        Style::default().fg(protocol_color),\n                    ),\n                    Span::styled(\n                        format!(\"{:21} \", c.local_address),\n                        Style::default().fg(theme.primary),\n                    ),\n                    Span::raw(\"-\u003e \").style(Style::default().fg(theme.text_secondary)),\n                    Span::styled(\n                        format!(\"{:21} \", c.remote_address),\n                        Style::default().fg(theme.secondary),\n                    ),\n                    Span::styled(\n                        format!(\n                            \"{:\u003e8} \",\n                            c.pid.map_or(\"-\".to_string(), |pid| pid.to_string())\n                        ),\n                        Style::default().fg(theme.accent),\n                    ),\n                    Span::styled(\n                        c.process_name.as_deref().unwrap_or(\"-\"),\n                        Style::default().fg(theme.foreground),\n                    ),\n                ]))\n            })\n            .collect();\n\n        let mut list_state = ListState::default();\n        list_state.select(Some(app.selected_index));\n\n        let list = List::new(items)\n            .block(\n                Block::default()\n                    .borders(Borders::ALL)\n                    .border_style(Style::default().fg(theme.border)),\n            )\n            .highlight_style(\n                Style::default()\n                    .bg(theme.highlight)\n                    .add_modifier(Modifier::BOLD),\n            )\n            .highlight_symbol(\"\u003e \");\n\n        f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n    }\n}\n\nfn render_theme_selector(f: \u0026mut Frame, app: \u0026mut AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length(3), // Header\n            Constraint::Min(0),    // Theme list\n        ])\n        .split(area);\n\n    let header = Paragraph::new(\"Select a Theme (Enter to confirm, Esc to cancel)\")\n        .style(Style::default().fg(theme.text_secondary))\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        );\n    f.render_widget(header, chunks[0]);\n\n    let items: Vec\u003cListItem\u003e = app\n        .themes\n        .iter()\n        .map(|t| ListItem::new(t.name.clone()).style(Style::default().fg(theme.foreground)))\n        .collect();\n\n    let mut list_state = ListState::default();\n    list_state.select(Some(app.selected_index));\n\n    let list = List::new(items)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .highlight_style(\n            Style::default()\n                .bg(theme.highlight)\n                .add_modifier(Modifier::BOLD),\n        )\n        .highlight_symbol(\"\u003e \");\n\n    f.render_stateful_widget(list, chunks[1], \u0026mut list_state);\n}\n\nfn render_status_bar(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([Constraint::Min(0), Constraint::Length(1)])\n        .split(area);\n\n    // Enhanced status bar with more system information\n    let status_text = if let Some(message) = app.get_status_message() {\n        message.to_string()\n    } else {\n        let item_count = match app.mode {\n            crate::tui::AppMode::ProcessView =\u003e app.filtered_processes.len(),\n            crate::tui::AppMode::PortView =\u003e app.filtered_ports.len(),\n            crate::tui::AppMode::ConnectionView =\u003e app.filtered_connections.len(),\n            crate::tui::AppMode::ThemeSelector =\u003e app.themes.len(),\n            _ =\u003e 0,\n        };\n\n        let mode_icon = match app.mode {\n            crate::tui::AppMode::Dashboard =\u003e \"ğŸ \",\n            crate::tui::AppMode::ProcessView =\u003e \"âš¡\",\n            crate::tui::AppMode::PortView =\u003e \"ğŸ”Œ\",\n            crate::tui::AppMode::ConnectionView =\u003e \"ğŸŒ\",\n            crate::tui::AppMode::ThemeSelector =\u003e \"ğŸ¨\",\n        };\n\n        let search_indicator = if app.search_active {\n            \" | ğŸ” Searching\"\n        } else if !app.search_query.is_empty() {\n            \" | ğŸ” Filtered\"\n        } else {\n            \"\"\n        };\n\n        let selection_indicator = if app.multi_select_mode {\n            format!(\" | âœ… {} selected\", app.selected_items.len())\n        } else {\n            String::new()\n        };\n\n        let refresh_indicator = if app.auto_refresh {\n            \"ğŸ”„ Auto\"\n        } else {\n            \"â¸ï¸ Manual\"\n        };\n\n        format!(\n            \"{} {:?} | {} items{}{} | {} | F1-F4: Views | ?: Help\",\n            mode_icon,\n            app.mode,\n            item_count,\n            search_indicator,\n            selection_indicator,\n            refresh_indicator\n        )\n    };\n\n    let status =\n        Paragraph::new(status_text).style(Style::default().fg(theme.foreground).bg(theme.primary));\n\n    f.render_widget(status, chunks[1]);\n}\n\nfn render_confirmation_dialog(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    if let Some(ref dialog) = app.confirmation_dialog {\n        let popup_area = centered_rect(70, 50, area);\n\n        f.render_widget(Clear, popup_area);\n\n        let mut dialog_lines = vec![\n            Line::from(dialog.message.clone()),\n            Line::from(\"\"),\n        ];\n\n        // Add additional safety information\n        if !dialog.additional_info.is_empty() {\n            dialog_lines.push(Line::from(vec![Span::styled(\n                \"Safety Information:\",\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD),\n            )]));\n            \n            for info in \u0026dialog.additional_info {\n                dialog_lines.push(Line::from(format!(\"â€¢ {}\", info)));\n            }\n            dialog_lines.push(Line::from(\"\"));\n        }\n\n        dialog_lines.push(Line::from(\"y/Y/Enter - Confirm    n/N/Esc - Cancel\"));\n\n        // Choose border color based on warning level\n        let border_color = match dialog.warning_level {\n            crate::tui::app::WarningLevel::Low =\u003e theme.secondary,\n            crate::tui::app::WarningLevel::Medium =\u003e theme.primary,\n            crate::tui::app::WarningLevel::High =\u003e theme.accent,\n            crate::tui::app::WarningLevel::Critical =\u003e ratatui::style::Color::Red,\n        };\n\n        let dialog_widget = Paragraph::new(dialog_lines)\n            .block(\n                Block::default()\n                    .title(dialog.title.as_str())\n                    .borders(Borders::ALL)\n                    .border_style(Style::default().fg(border_color)),\n            )\n            .style(Style::default().fg(theme.foreground))\n            .wrap(Wrap { trim: true });\n\n        f.render_widget(dialog_widget, popup_area);\n    }\n}\n\nfn render_help_dialog(f: \u0026mut Frame, theme: \u0026Theme, area: Rect) {\n    let popup_area = centered_rect(70, 60, area);\n\n    f.render_widget(Clear, popup_area);\n\n    let help_text = vec![\n        Line::from(vec![Span::styled(\n            \"BossyRust - Process Manager Help\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Navigation:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  d: Dashboard | t: Themes | F1-F3: Views | F4: Help\"),\n        Line::from(\"  â†‘/â†“ or j/k - Navigate    Space - Multi-select\"),\n        Line::from(\"  Page Up/Down - Fast scroll    Home/End - Go to top/bottom\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Actions:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  Enter/k/Delete - Kill selected process/port\"),\n        Line::from(\"  / - Search mode    s - Cycle sort options\"),\n        Line::from(\"  r/Ctrl+R - Refresh data    Ctrl+C - Force quit\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Search Patterns:\",\n            Style::default()\n                .fg(theme.secondary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  :3000 - Find processes using port 3000\"),\n        Line::from(\"  #1234 - Search by Process ID\"),\n        Line::from(\"  \u003e50% - Processes using more than 50% CPU\"),\n        Line::from(\"  \u003e1GB - Processes using more than 1GB memory\"),\n        Line::from(\"  node - Search by process name\"),\n        Line::from(\"\"),\n        Line::from(vec![Span::styled(\n            \"Tips:\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"  â€¢ Multi-select with Space, then Delete to kill multiple\"),\n        Line::from(\"  â€¢ Use Ctrl+R to refresh if data seems stale\"),\n        Line::from(\"  â€¢ Connection view requires active network connections\"),\n        Line::from(\"\"),\n        Line::from(\"Press F4, ?, or Esc to close this help\"),\n    ];\n\n    let help_widget = Paragraph::new(help_text)\n        .block(\n            Block::default()\n                .title(\"Help\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .style(Style::default().fg(theme.foreground))\n        .wrap(Wrap { trim: true });\n\n    f.render_widget(help_widget, popup_area);\n}\n\nfn render_search_help_dialog(f: \u0026mut Frame, app: \u0026AppState, theme: \u0026Theme, area: Rect) {\n    let popup_area = centered_rect(60, 40, area);\n\n    f.render_widget(Clear, popup_area);\n\n    let help_patterns = app.get_search_pattern_help();\n    let mut help_lines = vec![\n        Line::from(vec![Span::styled(\n            \"Search Patterns Help\",\n            Style::default()\n                .fg(theme.primary)\n                .add_modifier(Modifier::BOLD),\n        )]),\n        Line::from(\"\"),\n        Line::from(\"Available search patterns:\"),\n        Line::from(\"\"),\n    ];\n\n    for (pattern, description) in help_patterns {\n        help_lines.push(Line::from(vec![\n            Span::styled(\n                format!(\"{:12} \", pattern),\n                Style::default()\n                    .fg(theme.accent)\n                    .add_modifier(Modifier::BOLD),\n            ),\n            Span::styled(description, Style::default().fg(theme.foreground)),\n        ]));\n    }\n\n    help_lines.push(Line::from(\"\"));\n    help_lines.push(Line::from(\"Tab: Autocomplete | F1: Toggle help | Enter: Apply | Esc: Cancel\"));\n\n    let help_widget = Paragraph::new(help_lines)\n        .block(\n            Block::default()\n                .title(\"Search Help\")\n                .borders(Borders::ALL)\n                .border_style(Style::default().fg(theme.border)),\n        )\n        .style(Style::default().fg(theme.foreground))\n        .wrap(Wrap { trim: true });\n\n    f.render_widget(help_widget, popup_area);\n}\n\nfn centered_rect(percent_x: u16, percent_y: u16, r: Rect) -\u003e Rect {\n    let popup_layout = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Percentage((100 - percent_y) / 2),\n            Constraint::Percentage(percent_y),\n            Constraint::Percentage((100 - percent_y) / 2),\n        ])\n        .split(r);\n\n    Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([\n            Constraint::Percentage((100 - percent_x) / 2),\n            Constraint::Percentage(percent_x),\n            Constraint::Percentage((100 - percent_x) / 2),\n        ])\n        .split(popup_layout[1])[1]\n}\n\nfn truncate_string(s: \u0026str, max_len: usize) -\u003e String {\n    if s.len() \u003c= max_len {\n        s.to_string()\n    } else {\n        format!(\"{}â€¦\", \u0026s[..max_len.saturating_sub(1)])\n    }\n}\n","traces":[{"line":11,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":13,"address":[],"length":0,"stats":{"Line":0}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":275,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":295,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":311,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":345,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":376,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":393,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":400,"address":[],"length":0,"stats":{"Line":0}},{"line":401,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":405,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":413,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":417,"address":[],"length":0,"stats":{"Line":0}},{"line":418,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":430,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":433,"address":[],"length":0,"stats":{"Line":0}},{"line":434,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":437,"address":[],"length":0,"stats":{"Line":0}},{"line":438,"address":[],"length":0,"stats":{"Line":0}},{"line":440,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":452,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":462,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":488,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":497,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":502,"address":[],"length":0,"stats":{"Line":0}},{"line":504,"address":[],"length":0,"stats":{"Line":0}},{"line":505,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":509,"address":[],"length":0,"stats":{"Line":0}},{"line":511,"address":[],"length":0,"stats":{"Line":0}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":522,"address":[],"length":0,"stats":{"Line":0}},{"line":523,"address":[],"length":0,"stats":{"Line":0}},{"line":524,"address":[],"length":0,"stats":{"Line":0}},{"line":525,"address":[],"length":0,"stats":{"Line":0}},{"line":528,"address":[],"length":0,"stats":{"Line":0}},{"line":529,"address":[],"length":0,"stats":{"Line":0}},{"line":530,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":534,"address":[],"length":0,"stats":{"Line":0}},{"line":535,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":539,"address":[],"length":0,"stats":{"Line":0}},{"line":540,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":543,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":557,"address":[],"length":0,"stats":{"Line":0}},{"line":558,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":562,"address":[],"length":0,"stats":{"Line":0}},{"line":563,"address":[],"length":0,"stats":{"Line":0}},{"line":564,"address":[],"length":0,"stats":{"Line":0}},{"line":567,"address":[],"length":0,"stats":{"Line":0}},{"line":568,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":579,"address":[],"length":0,"stats":{"Line":0}},{"line":580,"address":[],"length":0,"stats":{"Line":0}},{"line":581,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":586,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":589,"address":[],"length":0,"stats":{"Line":0}},{"line":590,"address":[],"length":0,"stats":{"Line":0}},{"line":591,"address":[],"length":0,"stats":{"Line":0}},{"line":593,"address":[],"length":0,"stats":{"Line":0}},{"line":595,"address":[],"length":0,"stats":{"Line":0}},{"line":596,"address":[],"length":0,"stats":{"Line":0}},{"line":598,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":602,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":607,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":611,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":617,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":631,"address":[],"length":0,"stats":{"Line":0}},{"line":632,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":0}},{"line":634,"address":[],"length":0,"stats":{"Line":0}},{"line":635,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":640,"address":[],"length":0,"stats":{"Line":0}},{"line":641,"address":[],"length":0,"stats":{"Line":0}},{"line":642,"address":[],"length":0,"stats":{"Line":0}},{"line":643,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":649,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":0}},{"line":654,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":677,"address":[],"length":0,"stats":{"Line":0}},{"line":678,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":684,"address":[],"length":0,"stats":{"Line":0}},{"line":685,"address":[],"length":0,"stats":{"Line":0}},{"line":687,"address":[],"length":0,"stats":{"Line":0}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":695,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":0}},{"line":698,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":700,"address":[],"length":0,"stats":{"Line":0}},{"line":703,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":706,"address":[],"length":0,"stats":{"Line":0}},{"line":709,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":714,"address":[],"length":0,"stats":{"Line":0}},{"line":715,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":723,"address":[],"length":0,"stats":{"Line":0}},{"line":724,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":734,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":742,"address":[],"length":0,"stats":{"Line":0}},{"line":743,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":750,"address":[],"length":0,"stats":{"Line":0}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":753,"address":[],"length":0,"stats":{"Line":0}},{"line":754,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":760,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":764,"address":[],"length":0,"stats":{"Line":0}},{"line":765,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":768,"address":[],"length":0,"stats":{"Line":0}},{"line":769,"address":[],"length":0,"stats":{"Line":0}},{"line":770,"address":[],"length":0,"stats":{"Line":0}},{"line":772,"address":[],"length":0,"stats":{"Line":0}},{"line":773,"address":[],"length":0,"stats":{"Line":0}},{"line":774,"address":[],"length":0,"stats":{"Line":0}},{"line":775,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":777,"address":[],"length":0,"stats":{"Line":0}},{"line":778,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":781,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":784,"address":[],"length":0,"stats":{"Line":0}},{"line":785,"address":[],"length":0,"stats":{"Line":0}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}},{"line":788,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":793,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":798,"address":[],"length":0,"stats":{"Line":0}},{"line":799,"address":[],"length":0,"stats":{"Line":0}},{"line":801,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":805,"address":[],"length":0,"stats":{"Line":0}},{"line":807,"address":[],"length":0,"stats":{"Line":0}},{"line":809,"address":[],"length":0,"stats":{"Line":0}},{"line":810,"address":[],"length":0,"stats":{"Line":0}},{"line":811,"address":[],"length":0,"stats":{"Line":0}},{"line":813,"address":[],"length":0,"stats":{"Line":0}},{"line":814,"address":[],"length":0,"stats":{"Line":0}},{"line":815,"address":[],"length":0,"stats":{"Line":0}},{"line":817,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":819,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":823,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":827,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":835,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":841,"address":[],"length":0,"stats":{"Line":0}},{"line":842,"address":[],"length":0,"stats":{"Line":0}},{"line":844,"address":[],"length":0,"stats":{"Line":0}},{"line":845,"address":[],"length":0,"stats":{"Line":0}},{"line":847,"address":[],"length":0,"stats":{"Line":0}},{"line":850,"address":[],"length":0,"stats":{"Line":0}},{"line":851,"address":[],"length":0,"stats":{"Line":0}},{"line":852,"address":[],"length":0,"stats":{"Line":0}},{"line":853,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":861,"address":[],"length":0,"stats":{"Line":0}},{"line":862,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":864,"address":[],"length":0,"stats":{"Line":0}},{"line":865,"address":[],"length":0,"stats":{"Line":0}},{"line":867,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":872,"address":[],"length":0,"stats":{"Line":0}},{"line":874,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":537},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","events.rs"],"content":"use anyhow::Result;\nuse crossterm::event::{self, Event, KeyEvent};\nuse std::time::Duration;\n\npub enum AppEvent {\n    Key(KeyEvent),\n    Resize(u16, u16),\n    Refresh,\n}\n\npub struct EventHandler {\n    tick_rate: Duration,\n}\n\nimpl EventHandler {\n    pub fn new(tick_rate: Duration) -\u003e Self {\n        Self { tick_rate }\n    }\n\n    pub async fn next(\u0026self) -\u003e Result\u003cAppEvent\u003e {\n        let timeout = self.tick_rate;\n\n        if event::poll(timeout)? {\n            match event::read()? {\n                Event::Key(key_event) =\u003e Ok(AppEvent::Key(key_event)),\n                Event::Resize(width, height) =\u003e Ok(AppEvent::Resize(width, height)),\n                _ =\u003e Ok(AppEvent::Refresh),\n            }\n        } else {\n            Ok(AppEvent::Refresh)\n        }\n    }\n}\n\nimpl Default for EventHandler {\n    fn default() -\u003e Self {\n        Self::new(Duration::from_millis(250))\n    }\n}\n","traces":[{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","mod.rs"],"content":"pub mod app;\npub mod dashboard;\npub mod events;\npub mod themes;\n\npub use app::*;\n// pub use dashboard::*;  // Dashboard exports not needed globally\npub use events::*;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","src","tui","themes.rs"],"content":"use ratatui::style::Color;\n\n#[derive(Debug, Clone)]\npub struct Theme {\n    pub name: String,\n    pub background: Color,\n    pub foreground: Color,\n    pub primary: Color,\n    pub secondary: Color,\n    pub accent: Color,\n    pub highlight: Color,\n    pub border: Color,\n    pub text_secondary: Color,\n}\n\npub struct ThemeManager;\n\nimpl ThemeManager {\n    pub fn get_themes() -\u003e Vec\u003cTheme\u003e {\n        vec![\n            // Kanagawa\n            Theme {\n                name: \"Kanagawa\".to_string(),\n                background: Color::Rgb(31, 31, 46),\n                foreground: Color::Rgb(210, 210, 210),\n                primary: Color::Rgb(127, 173, 173),\n                secondary: Color::Rgb(193, 167, 127),\n                accent: Color::Rgb(224, 138, 138),\n                highlight: Color::Rgb(60, 60, 80),\n                border: Color::Rgb(80, 80, 100),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Dracula\n            Theme {\n                name: \"Dracula\".to_string(),\n                background: Color::Rgb(40, 42, 54),\n                foreground: Color::Rgb(248, 248, 242),\n                primary: Color::Rgb(189, 147, 249),\n                secondary: Color::Rgb(80, 250, 123),\n                accent: Color::Rgb(255, 85, 85),\n                highlight: Color::Rgb(68, 71, 90),\n                border: Color::Rgb(98, 114, 164),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Gruvbox\n            Theme {\n                name: \"Gruvbox\".to_string(),\n                background: Color::Rgb(40, 40, 40),\n                foreground: Color::Rgb(235, 219, 178),\n                primary: Color::Rgb(254, 128, 25),\n                secondary: Color::Rgb(184, 187, 38),\n                accent: Color::Rgb(251, 73, 52),\n                highlight: Color::Rgb(60, 56, 54),\n                border: Color::Rgb(124, 111, 100),\n                text_secondary: Color::Rgb(168, 153, 132),\n            },\n            // Nord\n            Theme {\n                name: \"Nord\".to_string(),\n                background: Color::Rgb(46, 52, 64),\n                foreground: Color::Rgb(216, 222, 233),\n                primary: Color::Rgb(136, 192, 208),\n                secondary: Color::Rgb(163, 190, 140),\n                accent: Color::Rgb(191, 97, 106),\n                highlight: Color::Rgb(59, 66, 82),\n                border: Color::Rgb(76, 86, 106),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Solarized (Dark)\n            Theme {\n                name: \"Solarized (Dark)\".to_string(),\n                background: Color::Rgb(0, 43, 54),\n                foreground: Color::Rgb(131, 148, 150),\n                primary: Color::Rgb(38, 139, 210),\n                secondary: Color::Rgb(133, 153, 0),\n                accent: Color::Rgb(220, 50, 47),\n                highlight: Color::Rgb(7, 54, 66),\n                border: Color::Rgb(88, 110, 117),\n                text_secondary: Color::Rgb(101, 123, 131),\n            },\n            // Catppuccin (Mocha)\n            Theme {\n                name: \"Catppuccin (Mocha)\".to_string(),\n                background: Color::Rgb(30, 30, 46),\n                foreground: Color::Rgb(205, 214, 244),\n                primary: Color::Rgb(137, 180, 250),\n                secondary: Color::Rgb(166, 227, 161),\n                accent: Color::Rgb(243, 139, 168),\n                highlight: Color::Rgb(49, 50, 68),\n                border: Color::Rgb(88, 91, 112),\n                text_secondary: Color::Rgb(147, 153, 178),\n            },\n            // Tokyo Night\n            Theme {\n                name: \"Tokyo Night\".to_string(),\n                background: Color::Rgb(24, 25, 38),\n                foreground: Color::Rgb(169, 177, 214),\n                primary: Color::Rgb(122, 162, 247),\n                secondary: Color::Rgb(158, 206, 106),\n                accent: Color::Rgb(247, 118, 142),\n                highlight: Color::Rgb(31, 32, 48),\n                border: Color::Rgb(56, 58, 79),\n                text_secondary: Color::Rgb(92, 99, 122),\n            },\n            // One Dark\n            Theme {\n                name: \"One Dark\".to_string(),\n                background: Color::Rgb(40, 44, 52),\n                foreground: Color::Rgb(171, 178, 191),\n                primary: Color::Rgb(97, 175, 239),\n                secondary: Color::Rgb(152, 195, 121),\n                accent: Color::Rgb(224, 108, 117),\n                highlight: Color::Rgb(49, 54, 63),\n                border: Color::Rgb(65, 70, 81),\n                text_secondary: Color::Rgb(140, 140, 140),\n            },\n            // Monokai\n            Theme {\n                name: \"Monokai\".to_string(),\n                background: Color::Rgb(39, 40, 34),\n                foreground: Color::Rgb(248, 248, 242),\n                primary: Color::Rgb(102, 217, 239),\n                secondary: Color::Rgb(166, 226, 46),\n                accent: Color::Rgb(249, 38, 114),\n                highlight: Color::Rgb(56, 57, 50),\n                border: Color::Rgb(73, 72, 62),\n                text_secondary: Color::Rgb(150, 150, 150),\n            },\n            // Everforest (Dark)\n            Theme {\n                name: \"Everforest (Dark)\".to_string(),\n                background: Color::Rgb(45, 52, 64),\n                foreground: Color::Rgb(211, 208, 191),\n                primary: Color::Rgb(116, 178, 123),\n                secondary: Color::Rgb(229, 192, 123),\n                accent: Color::Rgb(228, 108, 117),\n                highlight: Color::Rgb(56, 64, 79),\n                border: Color::Rgb(78, 87, 105),\n                text_secondary: Color::Rgb(148, 142, 129),\n            },\n        ]\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_theme_creation() {\n        let theme = Theme {\n            name: \"Test Theme\".to_string(),\n            background: Color::Black,\n            foreground: Color::White,\n            primary: Color::Blue,\n            secondary: Color::Green,\n            accent: Color::Red,\n            highlight: Color::Yellow,\n            border: Color::Gray,\n            text_secondary: Color::DarkGray,\n        };\n\n        assert_eq!(theme.name, \"Test Theme\");\n        assert_eq!(theme.background, Color::Black);\n        assert_eq!(theme.foreground, Color::White);\n    }\n\n    #[test]\n    fn test_theme_manager_get_themes() {\n        let themes = ThemeManager::get_themes();\n        \n        // Should have multiple themes\n        assert!(!themes.is_empty());\n        assert!(themes.len() \u003e= 6);\n\n        // Check that all expected themes are present\n        let theme_names: Vec\u003c\u0026String\u003e = themes.iter().map(|t| \u0026t.name).collect();\n        assert!(theme_names.contains(\u0026\u0026\"Kanagawa\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Dracula\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Gruvbox\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Nord\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"One Dark\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Monokai\".to_string()));\n        assert!(theme_names.contains(\u0026\u0026\"Everforest (Dark)\".to_string()));\n    }\n\n    #[test]\n    fn test_all_themes_have_valid_properties() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Each theme should have a non-empty name\n            assert!(!theme.name.is_empty());\n            \n            // Theme should be cloneable\n            let _cloned = theme.clone();\n            \n            // Theme should be debuggable\n            let debug_str = format!(\"{:?}\", theme);\n            assert!(debug_str.contains(\u0026theme.name));\n        }\n    }\n\n    #[test]\n    fn test_theme_color_values() {\n        let themes = ThemeManager::get_themes();\n        let kanagawa = themes.iter().find(|t| t.name == \"Kanagawa\").unwrap();\n        \n        // Test specific color values for Kanagawa theme\n        assert_eq!(kanagawa.background, Color::Rgb(31, 31, 46));\n        assert_eq!(kanagawa.foreground, Color::Rgb(210, 210, 210));\n        assert_eq!(kanagawa.primary, Color::Rgb(127, 173, 173));\n    }\n\n    #[test]\n    fn test_theme_uniqueness() {\n        let themes = ThemeManager::get_themes();\n        let mut names = std::collections::HashSet::new();\n        \n        for theme in themes {\n            // Each theme name should be unique\n            assert!(names.insert(theme.name.clone()), \"Duplicate theme name: {}\", theme.name);\n        }\n    }\n\n    #[test]\n    fn test_rgb_color_ranges() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Test that RGB values are within valid ranges\n            if let Color::Rgb(r, g, b) = theme.background {\n                assert!(r \u003c= 255);\n                assert!(g \u003c= 255);\n                assert!(b \u003c= 255);\n            }\n            \n            if let Color::Rgb(r, g, b) = theme.foreground {\n                assert!(r \u003c= 255);\n                assert!(g \u003c= 255);\n                assert!(b \u003c= 255);\n            }\n        }\n    }\n\n    #[test]\n    fn test_theme_contrast() {\n        let themes = ThemeManager::get_themes();\n        \n        for theme in themes {\n            // Basic contrast test - background and foreground should be different\n            assert_ne!(theme.background, theme.foreground, \"Theme '{}' has same background and foreground\", theme.name);\n        }\n    }\n\n    #[test]\n    fn test_specific_theme_properties() {\n        let themes = ThemeManager::get_themes();\n        \n        // Test Dracula theme specifically\n        let dracula = themes.iter().find(|t| t.name == \"Dracula\").unwrap();\n        assert_eq!(dracula.background, Color::Rgb(40, 42, 54));\n        assert_eq!(dracula.primary, Color::Rgb(189, 147, 249));\n        \n        // Test Gruvbox theme specifically  \n        let gruvbox = themes.iter().find(|t| t.name == \"Gruvbox\").unwrap();\n        assert_eq!(gruvbox.background, Color::Rgb(40, 40, 40));\n        assert_eq!(gruvbox.accent, Color::Rgb(251, 73, 52));\n    }\n}\n","traces":[{"line":19,"address":[],"length":0,"stats":{"Line":13}},{"line":20,"address":[],"length":0,"stats":{"Line":13}},{"line":22,"address":[],"length":0,"stats":{"Line":13}},{"line":23,"address":[],"length":0,"stats":{"Line":39}},{"line":24,"address":[],"length":0,"stats":{"Line":26}},{"line":25,"address":[],"length":0,"stats":{"Line":26}},{"line":26,"address":[],"length":0,"stats":{"Line":26}},{"line":27,"address":[],"length":0,"stats":{"Line":26}},{"line":28,"address":[],"length":0,"stats":{"Line":26}},{"line":29,"address":[],"length":0,"stats":{"Line":26}},{"line":30,"address":[],"length":0,"stats":{"Line":13}},{"line":31,"address":[],"length":0,"stats":{"Line":13}},{"line":34,"address":[],"length":0,"stats":{"Line":13}},{"line":35,"address":[],"length":0,"stats":{"Line":39}},{"line":36,"address":[],"length":0,"stats":{"Line":26}},{"line":37,"address":[],"length":0,"stats":{"Line":26}},{"line":38,"address":[],"length":0,"stats":{"Line":26}},{"line":39,"address":[],"length":0,"stats":{"Line":26}},{"line":40,"address":[],"length":0,"stats":{"Line":26}},{"line":41,"address":[],"length":0,"stats":{"Line":26}},{"line":42,"address":[],"length":0,"stats":{"Line":13}},{"line":43,"address":[],"length":0,"stats":{"Line":13}},{"line":46,"address":[],"length":0,"stats":{"Line":13}},{"line":47,"address":[],"length":0,"stats":{"Line":39}},{"line":48,"address":[],"length":0,"stats":{"Line":26}},{"line":49,"address":[],"length":0,"stats":{"Line":26}},{"line":50,"address":[],"length":0,"stats":{"Line":26}},{"line":51,"address":[],"length":0,"stats":{"Line":26}},{"line":52,"address":[],"length":0,"stats":{"Line":26}},{"line":53,"address":[],"length":0,"stats":{"Line":26}},{"line":54,"address":[],"length":0,"stats":{"Line":13}},{"line":55,"address":[],"length":0,"stats":{"Line":13}},{"line":58,"address":[],"length":0,"stats":{"Line":13}},{"line":59,"address":[],"length":0,"stats":{"Line":39}},{"line":60,"address":[],"length":0,"stats":{"Line":26}},{"line":61,"address":[],"length":0,"stats":{"Line":26}},{"line":62,"address":[],"length":0,"stats":{"Line":26}},{"line":63,"address":[],"length":0,"stats":{"Line":26}},{"line":64,"address":[],"length":0,"stats":{"Line":26}},{"line":65,"address":[],"length":0,"stats":{"Line":26}},{"line":66,"address":[],"length":0,"stats":{"Line":13}},{"line":67,"address":[],"length":0,"stats":{"Line":13}},{"line":70,"address":[],"length":0,"stats":{"Line":13}},{"line":71,"address":[],"length":0,"stats":{"Line":39}},{"line":72,"address":[],"length":0,"stats":{"Line":26}},{"line":73,"address":[],"length":0,"stats":{"Line":26}},{"line":74,"address":[],"length":0,"stats":{"Line":26}},{"line":75,"address":[],"length":0,"stats":{"Line":26}},{"line":76,"address":[],"length":0,"stats":{"Line":26}},{"line":77,"address":[],"length":0,"stats":{"Line":26}},{"line":78,"address":[],"length":0,"stats":{"Line":13}},{"line":79,"address":[],"length":0,"stats":{"Line":13}},{"line":82,"address":[],"length":0,"stats":{"Line":13}},{"line":83,"address":[],"length":0,"stats":{"Line":39}},{"line":84,"address":[],"length":0,"stats":{"Line":26}},{"line":85,"address":[],"length":0,"stats":{"Line":26}},{"line":86,"address":[],"length":0,"stats":{"Line":26}},{"line":87,"address":[],"length":0,"stats":{"Line":26}},{"line":88,"address":[],"length":0,"stats":{"Line":26}},{"line":89,"address":[],"length":0,"stats":{"Line":26}},{"line":90,"address":[],"length":0,"stats":{"Line":13}},{"line":91,"address":[],"length":0,"stats":{"Line":13}},{"line":94,"address":[],"length":0,"stats":{"Line":13}},{"line":95,"address":[],"length":0,"stats":{"Line":39}},{"line":96,"address":[],"length":0,"stats":{"Line":26}},{"line":97,"address":[],"length":0,"stats":{"Line":26}},{"line":98,"address":[],"length":0,"stats":{"Line":26}},{"line":99,"address":[],"length":0,"stats":{"Line":26}},{"line":100,"address":[],"length":0,"stats":{"Line":26}},{"line":101,"address":[],"length":0,"stats":{"Line":26}},{"line":102,"address":[],"length":0,"stats":{"Line":13}},{"line":103,"address":[],"length":0,"stats":{"Line":13}},{"line":106,"address":[],"length":0,"stats":{"Line":13}},{"line":107,"address":[],"length":0,"stats":{"Line":39}},{"line":108,"address":[],"length":0,"stats":{"Line":26}},{"line":109,"address":[],"length":0,"stats":{"Line":26}},{"line":110,"address":[],"length":0,"stats":{"Line":26}},{"line":111,"address":[],"length":0,"stats":{"Line":26}},{"line":112,"address":[],"length":0,"stats":{"Line":26}},{"line":113,"address":[],"length":0,"stats":{"Line":26}},{"line":114,"address":[],"length":0,"stats":{"Line":13}},{"line":115,"address":[],"length":0,"stats":{"Line":13}},{"line":118,"address":[],"length":0,"stats":{"Line":13}},{"line":119,"address":[],"length":0,"stats":{"Line":39}},{"line":120,"address":[],"length":0,"stats":{"Line":26}},{"line":121,"address":[],"length":0,"stats":{"Line":26}},{"line":122,"address":[],"length":0,"stats":{"Line":26}},{"line":123,"address":[],"length":0,"stats":{"Line":26}},{"line":124,"address":[],"length":0,"stats":{"Line":26}},{"line":125,"address":[],"length":0,"stats":{"Line":26}},{"line":126,"address":[],"length":0,"stats":{"Line":13}},{"line":127,"address":[],"length":0,"stats":{"Line":13}},{"line":130,"address":[],"length":0,"stats":{"Line":13}},{"line":131,"address":[],"length":0,"stats":{"Line":39}},{"line":132,"address":[],"length":0,"stats":{"Line":26}},{"line":133,"address":[],"length":0,"stats":{"Line":26}},{"line":134,"address":[],"length":0,"stats":{"Line":26}},{"line":135,"address":[],"length":0,"stats":{"Line":26}},{"line":136,"address":[],"length":0,"stats":{"Line":26}},{"line":137,"address":[],"length":0,"stats":{"Line":26}},{"line":138,"address":[],"length":0,"stats":{"Line":13}},{"line":139,"address":[],"length":0,"stats":{"Line":13}}],"covered":102,"coverable":102},{"path":["/","Users","pedro.nieto","Documents","rust","repos","BossyRust","tests","cli_integration_tests.rs"],"content":"use assert_cmd::Command;\nuse predicates::prelude::*;\n\n#[test]\nfn test_cli_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.arg(\"--help\");\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\n            \"lightweight Terminal User Interface\",\n        ))\n        .stdout(predicate::str::contains(\"Usage: bossy-rust\"))\n        .stdout(predicate::str::contains(\"Commands:\"))\n        .stdout(predicate::str::contains(\"port\"))\n        .stdout(predicate::str::contains(\"kill-port\"))\n        .stdout(predicate::str::contains(\"ports\"))\n        .stdout(predicate::str::contains(\"kill-process\"))\n        .stdout(predicate::str::contains(\"ps\"))\n        .stdout(predicate::str::contains(\"cleanup\"))\n        .stdout(predicate::str::contains(\"find-port\"));\n}\n\n#[test]\nfn test_cli_version() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.arg(\"--version\");\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"bossy-rust\"));\n}\n\n#[test]\nfn test_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"--help\"]);\n\n    cmd.assert().success().stdout(predicate::str::contains(\n        \"Show what's using a specific port\",\n    ));\n}\n\n#[test]\nfn test_kill_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-port\", \"--help\"]);\n\n    cmd.assert().success().stdout(predicate::str::contains(\n        \"Kill process using a specific port\",\n    ));\n}\n\n#[test]\nfn test_ports_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Show all ports\"))\n        .stdout(predicate::str::contains(\"--common\"))\n        .stdout(predicate::str::contains(\"--listening\"));\n}\n\n#[test]\nfn test_kill_process_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Kill processes by name\"))\n        .stdout(predicate::str::contains(\"--force\"));\n}\n\n#[test]\nfn test_ps_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Show processes\"))\n        .stdout(predicate::str::contains(\"--top-cpu\"))\n        .stdout(predicate::str::contains(\"--top-memory\"))\n        .stdout(predicate::str::contains(\"--limit\"));\n}\n\n#[test]\nfn test_cleanup_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\n            \"Cleanup common development processes\",\n        ))\n        .stdout(predicate::str::contains(\"--dev\"));\n}\n\n#[test]\nfn test_find_port_command_help() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"--help\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Find available port in range\"));\n}\n\n#[test]\nfn test_port_command_with_invalid_port() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"65534\"]);\n\n    // This should succeed but likely show no processes (using valid port range)\n    cmd.assert().success();\n}\n\n#[test]\nfn test_port_command_with_zero() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"0\"]);\n\n    // Port 0 should be handled gracefully\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ps_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Processes\"));\n}\n\n#[test]\nfn test_ps_command_top_cpu() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--top-cpu\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Top\"))\n        .stdout(predicate::str::contains(\"CPU\"));\n}\n\n#[test]\nfn test_ps_command_top_memory() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--top-memory\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Top\"))\n        .stdout(predicate::str::contains(\"Memory\"));\n}\n\n#[test]\nfn test_ps_command_with_limit() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--limit\", \"5\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ports_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Ports\"));\n}\n\n#[test]\nfn test_ports_command_listening() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--listening\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_ports_command_common() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ports\", \"--common\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_find_port_command_basic() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"50000\"]);\n\n    // Should either find a port or indicate none available\n    cmd.assert().success();\n}\n\n#[test]\nfn test_find_port_command_with_range() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"find-port\", \"50000\", \"50010\"]);\n\n    cmd.assert().success();\n}\n\n#[test]\nfn test_kill_process_non_existent() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\", \"non_existent_process_name_12345\"]);\n\n    // Should succeed but report no processes found\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"No processes found\"));\n}\n\n#[test]\nfn test_cleanup_without_dev_flag() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"Please specify --dev\"));\n}\n\n#[test]\nfn test_cleanup_with_dev_flag() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"cleanup\", \"--dev\"]);\n\n    // Should succeed regardless of whether dev processes are found\n    cmd.assert().success();\n}\n\n#[test]\nfn test_invalid_command() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"invalid-command\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"unrecognized subcommand\"));\n}\n\n#[test]\nfn test_port_command_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n#[test]\nfn test_kill_port_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-port\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n#[test]\nfn test_kill_process_missing_argument() {\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"kill-process\"]);\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"required\"));\n}\n\n// Note: We avoid actual kill operations in tests to prevent system disruption\n#[test]\nfn test_kill_port_dry_run_concept() {\n    // This test demonstrates how we would test kill operations safely\n    // In a real scenario, we might use a mock system or test environment\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"65534\"]); // Use a valid but very unlikely port\n\n    // Just verify the command structure works\n    cmd.assert().success();\n}\n\n#[test]\nfn test_command_chaining_safety() {\n    // Test that commands don't interfere with each other\n\n    // Run multiple commands in sequence\n    let mut cmd1 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd1.args([\"ps\", \"--limit\", \"1\"]);\n    cmd1.assert().success();\n\n    let mut cmd2 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd2.args([\"ports\", \"--listening\"]);\n    cmd2.assert().success();\n\n    let mut cmd3 = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd3.args([\"find-port\", \"60000\"]);\n    cmd3.assert().success();\n}\n\n#[test]\nfn test_error_handling_graceful() {\n    // Test that errors are handled gracefully without panics\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"port\", \"abc\"]); // Invalid port number\n\n    cmd.assert()\n        .failure()\n        .stderr(predicate::str::contains(\"invalid\").or(predicate::str::contains(\"error\")));\n}\n\n#[test]\nfn test_output_format_consistency() {\n    // Test that output formats are consistent across commands\n\n    let mut cmd = Command::cargo_bin(\"bossy-rust\").unwrap();\n    cmd.args([\"ps\", \"--limit\", \"3\"]);\n\n    cmd.assert()\n        .success()\n        .stdout(predicate::str::contains(\"PID\"))\n        .stdout(predicate::str::contains(\"Process\"));\n}\n","traces":[],"covered":0,"coverable":0}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('pre', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('code', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>